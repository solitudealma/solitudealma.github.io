<!DOCTYPE html>
<html id="bg">

<head>
    <meta charset="utf-8" />
<!--
    * @Theme Card
    * @Author admin@itjoker.cn
    * @Link https://blog.itjoker.cn
-->

<title>
    SolitudeAlma
</title>
<!--[if lt IE 9]><script src="//cdn.bootcss.com/html5shiv/r29/html5.js"></script><![endif]-->
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
<meta http-equiv="x-dns-prefetch-control" content="on">
<link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
<meta name="author" content="SolitudeAlma">
<meta name="description" content="ÈÉΩÊáÇ‰∏ÄÁÇπÔºå‰∏çÊòØÂæàÊáÇÁöÑÂ∞èÊçû‰ªî">
<meta name="keywords" content="algorithm">
<meta name="gridea-theme" content="Card">
<meta name="spider" content="https://nmsl.sbjxw.ÁΩëÂùÄ">
<meta name="UpdateTime" content="1630301105350">
<script src="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io/CDN/js/jquery@3.4.1.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io/CDN/js/Card/prism.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@1.0.36/CDN/css/Card/prism.min.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/contrib/auto-render.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>
<!--<script src="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@1.0.36/CDN/js/Card/script.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@1.0.36/CDN/css/Card/main.min.css" />-->
<script src="https://solitudealma.github.io/media/js/script.js"></script>
<link rel="stylesheet" href="https://solitudealma.github.io/media/css/main.min.css" />
<link rel="stylesheet" href="https://solitudealma.github.io/styles/main.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@1.0.36/CDN/css/Card/iconfont.css" />
<!--link rel="stylesheet" type="text/css" href="//at.alicdn.com/t/font_410989_wuhl0k5ojvf.css" /-->
<link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@1.0.36/CDN/js/love.min.js"></script>
<script src="https://cdn1.lncld.net/static/js/av-min-1.5.0.js"></script>
<script>
    $().ready(
        function() {
            var themeIcon = document.getElementById("themeIcon");
            var currentTheme = window.localStorage.getItem('theme');
            if (currentTheme == 'dark') {
                document.getElementsByTagName('html')[0].classList.add('theme-dark');
                document.getElementsByTagName('html')[0].removeAttribute('id');
                themeIcon.classList.remove('Card-moon');
                themeIcon.classList.add('Card-sun');
            } else {
                document.getElementsByTagName('html')[0].classList.remove('theme-dark');
                document.getElementsByTagName('html')[0].setAttribute('id', 'bg');
                themeIcon.classList.remove('Card-sun');
                themeIcon.classList.add('Card-moon');
            }
        }
    )
</script>

    <script src="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io/CDN/js/hit-kounter-lc-0.3.0.js"></script>
    
        
            <script>
                (function() {
                    var bp = document.createElement('script');
                    var curProtocol = window.location.protocol.split(':')[0];
                    if (curProtocol === 'https') {
                        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
                    } else {
                        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
                    }
                    var s = document.getElementsByTagName("script")[0];
                    s.parentNode.insertBefore(bp, s);
                })();
            </script>
            
                    <style>
                        .Card-certify {
                            color: #0091e4 !important;
                        }
                        
                        #foot {
                            color: #666666;
                        }
                        
                        #menu-item:hover {
                            border-bottom: 1px solid rgba(0, 0, 0, 0.5);
                            border-bottom-color: rgba(0, 0, 0, .6);
                        }
                        
                        .gray {
                            -webkit-filter: grayscale(100%);
                            /* webkit */
                            -moz-filter: grayscale(100%);
                            /*firefox*/
                            -ms-filter: grayscale(100%);
                            /*ie9*/
                            -o-filter: grayscale(100%);
                            /*opera*/
                            filter: grayscale(100%);
                            filter: progid: DXImageTransform.Microsoft.BasicImage(grayscale=1);
                            filter: gray;
                            /*ie9- */
                        }
                        
                        .lite-item,
                        #header {
                            opacity: 1;
                        }
                        
                        .lite-item {
                            background-color: #fafafa;
                        }
                        
                        #btnStyle:hover {
                            transition: all .3s ease;
                            /*color: #fff;*/
                            /*background-color: #6b6b6b;*/
                            background-color: #eaeaea;
                            /*#0092ee*/
                            /*linear-gradient( rgb(138, 160, 255) 30%, rgb(90, 140, 250) 70%);*/
                        }
                        
                        #btnStyle {
                            /*background-color: #efefef;*/
                            font-size: 14px;
                            transition: all .3s ease;
                        }
                        
                        .link_a:hover {
                            margin-top: 10px;
                            margin-bottom: 10px;
                            color: #fff;
                            border-left: 8px solid #6b6b6b;
                            padding: 5px;
                            transition: all .3s ease;
                        }
                        
                        html {
                            width: 100%;
                            height: 100%;
                            background-attachment: fixed;
                            background-repeat: no-repeat;
                        }
                    </style>
</head>

<body>
    <header id="header">

    <div id="pc-menu">
        <a id="menu-bar" class="Card Card-menu"></a>
        <a id="menu-title" href="https://solitudealma.github.io">
            SolitudeAlma
        </a>
        <nav id="menu-main" class="menu-main">
            <ul>
                <li id="menu-item" class="menu-item">
                    <div id="tp-weather-widget"></div>
                </li>
                
                    <li id="menu-item" class="menu-item">
                        <a href="/">
                            üéàHome
                        </a>
                    </li>
                    
                    <li id="menu-item" class="menu-item">
                        <a href="/archives">
                            üìöArchives
                        </a>
                    </li>
                    
                    <li id="menu-item" class="menu-item">
                        <a href="/posts">
                            üìÉArticle
                        </a>
                    </li>
                    
                    <li id="menu-item" class="menu-item">
                        <a href="/tags">
                            üè∑Tags
                        </a>
                    </li>
                    
                    <li id="menu-item" class="menu-item">
                        <a href="/friends">
                            üë©‚ÄçüíªFriends
                        </a>
                    </li>
                    
                    <li id="menu-item" class="menu-item">
                        <a href="/post/about">
                            üßú‚Äç‚ôÇÔ∏èAbout
                        </a>
                    </li>
                    
            </ul>
        </nav>
        <form id="gridea-search-form" class="searchform" data-update="1630301105350" action="/search/index.html">
            <i class="Card Card-search"></i>
            <input id="s" class="search-input" autocomplete="off" spellcheck="false" name="q" autofocus="true" placeholder="Search...">
        </form>
    </div>
    <div id="mobile-menu">
        <form id="gridea-search-form" class="mobile-searchform" data-update="1630301105350" action="/search/index.html">
            <i class="Card Card-search"></i>
            <input id="s" class="search-input" autocomplete="off" spellcheck="false" name="q" autofocus="true" placeholder="Search...">
        </form>
        <nav class="menu">
            <ul style="list-style: none;">
                
                    <li class="page_item page-item-2">
                        <a href="/">
                            üéàHome
                        </a>
                    </li>
                    
                    <li class="page_item page-item-2">
                        <a href="/archives">
                            üìöArchives
                        </a>
                    </li>
                    
                    <li class="page_item page-item-2">
                        <a href="/posts">
                            üìÉArticle
                        </a>
                    </li>
                    
                    <li class="page_item page-item-2">
                        <a href="/tags">
                            üè∑Tags
                        </a>
                    </li>
                    
                    <li class="page_item page-item-2">
                        <a href="/friends">
                            üë©‚ÄçüíªFriends
                        </a>
                    </li>
                    
                    <li class="page_item page-item-2">
                        <a href="/post/about">
                            üßú‚Äç‚ôÇÔ∏èAbout
                        </a>
                    </li>
                    
            </ul>
        </nav>
    </div>
    <a id="theme-btn" class="theme-btn" onclick="App.changeTheme()"><i id="themeIcon" class="Card Card-moon"></i></a>
</header>
        <div id="main">
            <div id="main-part">
                <div class="lite-item">
                    <article class="post post-type real-post">
                        <header class="post-type-header">
                            
                                <div class="thumbnail-link" style="background-image: url('https://solitudealma.github.io/post-images/qYIUMWbyl.jpg')"></div>
                                
                                        <div class="thumbnail-shadow">
                                            <h1 class="post-title">
                                                JavaÂ≠¶‰π†Á¨îËÆ∞‰πãMybatis
                                            </h1>
                                            <div class="post-info">
                                                <span class="post-category"><i class="Card Card-novel"></i>
                                        
                                            <span onclick="javascript:top.location='https://solitudealma.github.io/tag/java/'">Java</span>
                                                
                                                    </span>
                                                    <span class="post-view">
                                                    
                                                        &nbsp;‚Ä¢&nbsp;
                                                    <span id="/post/qYIUMWbyl/" class="leancloud_visitors" data-flag-title="JavaÂ≠¶‰π†Á¨îËÆ∞‰πãMybatis">
                                                <i class="Card Card-view"></i>&nbsp;ÈòÖËØªÈáè&nbsp;
                                                <i class="leancloud-visitors-count">0</i>
                                            </span>

                                                    
                                                            </span>&nbsp;‚Ä¢&nbsp;

                                                            <span class="post-readtime">ÈòÖËØªÊó∂Èó¥:
                                            96.7ÂàÜ</span>
                                                            <span class="post-edit"></span></div>
                                        </div>
                                        <div class="post-relative">
                                            <img alt="SolitudeAlma" src="https://solitudealma.github.io/images/avatar.png?v=1630301105350" srcset="https://solitudealma.github.io/images/avatar.png?v=1630301105350" class="avatar avatar-100 photo" width="100" height="100">
                                            <span class="post-type-author"><a href="https://solitudealma.github.io" title="Áî±SolitudeAlmaÂèëÂ∏É" rel="author">SolitudeAlma<i class="Card Card-certify"></i></a></span>
                                            <span class="post-publish"><i class="fa fa-calendar" aria-hidden="true"></i>&nbsp;2021-08-29</span>
                                        </div>
                        </header>
                        <div class="post-main post-type-main">
                            <div class="post-content">
                                <div class="post-content-real">
                                    <h1 id="1-mybatis">1. Mybatis</h1>
<h2 id="11-mybatis‰ªãÁªç">1.1 MyBatis‰ªãÁªç</h2>
<figure data-type="image" tabindex="1"><img src="https://cdn.nlark.com/yuque/0/2021/png/22045814/1628863180929-d30089cb-644d-49fc-b399-dc2b1c626305.png#clientId=u2d9c7733-e67d-4&amp;from=paste&amp;height=173&amp;id=u43146585&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=128&amp;originWidth=423&amp;originalType=binary&amp;ratio=1&amp;size=24041&amp;status=done&amp;style=none&amp;taskId=ue894ae1f-41c0-4e5b-96fb-bacfd354f57&amp;width=571.5" alt="image.png" loading="lazy"></figure>
<ul>
<li>MyBatis ÊòØ‰∏ÄÊ¨æ‰ºòÁßÄÁöÑ<strong>ÊåÅ‰πÖÂ±ÇÊ°ÜÊû∂</strong></li>
<li>MyBatis ÈÅøÂÖç‰∫ÜÂá†‰πéÊâÄÊúâÁöÑ JDBC ‰ª£Á†ÅÂíåÊâãÂä®ËÆæÁΩÆÂèÇÊï∞‰ª•ÂèäËé∑ÂèñÁªìÊûúÈõÜÁöÑËøáÁ®ã</li>
<li>MyBatis ÂèØ‰ª•‰ΩøÁî®ÁÆÄÂçïÁöÑ XML ÊàñÊ≥®Ëß£Êù•ÈÖçÁΩÆÂíåÊò†Â∞ÑÂéüÁîü‰ø°ÊÅØÔºåÂ∞ÜÊé•Âè£Âíå Java ÁöÑ ÂÆû‰ΩìÁ±ª „ÄêPlain Old Java Objects,ÊôÆÈÄöÁöÑËÄÅÂºèJavaÂØπË±°„ÄëÊò†Â∞ÑÊàêÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑËÆ∞ÂΩï„ÄÇ</li>
<li>MyBatis Êú¨ÊòØapacheÁöÑ‰∏Ä‰∏™ÂºÄÊ∫êÈ°πÁõÆibatis, 2010Âπ¥Ëøô‰∏™È°πÁõÆÁî±apache ËøÅÁßªÂà∞‰∫Ügoogle codeÔºåÂπ∂‰∏îÊîπÂêç‰∏∫MyBatis „ÄÇ</li>
<li>2013Âπ¥11ÊúàËøÅÁßªÂà∞<strong>Github</strong> .</li>
<li>MybatisÂÆòÊñπÊñáÊ°£ : http://www.mybatis.org/mybatis-3/zh/index.html</li>
<li>GitHub : https://github.com/mybatis/mybatis-3</li>
</ul>
<p>Â¶Ç‰ΩïËé∑ÂèñMybatis</p>
<ul>
<li>maven‰ªìÂ∫ì</li>
</ul>
<pre><code class="language-xml">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
    &lt;artifactId&gt;mybatis&lt;/artifactId&gt;
    &lt;version&gt;3.5.7&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<ul>
<li>GithubÔºö<a href="https://github.com/mybatis/mybatis-3/releases">https://github.com/mybatis/mybatis-3/releases</a></li>
<li>‰∏≠ÊñáÊñáÊ°£Ôºö<a href="http://www.mybatis.org/mybatis-3/zh/index.html">http://www.mybatis.org/mybatis-3/zh/index.html</a></li>
</ul>
<h2 id="12-ÊåÅ‰πÖÂåñ">1.2 ÊåÅ‰πÖÂåñ</h2>
<p><strong>ÊåÅ‰πÖÂåñÊòØÂ∞ÜÁ®ãÂ∫èÊï∞ÊçÆÂú®ÊåÅ‰πÖÁä∂ÊÄÅÂíåÁû¨Êó∂Áä∂ÊÄÅÈó¥ËΩ¨Êç¢ÁöÑÊú∫Âà∂„ÄÇ</strong></p>
<ul>
<li>Âç≥ÊääÊï∞ÊçÆÔºàÂ¶ÇÂÜÖÂ≠ò‰∏≠ÁöÑÂØπË±°Ôºâ‰øùÂ≠òÂà∞ÂèØÊ∞∏‰πÖ‰øùÂ≠òÁöÑÂ≠òÂÇ®ËÆæÂ§á‰∏≠ÔºàÂ¶ÇÁ£ÅÁõòÔºâ„ÄÇÊåÅ‰πÖÂåñÁöÑ‰∏ªË¶ÅÂ∫îÁî®ÊòØÂ∞ÜÂÜÖÂ≠ò‰∏≠ÁöÑÂØπË±°Â≠òÂÇ®Âú®Êï∞ÊçÆÂ∫ì‰∏≠ÔºåÊàñËÄÖÂ≠òÂÇ®Âú®Á£ÅÁõòÊñá‰ª∂‰∏≠„ÄÅXMLÊï∞ÊçÆÊñá‰ª∂‰∏≠Á≠âÁ≠â„ÄÇ</li>
<li>JDBCÂ∞±ÊòØ‰∏ÄÁßçÊåÅ‰πÖÂåñÊú∫Âà∂„ÄÇÊñá‰ª∂IO‰πüÊòØ‰∏ÄÁßçÊåÅ‰πÖÂåñÊú∫Âà∂„ÄÇ</li>
<li>Âú®ÁîüÊ¥ª‰∏≠ : Â∞ÜÈ≤úËÇâÂÜ∑ËóèÔºåÂêÉÁöÑÊó∂ÂÄôÂÜçËß£ÂÜªÁöÑÊñπÊ≥ï‰πüÊòØ„ÄÇÂ∞ÜÊ∞¥ÊûúÂÅöÊàêÁΩêÂ§¥ÁöÑÊñπÊ≥ï‰πüÊòØ„ÄÇ</li>
</ul>
<p><strong>‰∏∫‰ªÄ‰πàÈúÄË¶ÅÊåÅ‰πÖÂåñÊúçÂä°Âë¢ÔºüÈÇ£ÊòØÁî±‰∫éÂÜÖÂ≠òÊú¨Ë∫´ÁöÑÁº∫Èô∑ÂºïËµ∑ÁöÑ</strong></p>
<ul>
<li>ÂÜÖÂ≠òÊñ≠ÁîµÂêéÊï∞ÊçÆ‰ºö‰∏¢Â§±Ôºå‰ΩÜÊúâ‰∏Ä‰∫õÂØπË±°ÊòØÊó†ËÆ∫Â¶Ç‰ΩïÈÉΩ‰∏çËÉΩ‰∏¢Â§±ÁöÑÔºåÊØîÂ¶ÇÈì∂Ë°åË¥¶Âè∑Á≠âÔºåÈÅóÊÜæÁöÑÊòØÔºå‰∫∫‰ª¨ËøòÊó†Ê≥ï‰øùËØÅÂÜÖÂ≠òÊ∞∏‰∏çÊéâÁîµ„ÄÇ</li>
<li>ÂÜÖÂ≠òËøá‰∫éÊòÇË¥µÔºå‰∏éÁ°¨Áõò„ÄÅÂÖâÁõòÁ≠âÂ§ñÂ≠òÁõ∏ÊØîÔºåÂÜÖÂ≠òÁöÑ‰ª∑Ê†ºË¶ÅÈ´ò2~3‰∏™Êï∞ÈáèÁ∫ßÔºåËÄå‰∏îÁª¥ÊåÅÊàêÊú¨‰πüÈ´òÔºåËá≥Â∞ëÈúÄË¶Å‰∏ÄÁõ¥‰æõÁîµÂêß„ÄÇÊâÄ‰ª•Âç≥‰ΩøÂØπË±°‰∏çÈúÄË¶ÅÊ∞∏‰πÖ‰øùÂ≠òÔºå‰πü‰ºöÂõ†‰∏∫ÂÜÖÂ≠òÁöÑÂÆπÈáèÈôêÂà∂‰∏çËÉΩ‰∏ÄÁõ¥ÂëÜÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÈúÄË¶ÅÊåÅ‰πÖÂåñÊù•ÁºìÂ≠òÂà∞Â§ñÂ≠ò„ÄÇ</li>
</ul>
<h2 id="13-ÊåÅ‰πÖÂ±Ç">1.3 ÊåÅ‰πÖÂ±Ç</h2>
<p><strong>‰ªÄ‰πàÊòØÊåÅ‰πÖÂ±ÇÔºü</strong></p>
<ul>
<li>ÂÆåÊàêÊåÅ‰πÖÂåñÂ∑•‰ΩúÁöÑ‰ª£Á†ÅÂùó„ÄÇ ----&gt;  daoÂ±Ç „ÄêDAO (Data Access Object)  Êï∞ÊçÆËÆøÈóÆÂØπË±°„Äë</li>
<li>Â§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÁâπÂà´ÊòØ‰ºÅ‰∏öÁ∫ßÂ∫îÁî®ÔºåÊï∞ÊçÆÊåÅ‰πÖÂåñÂæÄÂæÄ‰πüÂ∞±ÊÑèÂë≥ÁùÄÂ∞ÜÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆ‰øùÂ≠òÂà∞Á£ÅÁõò‰∏äÂä†‰ª•Âõ∫ÂåñÔºåËÄåÊåÅ‰πÖÂåñÁöÑÂÆûÁé∞ËøáÁ®ãÂàôÂ§ßÂ§öÈÄöËøáÂêÑÁßç<strong>ÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ì</strong>Êù•ÂÆåÊàê„ÄÇ</li>
<li>‰∏çËøáËøôÈáåÊúâ‰∏Ä‰∏™Â≠óÈúÄË¶ÅÁâπÂà´Âº∫Ë∞ÉÔºå‰πüÂ∞±ÊòØÊâÄË∞ìÁöÑ‚ÄúÂ±Ç‚Äù„ÄÇÂØπ‰∫éÂ∫îÁî®Á≥ªÁªüËÄåË®ÄÔºåÊï∞ÊçÆÊåÅ‰πÖÂäüËÉΩÂ§ßÂ§öÊòØÂøÖ‰∏çÂèØÂ∞ëÁöÑÁªÑÊàêÈÉ®ÂàÜ„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÊàë‰ª¨ÁöÑÁ≥ªÁªü‰∏≠ÔºåÂ∑≤ÁªèÂ§©ÁÑ∂ÁöÑÂÖ∑Â§á‰∫Ü‚ÄúÊåÅ‰πÖÂ±Ç‚ÄùÊ¶ÇÂøµÔºü‰πüËÆ∏ÊòØÔºå‰ΩÜ‰πüËÆ∏ÂÆûÈôÖÊÉÖÂÜµÂπ∂ÈùûÂ¶ÇÊ≠§„ÄÇ‰πãÊâÄ‰ª•Ë¶ÅÁã¨Á´ãÂá∫‰∏Ä‰∏™‚ÄúÊåÅ‰πÖÂ±Ç‚ÄùÁöÑÊ¶ÇÂøµ,ËÄå‰∏çÊòØ‚ÄúÊåÅ‰πÖÊ®°Âùó‚ÄùÔºå‚ÄúÊåÅ‰πÖÂçïÂÖÉ‚ÄùÔºå‰πüÂ∞±ÊÑèÂë≥ÁùÄÔºåÊàë‰ª¨ÁöÑÁ≥ªÁªüÊû∂ÊûÑ‰∏≠ÔºåÂ∫îËØ•Êúâ‰∏Ä‰∏™Áõ∏ÂØπÁã¨Á´ãÁöÑÈÄªËæëÂ±ÇÈù¢Ôºå‰∏ìÊ≥®‰∫éÊï∞ÊçÆÊåÅ‰πÖÂåñÈÄªËæëÁöÑÂÆûÁé∞.</li>
<li>‰∏éÁ≥ªÁªüÂÖ∂‰ªñÈÉ®ÂàÜÁõ∏ÂØπËÄåË®ÄÔºåËøô‰∏™Â±ÇÈù¢Â∫îËØ•ÂÖ∑Êúâ‰∏Ä‰∏™ËæÉ‰∏∫Ê∏ÖÊô∞Âíå‰∏•Ê†ºÁöÑÈÄªËæëËæπÁïå„ÄÇ„ÄêËØ¥ÁôΩ‰∫ÜÂ∞±ÊòØÁî®Êù•Êìç‰ΩúÊï∞ÊçÆÂ∫ìÂ≠òÂú®ÁöÑÔºÅ„Äë</li>
</ul>
<h2 id="14-‰∏∫‰ªÄ‰πàÈúÄË¶Åmybatis">1.4 ‰∏∫‰ªÄ‰πàÈúÄË¶ÅMybatis</h2>
<ul>
<li>MybatisÂ∞±ÊòØÂ∏ÆÂä©Á®ãÂ∫èÁåøÂ∞ÜÊï∞ÊçÆÂ≠òÂÖ•Êï∞ÊçÆÂ∫ì‰∏≠ , Âíå‰ªéÊï∞ÊçÆÂ∫ì‰∏≠ÂèñÊï∞ÊçÆ .</li>
<li>‰º†ÁªüÁöÑjdbcÊìç‰Ωú , ÊúâÂæàÂ§öÈáçÂ§ç‰ª£Á†ÅÂùó .ÊØîÂ¶Ç : Êï∞ÊçÆÂèñÂá∫Êó∂ÁöÑÂ∞ÅË£Ö , Êï∞ÊçÆÂ∫ìÁöÑÂª∫Á´ãËøûÊé•Á≠âÁ≠â... , ÈÄöËøáÊ°ÜÊû∂ÂèØ‰ª•ÂáèÂ∞ëÈáçÂ§ç‰ª£Á†Å,ÊèêÈ´òÂºÄÂèëÊïàÁéá .</li>
<li>MyBatis ÊòØ‰∏Ä‰∏™ÂçäËá™Âä®ÂåñÁöÑ<strong>ORMÊ°ÜÊû∂ (Object Relationship Mapping) --&gt;ÂØπË±°ÂÖ≥Á≥ªÊò†Â∞Ñ</strong></li>
<li>ÊâÄÊúâÁöÑ‰∫ãÊÉÖÔºå‰∏çÁî®Mybatis‰æùÊóßÂèØ‰ª•ÂÅöÂà∞ÔºåÂè™ÊòØÁî®‰∫ÜÂÆÉÔºåÊâÄÊúâÂÆûÁé∞‰ºöÊõ¥Âä†ÁÆÄÂçïÔºÅ<strong>ÊäÄÊúØÊ≤°ÊúâÈ´ò‰Ωé‰πãÂàÜÔºåÂè™Êúâ‰ΩøÁî®Ëøô‰∏™ÊäÄÊúØÁöÑ‰∫∫ÊúâÈ´ò‰Ωé‰πãÂà´</strong></li>
<li>MyBatisÁöÑ‰ºòÁÇπ
<ul>
<li>ÁÆÄÂçïÊòìÂ≠¶ÔºöÊú¨Ë∫´Â∞±ÂæàÂ∞è‰∏îÁÆÄÂçï„ÄÇÊ≤°Êúâ‰ªª‰ΩïÁ¨¨‰∏âÊñπ‰æùËµñÔºåÊúÄÁÆÄÂçïÂÆâË£ÖÂè™Ë¶Å‰∏§‰∏™jarÊñá‰ª∂+ÈÖçÁΩÆÂá†‰∏™sqlÊò†Â∞ÑÊñá‰ª∂Â∞±ÂèØ‰ª•‰∫ÜÔºåÊòì‰∫éÂ≠¶‰π†ÔºåÊòì‰∫é‰ΩøÁî®ÔºåÈÄöËøáÊñáÊ°£ÂíåÊ∫ê‰ª£Á†ÅÔºåÂèØ‰ª•ÊØîËæÉÂÆåÂÖ®ÁöÑÊéåÊè°ÂÆÉÁöÑËÆæËÆ°ÊÄùË∑ØÂíåÂÆûÁé∞„ÄÇ</li>
<li>ÁÅµÊ¥ªÔºömybatis‰∏ç‰ºöÂØπÂ∫îÁî®Á®ãÂ∫èÊàñËÄÖÊï∞ÊçÆÂ∫ìÁöÑÁé∞ÊúâËÆæËÆ°Âº∫Âä†‰ªª‰ΩïÂΩ±Âìç„ÄÇsqlÂÜôÂú®xmlÈáåÔºå‰æø‰∫éÁªü‰∏ÄÁÆ°ÁêÜÂíå‰ºòÂåñ„ÄÇÈÄöËøásqlËØ≠Âè•ÂèØ‰ª•Êª°Ë∂≥Êìç‰ΩúÊï∞ÊçÆÂ∫ìÁöÑÊâÄÊúâÈúÄÊ±Ç„ÄÇ</li>
<li>Ëß£Èô§sql‰∏éÁ®ãÂ∫è‰ª£Á†ÅÁöÑËÄ¶ÂêàÔºöÈÄöËøáÊèê‰æõDAOÂ±ÇÔºåÂ∞Ü‰∏öÂä°ÈÄªËæëÂíåÊï∞ÊçÆËÆøÈóÆÈÄªËæëÂàÜÁ¶ªÔºå‰ΩøÁ≥ªÁªüÁöÑËÆæËÆ°Êõ¥Ê∏ÖÊô∞ÔºåÊõ¥ÊòìÁª¥Êä§ÔºåÊõ¥ÊòìÂçïÂÖÉÊµãËØï„ÄÇsqlÂíå‰ª£Á†ÅÁöÑÂàÜÁ¶ªÔºåÊèêÈ´ò‰∫ÜÂèØÁª¥Êä§ÊÄß„ÄÇ</li>
<li>Êèê‰æõxmlÊ†áÁ≠æÔºåÊîØÊåÅÁºñÂÜôÂä®ÊÄÅsql„ÄÇ</li>
<li>.......</li>
</ul>
</li>
<li>ÊúÄÈáçË¶ÅÁöÑ‰∏ÄÁÇπÔºå‰ΩøÁî®ÁöÑ‰∫∫Â§öÔºÅÂÖ¨Âè∏ÈúÄË¶ÅÔºÅ</li>
</ul>
<h1 id="2-Á¨¨‰∏Ä‰∏™mybatisÁ®ãÂ∫è">2. Á¨¨‰∏Ä‰∏™MybatisÁ®ãÂ∫è</h1>
<p><strong>ÊÄùË∑ØÊµÅÁ®ãÔºöÊê≠Âª∫ÁéØÂ¢É--&gt;ÂØºÂÖ•Mybatis---&gt;ÁºñÂÜô‰ª£Á†Å---&gt;ÊµãËØï</strong></p>
<h2 id="21-Êê≠Âª∫ÁéØÂ¢É">2.1 Êê≠Âª∫ÁéØÂ¢É</h2>
<p>Êê≠Âª∫Êï∞ÊçÆÂ∫ì</p>
<pre><code class="language-sql">CREATE DATABASE `mybatis` CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;

USE `mybatis`;

DROP TABLE IF EXISTS `user`;

CREATE TABLE `user` (
`id` INT(20) NOT NULL,
`name` VARCHAR(30) DEFAULT NULL,
`pwd` VARCHAR(30) DEFAULT NULL,
PRIMARY KEY (`id`)
) ENGINE=INNODB DEFAULT CHARSET=utf8mb4;

INSERT INTO `user`(`id`,`name`,`pwd`) VALUES (1,'SolitudeAlma','123456'),(2,'Âº†‰∏â','abcdef'),(3,'ÊùéÂõõ','987654');
</code></pre>
<p>Êñ∞Âª∫È°πÁõÆ</p>
<ol>
<li>Êñ∞Âª∫‰∏Ä‰∏™ÊôÆÈÄöÁöÑmavenÈ°πÁõÆÔºàÊó†Ê®°ÊùøÔºâ</li>
<li>Âà†Èô§srcÁõÆÂΩïÔºåËÆ©Â∑•Á®ãÂèò‰∏∫‰∏Ä‰∏™Áà∂Â∑•Á®ã</li>
<li>ÂØºÂÖ•‰æùËµñ</li>
</ol>
<pre><code class="language-xml">&lt;!--ÂØºÂÖ•‰æùËµñ--&gt;
&lt;dependencies&gt;
  &lt;!--Mybatis--&gt;
  &lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
    &lt;artifactId&gt;mybatis&lt;/artifactId&gt;
    &lt;version&gt;3.5.7&lt;/version&gt;
  &lt;/dependency&gt;
  &lt;!--mysqlÈ©±Âä®--&gt;
  &lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;mysql&lt;/groupId&gt;
    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
    &lt;version&gt;8.0.24&lt;/version&gt;
  &lt;/dependency&gt;
  &lt;!--junitÔºåÊµãËØïÁî®--&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;junit&lt;/groupId&gt;
    &lt;artifactId&gt;junit&lt;/artifactId&gt;
    &lt;version&gt;4.13.2&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
  &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>
<h2 id="22-ÂàõÂª∫‰∏Ä‰∏™Ê®°Âùó">2.2 ÂàõÂª∫‰∏Ä‰∏™Ê®°Âùó</h2>
<p>ËøôÊ†∑Â≠êÈ°πÁõÆÂ∞±‰∏çÈúÄË¶ÅÈáçÂ§çÊ∑ªÂä†‰æùËµñ</p>
<ol>
<li>ÁºñÂÜôMyBatisÊ†∏ÂøÉÈÖçÁΩÆÊñá‰ª∂</li>
</ol>
<p>Êü•ÁúãÂ∏ÆÂä©ÊñáÊ°£</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE configuration
        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;
&lt;!--configurationÊ†∏ÂøÉÈÖçÁΩÆÊñá‰ª∂--&gt;
&lt;configuration&gt;
    &lt;environments default=&quot;development&quot;&gt;
        &lt;environment id=&quot;development&quot;&gt;
            &lt;transactionManager type=&quot;JDBC&quot;/&gt;
            &lt;dataSource type=&quot;POOLED&quot;&gt;
                &lt;property name=&quot;driver&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt;
                &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/mybatis?useSSL=true&amp;amp;useUnicode=true&amp;amp;characterEncoding=UTF-8&amp;amp;&quot;/&gt;
                &lt;property name=&quot;username&quot; value=&quot;${username}&quot;/&gt;
                &lt;property name=&quot;password&quot; value=&quot;${password}&quot;/&gt;
            &lt;/dataSource&gt;
        &lt;/environment&gt;
    &lt;/environments&gt;
&lt;/configuration&gt;
</code></pre>
<ol start="2">
<li>ÁºñÂÜôMyBatisÂ∑•ÂÖ∑Á±ª</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.utils;

import org.apache.ibatis.io.Resources;
import org.apache.ibatis.session.SqlSession;
import org.apache.ibatis.session.SqlSessionFactory;
import org.apache.ibatis.session.SqlSessionFactoryBuilder;

import javax.annotation.Resource;
import java.io.IOException;
import java.io.InputStream;

/**
 * sqlSessionFactory ---&gt; sqlSession
 * @author SolitudeAlma
 * @date 2021/8/13
 */
public class MybatisUtils {
    private static SqlSessionFactory sqlSessionFactory;
    static {
        try {
            //Ëé∑ÂèñsqlSessionFactoryÂØπË±°
            String resource = &quot;mybatis-config.xml&quot;;
            InputStream inputStream = Resources.getResourceAsStream(resource);
            sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    /**
     * Êó¢ÁÑ∂Êúâ‰∫Ü SqlSessionFactoryÔºåÈ°æÂêçÊÄù‰πâÔºåÊàë‰ª¨ÂèØ‰ª•‰ªé‰∏≠Ëé∑Âæó SqlSession ÁöÑÂÆû‰æã„ÄÇSqlSession Êèê‰æõ‰∫ÜÂú®Êï∞ÊçÆÂ∫ìÊâßË°å SQL
     * ÂëΩ‰ª§ÊâÄÈúÄÁöÑÊâÄÊúâÊñπÊ≥ï„ÄÇ‰Ω†ÂèØ‰ª•ÈÄöËøá SqlSession ÂÆû‰æãÊù•Áõ¥Êé•ÊâßË°åÂ∑≤Êò†Â∞ÑÁöÑSQLËØ≠Âè•„ÄÇ sqlSessionÁõ∏ÂΩì‰∫éjdbc‰∏≠ÁöÑ
     * prepareStatementÂØπË±°
     * @return SqlSessionFactory
     */
    public static SqlSession getSqlSession() {
        return sqlSessionFactory.openSession();
    }
}
</code></pre>
<h2 id="23-ÁºñÂÜô‰ª£Á†Å">2.3 ÁºñÂÜô‰ª£Á†Å</h2>
<ul>
<li>ÂÆû‰ΩìÁ±ª</li>
</ul>
<pre><code class="language-java">package com.SolitudeAlma.pojo;

/**
 * @author SolitudeAlma
 * @date 2021/8/14
 * @description ÂÆû‰ΩìÁ±ª
 */
public class User {
    private int id;
    private String name;
    private String pwd;

    public User(int id, String name, String pwd) {
        this.id = id;
        this.name = name;
        this.pwd = pwd;
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getPwd() {
        return pwd;
    }

    public void setPwd(String pwd) {
        this.pwd = pwd;
    }

    @Override
    public String toString() {
        return &quot;User{&quot; +
                &quot;id=&quot; + id +
                &quot;, name='&quot; + name + '\'' +
                &quot;, pwd='&quot; + pwd + '\'' +
                '}';
    }
}
</code></pre>
<ul>
<li>DaoÊé•Âè£</li>
</ul>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.User;

import java.util.List;

/**
 * @author SolitudeAlma
 * @date 2021/8/14
 */
public interface UserDao {
    /**
     * Êü•ËØ¢ÊâÄÊúâÁî®Êà∑‰ø°ÊÅØ
     * @return User
     */
    List&lt;User&gt; getUserList();
}
</code></pre>
<ul>
<li>Êé•Âè£ÂÆûÁé∞Á±ª</li>
</ul>
<p>Áî®xml‰ª£ÊõøUserDaoImplÂÆûÁé∞Á±ª</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;!--namespaceÁªëÂÆö‰∏Ä‰∏™ÂØπÂ∫îÁöÑDao/MapperÊé•Âè£Ôºà‰ª•ÂêéÊîπ‰∏∫MapperÔºâ--&gt;
&lt;mapper namespace=&quot;com.SolitudeAlma.dao.UserDao&quot;&gt;
    &lt;!--idÂØπÂ∫îÊé•Âè£ÊñπÊ≥ïÂêç--&gt;
    &lt;select id=&quot;getUserList&quot; resultType=&quot;com.SolitudeAlma.pojo.User&quot;&gt;
        select * from user;
    &lt;/select&gt;
&lt;/mapper&gt;
</code></pre>
<h2 id="24-ÊµãËØï">2.4 ÊµãËØï</h2>
<p>Ê≥®ÊÑèÁÇπÔºöorg.apache.ibatis.binding.BindingException: Type interface com.SolitudeAlma.dao.UserDao is not known to the MapperRegistry.</p>
<p>MapperRegistryÊòØ‰ªÄ‰πàÔºü<br>
Ê†∏ÂøÉÈÖçÁΩÆÊñá‰ª∂‰∏≠Ê≥®ÂÜåmapper‚Äã</p>
<pre><code class="language-xml">&lt;!--ÊØè‰∏Ä‰∏™Mapper.xmlÈÉΩÈúÄË¶ÅÂú®MybatisÊ†∏ÂøÉÈÖçÁΩÆÊñá‰ª∂‰∏≠Ê≥®ÂÜå--&gt;
&lt;mappers&gt;
    &lt;mapper resource=&quot;com/SolitudeAlma/dao/UserMapper.xml&quot;/&gt;
&lt;/mappers&gt;
</code></pre>
<p>Could not find resource com/SolitudeAlma/dao/UserMapper.xml<br>
JavaWeb‰∏≠ÊèêÂà∞ËøáÔºåÈ°πÁõÆÊûÑÂª∫Êó∂ÔºåjavaÁõÆÂΩï‰∏ãÁöÑÈùûjavaÊñá‰ª∂‰∏ç‰ºöË¢´ÁîüÊàêÂà∞targetÁõÆÂΩïÔºåÊâÄ‰ª•Êàë‰ª¨ÈúÄË¶ÅÂú®Áà∂È°πÁõÆÁöÑpom.xml‰∏≠buildÊ†áÁ≠æ‰∏ãÂä†ÂÖ•rusourceÊ†áÁ≠æÔºåÊääÊàë‰ª¨ÁöÑxmlÁ≠âÈÖçÁΩÆÊñá‰ª∂‰πüÁîüÊàêÂà∞target</p>
<pre><code class="language-xml">&lt;!--Âú®build‰∏≠ÈÖçÁΩÆresources,Êù•Èò≤Ê≠¢Êàë‰ª¨ËµÑÊ∫êÂØºÂá∫Â§±Ë¥•ÁöÑÈóÆÈ¢ò--&gt;
&lt;build&gt;
  &lt;resources&gt;
    &lt;resource&gt;
      &lt;directory&gt;src/main/resources&lt;/directory&gt;
      &lt;includes&gt;
        &lt;include&gt;**/*.properties&lt;/include&gt;
        &lt;include&gt;**/*.xml&lt;/include&gt;
      &lt;/includes&gt;
      &lt;filtering&gt;false&lt;/filtering&gt;
    &lt;/resource&gt;
    &lt;resource&gt;
      &lt;directory&gt;src/main/java&lt;/directory&gt;
      &lt;includes&gt;
        &lt;include&gt;**/*.properties&lt;/include&gt;
        &lt;include&gt;**/*.xml&lt;/include&gt;
      &lt;/includes&gt;
      &lt;filtering&gt;false&lt;/filtering&gt;
    &lt;/resource&gt;
  &lt;/resources&gt;
&lt;/build&gt;
</code></pre>
<ul>
<li>junitÊµãËØï</li>
</ul>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.User;
import com.SolitudeAlma.utils.MybatisUtils;
import org.apache.ibatis.session.SqlSession;
import org.junit.Test;

import java.util.List;

/**
 * junitÊµãËØïÁ±ª
 * @author SolitudeAlma
 * @date 2021/8/14
 */
public class UserDaoTest {
    @Test
    public void test() {

        //Ëé∑ÂèñSqlSessionÂØπË±°
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        //ÊñπÂºè‰∏Ä:getMapper
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        List&lt;User&gt; userList = mapper.getUserList();

        //ÊñπÂºè‰∫å:‰∏çÊé®Ëçê‰ΩøÁî®
        //List&lt;User&gt; userList = sqlSession.selectList(&quot;com.SolitudeAlma.dao.UserDao.getUserList&quot;);
        for (User user : userList) {
            System.out.println(user);
        }
        //ÂÖ≥Èó≠SqlSession
        sqlSession.close();
    }
}
</code></pre>
<p>ÂèØËÉΩÈÅáÂà∞ÁöÑÈóÆÈ¢òÔºö</p>
<ol>
<li>ÈÖçÁΩÆÊñá‰ª∂Ê≤°ÊúâÊ≥®ÂÜå</li>
<li>ÁªëÂÆöÊé•Âè£ÈîôËØØ</li>
<li>ÊñπÊ≥ïÂêç‰∏çÂØπ</li>
<li>ËøîÂõûÁ±ªÂûã‰∏çÂØπ</li>
<li>mavenÂØºÂá∫ËµÑÊ∫ê</li>
</ol>
<blockquote>
<p>namespace</p>
</blockquote>
<ol>
<li>Â∞Ü‰∏äÈù¢Ê°à‰æã‰∏≠ÁöÑUserDaoÊé•Âè£ÊîπÂêç‰∏∫UserMapperÔºõ</li>
<li>Â∞ÜUserMapper.xml‰∏≠ÁöÑnamespaceÊîπ‰∏∫‰∏∫UserDaoÁöÑË∑ØÂæÑ .</li>
<li>ÂÜçÊ¨°ÊµãËØï</li>
</ol>
<p><strong>ÁªìËÆ∫Ôºö</strong><br>
ÈÖçÁΩÆÊñá‰ª∂‰∏≠namespace‰∏≠ÁöÑÂêçÁß∞‰∏∫ÂØπÂ∫îMapperÊé•Âè£ÊàñËÄÖDaoÊé•Âè£ÁöÑÂÆåÊï¥ÂåÖÂêç,ÂøÖÈ°ª‰∏ÄËá¥ÔºÅ</p>
<h1 id="3-crudÊìç‰Ωú">3. CRUDÊìç‰Ωú</h1>
<h2 id="31-select">3.1 SELECT</h2>
<ul>
<li>selectÊ†áÁ≠æÊòØmybatis‰∏≠ÊúÄÂ∏∏Áî®ÁöÑÊ†áÁ≠æ‰πã‰∏Ä</li>
<li>selectËØ≠Âè•ÊúâÂæàÂ§öÂ±ûÊÄßÂèØ‰ª•ËØ¶ÁªÜÈÖçÁΩÆÊØè‰∏ÄÊù°SQLËØ≠Âè•
<ul>
<li>SQLËØ≠Âè•ËøîÂõûÂÄºÁ±ªÂûã„ÄÇ„ÄêÂÆåÊï¥ÁöÑÁ±ªÂêçÊàñËÄÖÂà´Âêç„Äë</li>
<li>‰º†ÂÖ•SQLËØ≠Âè•ÁöÑÂèÇÊï∞Á±ªÂûã „ÄÇ„Äê‰∏áËÉΩÁöÑMapÔºåÂèØ‰ª•Â§öÂ∞ùËØï‰ΩøÁî®„Äë</li>
<li>ÂëΩÂêçÁ©∫Èó¥‰∏≠ÂîØ‰∏ÄÁöÑÊ†áËØÜÁ¨¶</li>
<li>Êé•Âè£‰∏≠ÁöÑÊñπÊ≥ïÂêç‰∏éÊò†Â∞ÑÊñá‰ª∂‰∏≠ÁöÑSQLËØ≠Âè•ID ‰∏Ä‰∏ÄÂØπÂ∫î</li>
<li>idÔºönamespaceÂØπÂ∫îÊé•Âè£ÁöÑÊñπÊ≥ïÂêç</li>
<li>parameterTypeÔºöÂèÇÊï∞Á±ªÂûã</li>
<li>resultTypeÔºöSQLËØ≠Âè•ËøîÂõûÁªìÊûúÁöÑÁ±ªÂûã</li>
</ul>
</li>
</ul>
<p><strong>ÈúÄÊ±ÇÔºöÊ†πÊçÆidÊü•ËØ¢Áî®Êà∑</strong></p>
<ol>
<li>Âú®UserDao‰∏≠Ê∑ªÂä†ÂØπÂ∫îÊñπÊ≥ï</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.User;

import java.util.List;

/**
 * @author SolitudeAlma
 * @date 2021/8/14
 */
public interface UserDao {
    /**
     * Êü•ËØ¢ÊâÄÊúâÁî®Êà∑‰ø°ÊÅØ
     * @return List Áî®Êà∑‰ø°ÊÅØÈõÜÂêà
     */
    List&lt;User&gt; getUserList();

    /**
     * Ê†πÊçÆidÊü•ËØ¢Áî®Êà∑‰ø°ÊÅØ
     * @param id Áî®Êà∑ÂîØ‰∏ÄÊ†áËØÜ
     * @return User Âçï‰∏™Áî®Êà∑ÁöÑ‰ø°ÊÅØ
     */
    User getUserById(int id);
}

</code></pre>
<ol start="2">
<li>Âú®UserMapper.xml‰∏≠Ê∑ªÂä†SelectËØ≠Âè•</li>
</ol>
<pre><code class="language-xml">&lt;select id=&quot;getUserById&quot; resultType=&quot;com.SolitudeAlma.pojo.User&quot; parameterType=&quot;int&quot;&gt;
  select * from user where id = #{id};
&lt;/select&gt;
</code></pre>
<ol start="3">
<li>ÊµãËØïÁ±ª‰∏≠ÊµãËØï</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.User;
import com.SolitudeAlma.utils.MybatisUtils;
import org.apache.ibatis.session.SqlSession;
import org.junit.Test;

import java.util.List;

/**
 * junitÊµãËØïÁ±ª
 * @author SolitudeAlma
 * @date 2021/8/14
 */
public class UserDaoTest {
    @Test
    public void test() {

        //Ëé∑ÂèñSqlSessionÂØπË±°
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        //ÊñπÂºè‰∏Ä:getMapper
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        List&lt;User&gt; userList = mapper.getUserList();

        //ÊñπÂºè‰∫å:‰∏çÊé®Ëçê‰ΩøÁî®
        //List&lt;User&gt; userList = sqlSession.selectList(&quot;com.SolitudeAlma.dao.UserDao.getUserList&quot;);
        for (User user : userList) {
            System.out.println(user);
        }
        //ÂÖ≥Èó≠SqlSession
        sqlSession.close();
    }

    @Test
    public  void getUserById() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        User userInfo = mapper.getUserById(1);
        System.out.println(userInfo);
        sqlSession.close();
    }
}

</code></pre>
<h2 id="32-insert">3.2 INSERT</h2>
<p>‰∏ÄËà¨‰ΩøÁî®insertÊ†áÁ≠æËøõË°åÊèíÂÖ•Êìç‰ΩúÔºåÂÆÉÁöÑÈÖçÁΩÆÂíåselectÊ†áÁ≠æÂ∑Æ‰∏çÂ§öÔºÅ<br>
<strong>ÈúÄÊ±ÇÔºöÁªôÊï∞ÊçÆÂ∫ìÂ¢ûÂä†‰∏Ä‰∏™Áî®Êà∑</strong></p>
<ol>
<li>Âú®UserDaoÊé•Âè£‰∏≠Ê∑ªÂä†ÂØπÂ∫îÁöÑÊñπÊ≥ï</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.User;

import java.util.List;

/**
 * @author SolitudeAlma
 * @date 2021/8/14
 */
public interface UserDao {
    /**
     * Êü•ËØ¢ÊâÄÊúâÁî®Êà∑‰ø°ÊÅØ
     * @return List Áî®Êà∑‰ø°ÊÅØÈõÜÂêà
     */
    List&lt;User&gt; getUserList();

    /**
     * Ê†πÊçÆidÊü•ËØ¢Áî®Êà∑‰ø°ÊÅØ
     * @param id Áî®Êà∑ÂîØ‰∏ÄÊ†áËØÜ
     * @return User Âçï‰∏™Áî®Êà∑ÁöÑ‰ø°ÊÅØ
     */
    User getUserById(int id);

    /**
     * ÊèíÂÖ•‰∏Ä‰∏™Áî®Êà∑‰ø°ÊÅØ
     * @param user Áî®Êà∑‰ø°ÊÅØÁ±ª
     * @return SQLÊü•ËØ¢ÁªìÊûúÔºåÊàêÂäüÂΩ±ÂìçÂá†Êù°Êï∞ÊçÆ
     */
    int insertOne(User user);   
}
</code></pre>
<ol start="2">
<li>Âú®UserMapper.xml‰∏≠Ê∑ªÂä†insertËØ≠Âè•</li>
</ol>
<pre><code class="language-xml">&lt;!--ÂØπË±°‰∏≠ÁöÑÂ±ûÊÄßÂèØ‰ª•Áõ¥Êé•ÂèñÂá∫Êù•--&gt;
&lt;insert id=&quot;insertOne&quot; parameterType=&quot;com.SolitudeAlma.pojo.User&quot; &gt;
  insert into user (id, name, pwd) values (#{id}, #{name}, #{pwd});
&lt;/insert&gt;
</code></pre>
<p>3.ÊµãËØï</p>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.User;
import com.SolitudeAlma.utils.MybatisUtils;
import org.apache.ibatis.session.SqlSession;
import org.junit.Test;

import java.util.List;

/**
 * junitÊµãËØïÁ±ª
 * @author SolitudeAlma
 * @date 2021/8/14
 */
public class UserDaoTest {
    @Test
    public void test() {

        //Ëé∑ÂèñSqlSessionÂØπË±°
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        //ÊñπÂºè‰∏Ä:getMapper
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        List&lt;User&gt; userList = mapper.getUserList();

        //ÊñπÂºè‰∫å:‰∏çÊé®Ëçê‰ΩøÁî®
        //List&lt;User&gt; userList = sqlSession.selectList(&quot;com.SolitudeAlma.dao.UserDao.getUserList&quot;);
        for (User user : userList) {
            System.out.println(user);
        }
        //ÂÖ≥Èó≠SqlSession
        sqlSession.close();
    }

    @Test
    public  void getUserById() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        User userInfo = mapper.getUserById(1);
        System.out.println(userInfo);
        sqlSession.close();
    }

    @Test
    public  void insertOne() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        int result = mapper.insertOne(new User(4, &quot;Â∞èÊòé&quot;, &quot;1212&quot;));
        System.out.println(result);
        //Â¶ÇÊûú‰∏çÂä†‰∏äËøôÂè•Êèê‰∫§‰∫ãÂä°ÔºåÊàë‰ª¨‰ºöÂèëÁé∞ËôΩÁÑ∂ËæìÂá∫‰∫Ü1Ôºå‰ΩÜÊòØËøòÊòØÊ≤°ÊúâÊèíÂÖ•ÊàêÂäüÔºåÈÇ£ÊòØÂõ†‰∏∫Êàë‰ª¨ÁöÑÂ∑•
        //ÂÖ∑Á±ª‰∏≠ÁöÑopenSessionÊñπÊ≥ïÊ≤°Êúâ‰º†ÂèÇÊï∞ÔºåÈªòËÆ§ÊâãÂä®Êèê‰∫§‰∫ãÂä°ÔºåËÄåmysqlÊòØËá™Âä®Êèê‰∫§‰∫ãÂä°ÁöÑÔºåÊâÄ‰ª•Êàë
       	//Âè™Ë¶ÅËÆæÁΩÆÂèÇÊï∞‰∏∫trueÂ∞±Ë°å‰∫ÜÔºåfalseÂíå‰∏ç‰º†ÂèÇÈÉΩÊòØÊâãÂä®Êèê‰∫§„ÄÇËøôÊ†∑Áõ∏ÂØπÊØîËæÉÂÆâÂÖ®
        sqlSession.commit();
        sqlSession.close();
    }
}
</code></pre>
<p><strong>Ê≥®ÊÑèÁÇπÔºöÂ¢û„ÄÅÂà†„ÄÅÊîπÊìç‰ΩúÈúÄË¶ÅÊèê‰∫§‰∫ãÂä°ÔºÅ</strong></p>
<h2 id="33-update">3.3 UPDATE</h2>
<p>‰∏ÄËà¨‰ΩøÁî®updateÊ†áÁ≠æËøõË°åÊõ¥Êñ∞Êìç‰ΩúÔºåÂÆÉÁöÑÈÖçÁΩÆÂíåselectÊ†áÁ≠æÂ∑Æ‰∏çÂ§öÔºÅ<br>
<strong>ÈúÄÊ±ÇÔºö‰øÆÊîπÁî®Êà∑ÁöÑ‰ø°ÊÅØ</strong></p>
<ol>
<li>ÂêåÁêÜÔºåÁºñÂÜôÊé•Âè£ÊñπÊ≥ï</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.User;

import java.util.List;

/**
 * @author SolitudeAlma
 * @date 2021/8/14
 */
public interface UserDao {
    /**
     * Êü•ËØ¢ÊâÄÊúâÁî®Êà∑‰ø°ÊÅØ
     * @return List Áî®Êà∑‰ø°ÊÅØÈõÜÂêà
     */
    List&lt;User&gt; getUserList();

    /**
     * Ê†πÊçÆidÊü•ËØ¢Áî®Êà∑‰ø°ÊÅØ
     * @param id Áî®Êà∑ÂîØ‰∏ÄÊ†áËØÜ
     * @return User Âçï‰∏™Áî®Êà∑ÁöÑ‰ø°ÊÅØ
     */
    User getUserById(int id);

    /**
     * ÊèíÂÖ•‰∏Ä‰∏™Áî®Êà∑‰ø°ÊÅØ
     * @param user Áî®Êà∑‰ø°ÊÅØÁ±ª
     * @return SQLÊü•ËØ¢ÁªìÊûúÔºåÊàêÂäüÂΩ±ÂìçÂá†Êù°Êï∞ÊçÆ
     */
    int insertOne(User user);

    /**
     * ‰øÆÊîπ‰∏Ä‰∏™Áî®Êà∑ÁöÑ‰ø°ÊÅØ
     * @param user Áî®Êà∑‰ø°ÊÅØÁ±ª
     * @return SQLÊü•ËØ¢ÁªìÊûúÔºåÊàêÂäüÂΩ±ÂìçÂá†Êù°Êï∞ÊçÆ
     */
    int updateOne(User user);
}
</code></pre>
<ol start="2">
<li>ÁºñÂÜôÂØπÂ∫îÁöÑÈÖçÁΩÆÊñá‰ª∂SQL</li>
</ol>
<pre><code class="language-xml">&lt;update id=&quot;updateOne&quot; parameterType=&quot;com.SolitudeAlma.pojo.User&quot;&gt;
  update user set name = #{name}, pwd = #{pwd} where id = #{id};
&lt;/update&gt;
</code></pre>
<ol start="3">
<li>ÊµãËØï</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.User;
import com.SolitudeAlma.utils.MybatisUtils;
import org.apache.ibatis.session.SqlSession;
import org.junit.Test;

import java.util.List;

/**
 * junitÊµãËØïÁ±ª
 * @author SolitudeAlma
 * @date 2021/8/14
 */
public class UserDaoTest {
    @Test
    public void test() {

        //Ëé∑ÂèñSqlSessionÂØπË±°
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        //ÊñπÂºè‰∏Ä:getMapper
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        List&lt;User&gt; userList = mapper.getUserList();

        //ÊñπÂºè‰∫å:‰∏çÊé®Ëçê‰ΩøÁî®
        //List&lt;User&gt; userList = sqlSession.selectList(&quot;com.SolitudeAlma.dao.UserDao.getUserList&quot;);
        for (User user : userList) {
            System.out.println(user);
        }
        //ÂÖ≥Èó≠SqlSession
        sqlSession.close();
    }

    @Test
    public  void getUserById() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        User userInfo = mapper.getUserById(1);
        System.out.println(userInfo);
        sqlSession.close();
    }

    @Test
    public  void insertOne() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        int result = mapper.insertOne(new User(4, &quot;Â∞èÊòé&quot;, &quot;1212&quot;));
        System.out.println(result);
        sqlSession.commit();
        sqlSession.close();
    }

    @Test
    public  void updateOne() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        int result = mapper.updateOne(new User(4, &quot;Â∫üÁâ©&quot;, &quot;12121&quot;));
        System.out.println(result);
        sqlSession.commit();
        sqlSession.close();
    }
}
</code></pre>
<h2 id="34-delete">3.4 DELETE</h2>
<p>‰∏ÄËà¨‰ΩøÁî®deleteÊ†áÁ≠æËøõË°åÂà†Èô§Êìç‰ΩúÔºåÂÆÉÁöÑÈÖçÁΩÆÂíåselectÊ†áÁ≠æÂ∑Æ‰∏çÂ§öÔºÅ<br>
<strong>ÈúÄÊ±ÇÔºöÊ†πÊçÆidÂà†Èô§‰∏Ä‰∏™Áî®Êà∑</strong></p>
<ol>
<li>ÂêåÁêÜÔºåÁºñÂÜôÊé•Âè£ÊñπÊ≥ï</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.User;

import java.util.List;

/**
 * @author SolitudeAlma
 * @date 2021/8/14
 */
public interface UserDao {
    /**
     * Êü•ËØ¢ÊâÄÊúâÁî®Êà∑‰ø°ÊÅØ
     * @return List Áî®Êà∑‰ø°ÊÅØÈõÜÂêà
     */
    List&lt;User&gt; getUserList();

    /**
     * Ê†πÊçÆidÊü•ËØ¢Áî®Êà∑‰ø°ÊÅØ
     * @param id Áî®Êà∑ÂîØ‰∏ÄÊ†áËØÜ
     * @return User Âçï‰∏™Áî®Êà∑ÁöÑ‰ø°ÊÅØ
     */
    User getUserById(int id);

    /**
     * ÊèíÂÖ•‰∏Ä‰∏™Áî®Êà∑‰ø°ÊÅØ
     * @param user Áî®Êà∑‰ø°ÊÅØÁ±ª
     * @return SQLÊü•ËØ¢ÁªìÊûúÔºåÊàêÂäüÂΩ±ÂìçÂá†Êù°Êï∞ÊçÆ
     */
    int insertOne(User user);

    /**
     * ‰øÆÊîπ‰∏Ä‰∏™Áî®Êà∑ÁöÑ‰ø°ÊÅØ
     * @param user Áî®Êà∑‰ø°ÊÅØÁ±ª
     * @return SQLÊü•ËØ¢ÁªìÊûúÔºåÊàêÂäüÂΩ±ÂìçÂá†Êù°Êï∞ÊçÆ
     */
    int updateOne(User user);

    /**
     * Âà†Èô§‰∏Ä‰∏™Áî®Êà∑ÁöÑ‰ø°ÊÅØ
     * @param id Áî®Êà∑ÂîØ‰∏ÄÊ†áËØÜ
     * @return SQLÊü•ËØ¢ÁªìÊûúÔºåÊàêÂäüÂΩ±ÂìçÂá†Êù°Êï∞ÊçÆ
     */
    int deleteById(int id);
}
</code></pre>
<ol start="2">
<li>ÁºñÂÜôÂØπÂ∫îÁöÑÈÖçÁΩÆÊñá‰ª∂SQL</li>
</ol>
<pre><code class="language-xml">&lt;delete id=&quot;deleteById&quot; parameterType=&quot;int&quot;&gt;
  delete from user where id = #{id};
&lt;/delete&gt;
</code></pre>
<ol start="3">
<li>ÊµãËØï</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.User;
import com.SolitudeAlma.utils.MybatisUtils;
import org.apache.ibatis.session.SqlSession;
import org.junit.Test;

import java.util.List;

/**
 * junitÊµãËØïÁ±ª
 * @author SolitudeAlma
 * @date 2021/8/14
 */
public class UserDaoTest {
    @Test
    public void test() {

        //Ëé∑ÂèñSqlSessionÂØπË±°
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        //ÊñπÂºè‰∏Ä:getMapper
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        List&lt;User&gt; userList = mapper.getUserList();

        //ÊñπÂºè‰∫å:‰∏çÊé®Ëçê‰ΩøÁî®
        //List&lt;User&gt; userList = sqlSession.selectList(&quot;com.SolitudeAlma.dao.UserDao.getUserList&quot;);
        for (User user : userList) {
            System.out.println(user);
        }
        //ÂÖ≥Èó≠SqlSession
        sqlSession.close();
    }

    @Test
    public  void getUserById() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        User userInfo = mapper.getUserById(1);
        System.out.println(userInfo);
        sqlSession.close();
    }

    @Test
    public  void insertOne() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        int result = mapper.insertOne(new User(4, &quot;Â∞èÊòé&quot;, &quot;1212&quot;));
        System.out.println(result);
        sqlSession.commit();
        sqlSession.close();
    }

    @Test
    public  void updateOne() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        int result = mapper.updateOne(new User(4, &quot;Â∫üÁâ©&quot;, &quot;12121&quot;));
        System.out.println(result);
        sqlSession.commit();
        sqlSession.close();
    }

    @Test
    public  void deleteOne() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        int result = mapper.deleteById(4);
        System.out.println(result);
        sqlSession.commit();
        sqlSession.close();
    }
}
</code></pre>
<p><strong>Â∞èÁªìÔºö</strong></p>
<ul>
<li>ÊâÄÊúâÁöÑÂ¢ûÂà†ÊîπÊìç‰ΩúÈÉΩÈúÄË¶ÅÊèê‰∫§‰∫ãÂä°ÔºÅÔºàÈªòËÆ§ÊâãÂä®Êèê‰∫§Ôºâ</li>
<li>Êé•Âè£ÊâÄÊúâÁöÑÊôÆÈÄöÂèÇÊï∞ÔºåÂ∞ΩÈáèÈÉΩÂÜô‰∏ä@ParamÂèÇÊï∞ÔºåÂ∞§ÂÖ∂ÊòØÂ§ö‰∏™ÂèÇÊï∞Êó∂ÔºåÂøÖÈ°ªÂÜô‰∏äÔºÅ</li>
<li>ÊúâÊó∂ÂÄôÊ†πÊçÆ‰∏öÂä°ÁöÑÈúÄÊ±ÇÔºåÂèØ‰ª•ËÄÉËôë‰ΩøÁî®map‰º†ÈÄíÂèÇÊï∞ÔºÅ</li>
<li>‰∏∫‰∫ÜËßÑËåÉÊìç‰ΩúÔºåÂú®SQLÁöÑÈÖçÁΩÆÊñá‰ª∂‰∏≠ÔºåÊàë‰ª¨Â∞ΩÈáèÂ∞ÜParameterÂèÇÊï∞ÂíåresultTypeÈÉΩÂÜô‰∏äÔºÅ</li>
</ul>
<h2 id="35-like">3.5 LIKE</h2>
<p><strong>Ê®°Á≥äÊü•ËØ¢likeËØ≠Âè•ËØ•ÊÄé‰πàÂÜô?</strong><br>
Á¨¨1ÁßçÔºöÂú®Java‰ª£Á†Å‰∏≠Ê∑ªÂä†sqlÈÄöÈÖçÁ¨¶„ÄÇ</p>
<pre><code class="language-java">string wildcardname = &quot;%smi%&quot;;
List&lt;name&gt; names = mapper.selectlike(wildcardname);

&lt;select id=&quot;selectlike&quot;&gt;
select * from foo where bar like #{value}
&lt;/select&gt;
</code></pre>
<p>Á¨¨2ÁßçÔºöÂú®sqlËØ≠Âè•‰∏≠ÊãºÊé•ÈÄöÈÖçÁ¨¶Ôºå‰ºöÂºïËµ∑sqlÊ≥®ÂÖ•</p>
<pre><code class="language-java">string wildcardname = &quot;smi&quot;;
List&lt;name&gt; names = mapper.selectlike(wildcardname);

&lt;select id=&quot;selectlike&quot;&gt;
    select * from foo where bar like &quot;%&quot;${value}&quot;%&quot;
&lt;/select&gt;
</code></pre>
<p>Âú®mybatisÈÖçÁΩÆÊñá‰ª∂‰∏≠Ôºö</p>
<ol>
<li>${}:Ë°®Á§∫ÊãºÊé•sql‰∏≤ÔºåÂ∞ÜÊé•Êî∂Âà∞ÂèÇÊï∞ÁöÑÂÜÖÂÆπ‰∏çÂä†‰ªª‰Ωï‰øÆÈ•∞ÊãºÊé•Âú®sql‰∏≠ÔºåÂèØËÉΩÂºïÂèësqlÊ≥®ÂÖ•„ÄÇ</li>
<li>#{ }ÊòØÈ¢ÑÁºñËØëÂ§ÑÁêÜÔºåMyBatisÂú®Â§ÑÁêÜ#{ }Êó∂ÔºåÂÆÉ‰ºöÂ∞Üsql‰∏≠ÁöÑ#{ }ÊõøÊç¢‰∏∫ÔºüÔºåÁÑ∂ÂêéË∞ÉÁî®PreparedStatementÁöÑsetÊñπÊ≥ïÊù•ËµãÂÄºÔºå‰º†ÂÖ•Â≠óÁ¨¶‰∏≤ÂêéÔºå‰ºöÂú®ÂÄº‰∏§ËæπÂä†‰∏äÂçïÂºïÂè∑Ôºå‰ΩøÁî®Âç†‰ΩçÁ¨¶ÁöÑÊñπÂºèÊèêÈ´òÊïàÁéáÔºåÂèØ‰ª•Èò≤Ê≠¢sqlÊ≥®ÂÖ•„ÄÇ</li>
</ol>
<p>‰∏çÊé®Ëçê‰ΩøÁî®${}ÔºåËÉΩÁî®#{}Â∞±Áî®#{}Ôºå‰πüÂèØ‰ª•‰ΩøÁî®MySQLÂáΩÊï∞concatËøûÊé•Â≠óÁ¨¶‰∏≤„ÄÇ<br>
Âõ∫ÂÆöÁöÑÂÄºÂèØ‰ª•Áî®${}ÔºåÂõ†‰∏∫Êú¨Êù•Â∞±ÊòØÊãºÊé•Â≠óÁ¨¶‰∏≤Ôºå‰ΩÜÂä®ÊÄÅÁöÑ‰∏çËÉΩ</p>
<blockquote>
<p><a href="https://www.cnblogs.com/xiao-lin-unit/p/13644004.html">https://www.cnblogs.com/xiao-lin-unit/p/13644004.html</a><br>
<a href="https://blog.csdn.net/Mr_Qiao93/article/details/109168291">https://blog.csdn.net/Mr_Qiao93/article/details/109168291</a><br>
<a href="https://blog.csdn.net/weixin_42452395/article/details/113869915">https://blog.csdn.net/weixin_42452395/article/details/113869915</a></p>
</blockquote>
<h2 id="36-ÂÖ∂‰ªñ">3.6 ÂÖ∂‰ªñ</h2>
<p>sqlËØ≠Âè•ÈúÄË¶ÅÁöÑÂèÇÊï∞ÂæàÂ§öÊó∂ÔºåÂèØ‰ª•ËÄÉËôë‰ΩøÁî®mapËÄå‰∏çÊòØÁî®Á±ª„ÄÇ<br>
mapÂèØ‰ª•ÈöèÊÑèÂÆö‰πâkeyÁöÑÂêçÂ≠óÔºåÁÅµÊ¥ªÊÄßÈ´òÔºåËÄåÁ±ªÈúÄË¶ÅÂÆö‰πâÂ±ûÊÄßÔºåset„ÄÅgetÊñπÊ≥ïÁ≠âÔºå‰øÆÊîπÂêçÂ≠óÂæó‰øÆÊîπÂ±ûÊÄßÂêçÔºåÈ∫ªÁÉ¶</p>
<p>Â§ßËá¥Áî®Ê≥ïÔºö</p>
<pre><code class="language-java">/**
* ÊèíÂÖ•Ëøá‰∏™Áî®Êà∑‰ø°ÊÅØ
* @param map Áî®Êà∑‰ø°ÊÅØÈõÜÂêà
* @return SQLÊü•ËØ¢ÁªìÊûúÔºåÊàêÂäüÂΩ±ÂìçÂá†Êù°Êï∞ÊçÆ
*/
int insertMany(Map&lt;String, Object&gt; map);
</code></pre>
<pre><code class="language-xml">&lt;!--ÂØπË±°‰∏≠ÁöÑÂ±ûÊÄßÂèØ‰ª•Áõ¥Êé•ÂèñÂá∫Êù• ‰º†ÈÄímap‰∏≠ÁöÑkey--&gt;
&lt;insert id=&quot;insertMany&quot; parameterType=&quot;map&quot; &gt;
  insert into user (id, name, pwd) values (#{userId}, #{userName}, #{password});
&lt;/insert&gt;
</code></pre>
<pre><code class="language-java">@Test
public  void insertMany() {
    SqlSession sqlSession = MybatisUtils.getSqlSession();
    UserDao mapper = sqlSession.getMapper(UserDao.class);
    Map &lt;String, Object&gt; map = new HashMap&lt;&gt;();
    map.put(&quot;userId&quot;, 5);
    map.put(&quot;userName&quot;, &quot;Â∞èÁ∫¢&quot;);
    map.put(&quot;password&quot;, &quot;23333&quot;);
    int result = mapper.insertMany(map);
    System.out.println(result);
    sqlSession.commit();
    sqlSession.close();
}
</code></pre>
<h1 id="4-ÈÖçÁΩÆËß£Êûê">4. ÈÖçÁΩÆËß£Êûê</h1>
<h2 id="41-Ê†∏ÂøÉÈÖçÁΩÆÊñá‰ª∂">4.1 Ê†∏ÂøÉÈÖçÁΩÆÊñá‰ª∂</h2>
<ul>
<li>mybatis-config.xml Á≥ªÁªüÊ†∏ÂøÉÈÖçÁΩÆÊñá‰ª∂</li>
<li>MyBatis ÁöÑÈÖçÁΩÆÊñá‰ª∂ÂåÖÂê´‰∫Ü‰ºöÊ∑±Ê∑±ÂΩ±Âìç MyBatis Ë°å‰∏∫ÁöÑËÆæÁΩÆÂíåÂ±ûÊÄß‰ø°ÊÅØ„ÄÇ</li>
<li>ËÉΩÈÖçÁΩÆÁöÑÂÜÖÂÆπÂ¶Ç‰∏ãÔºö</li>
</ul>
<pre><code class="language-java">configurationÔºàÈÖçÁΩÆÔºâ
propertiesÔºàÂ±ûÊÄßÔºâ
settingsÔºàËÆæÁΩÆÔºâ
typeAliasesÔºàÁ±ªÂûãÂà´ÂêçÔºâ
typeHandlersÔºàÁ±ªÂûãÂ§ÑÁêÜÂô®Ôºâ
objectFactoryÔºàÂØπË±°Â∑•ÂéÇÔºâ
pluginsÔºàÊèí‰ª∂Ôºâ
environmentsÔºàÁéØÂ¢ÉÈÖçÁΩÆÔºâ
environmentÔºàÁéØÂ¢ÉÂèòÈáèÔºâ
transactionManagerÔºà‰∫ãÂä°ÁÆ°ÁêÜÂô®Ôºâ
dataSourceÔºàÊï∞ÊçÆÊ∫êÔºâ
databaseIdProviderÔºàÊï∞ÊçÆÂ∫ìÂéÇÂïÜÊ†áËØÜÔºâ
mappersÔºàÊò†Â∞ÑÂô®Ôºâ
&lt;!-- Ê≥®ÊÑèÂÖÉÁ¥†ËäÇÁÇπÁöÑÈ°∫Â∫èÔºÅÈ°∫Â∫è‰∏çÂØπ‰ºöÊä•Èîô --&gt;
</code></pre>
<p>ÂèØ‰ª•ÈòÖËØª mybatis-config.xml ‰∏äÈù¢ÁöÑdtdÁöÑÂ§¥Êñá‰ª∂</p>
<h2 id="42-environment">4.2 environment</h2>
<pre><code class="language-xml">&lt;environments default=&quot;development&quot;&gt;
  &lt;environment id=&quot;development&quot;&gt;
    &lt;transactionManager type=&quot;JDBC&quot;&gt;
      &lt;property name=&quot;...&quot; value=&quot;...&quot;/&gt;
    &lt;/transactionManager&gt;
    &lt;dataSource type=&quot;POOLED&quot;&gt;
      &lt;property name=&quot;driver&quot; value=&quot;${driver}&quot;/&gt;
      &lt;property name=&quot;url&quot; value=&quot;${url}&quot;/&gt;
      &lt;property name=&quot;username&quot; value=&quot;${username}&quot;/&gt;
      &lt;property name=&quot;password&quot; value=&quot;${password}&quot;/&gt;
    &lt;/dataSource&gt;
  &lt;/environment&gt;
&lt;/environments&gt;
</code></pre>
<ul>
<li>ÈÖçÁΩÆMyBatisÁöÑÂ§öÂ•óËøêË°åÁéØÂ¢ÉÔºåÂ∞ÜSQLÊò†Â∞ÑÂà∞Â§ö‰∏™‰∏çÂêåÁöÑÊï∞ÊçÆÂ∫ì‰∏äÔºåÂøÖÈ°ªÊåáÂÆöÂÖ∂‰∏≠‰∏Ä‰∏™‰∏∫ÈªòËÆ§ËøêË°åÁéØÂ¢ÉÔºàÈÄöËøádefaultÊåáÂÆöÔºâ</li>
<li>Â≠êÂÖÉÁ¥†ËäÇÁÇπÔºö<strong>environment</strong>
<ul>
<li>dataSource ÂÖÉÁ¥†‰ΩøÁî®Ê†áÂáÜÁöÑ JDBC Êï∞ÊçÆÊ∫êÊé•Âè£Êù•ÈÖçÁΩÆ JDBC ËøûÊé•ÂØπË±°ÁöÑËµÑÊ∫ê„ÄÇ</li>
<li>Êï∞ÊçÆÊ∫êÊòØÂøÖÈ°ªÈÖçÁΩÆÁöÑ„ÄÇ</li>
<li>Êúâ‰∏âÁßçÂÜÖÂª∫ÁöÑÊï∞ÊçÆÊ∫êÁ±ªÂûã type=&quot;[UNPOOLED|POOLED|JNDI]&quot;‚Äã</li>
<li><strong>UNPOOLED</strong>ÔºöËøôÁßçÊï∞ÊçÆÊ∫êÁöÑÂÆûÁé∞Âè™ÊòØÊØèÊ¨°Ë¢´ËØ∑Ê±ÇÊó∂ÊâìÂºÄÂíåÂÖ≥Èó≠ËøûÊé•„ÄÇ</li>
<li><strong>POOLED</strong>ÔºöËøôÁßçÊï∞ÊçÆÊ∫êÁöÑÂÆûÁé∞Âà©Áî®‚ÄúÊ±†‚ÄùÁöÑÊ¶ÇÂøµÂ∞Ü JDBC ËøûÊé•ÂØπË±°ÁªÑÁªáËµ∑Êù• , ËøôÊòØ‰∏ÄÁßç‰ΩøÂæóÂπ∂Âèë Web Â∫îÁî®Âø´ÈÄüÂìçÂ∫îËØ∑Ê±ÇÁöÑÊµÅË°åÂ§ÑÁêÜÊñπÂºè„ÄÇ</li>
<li><strong>JNDI</strong>ÔºöËøô‰∏™Êï∞ÊçÆÊ∫êÁöÑÂÆûÁé∞ÊòØ‰∏∫‰∫ÜËÉΩÂú®Â¶Ç Spring ÊàñÂ∫îÁî®ÊúçÂä°Âô®ËøôÁ±ªÂÆπÂô®‰∏≠‰ΩøÁî®ÔºåÂÆπÂô®ÂèØ‰ª•ÈõÜ‰∏≠ÊàñÂú®Â§ñÈÉ®ÈÖçÁΩÆÊï∞ÊçÆÊ∫êÔºåÁÑ∂ÂêéÊîæÁΩÆ‰∏Ä‰∏™ JNDI ‰∏ä‰∏ãÊñáÁöÑÂºïÁî®„ÄÇ</li>
<li>Êï∞ÊçÆÊ∫ê‰πüÊúâÂæàÂ§öÁ¨¨‰∏âÊñπÁöÑÂÆûÁé∞ÔºåÊØîÂ¶ÇdbcpÔºåc3p0ÔºådruidÁ≠âÁ≠â....</li>
<li>ËØ¶ÊÉÖÔºöÊü•ÁúãÂÆòÊñπÊñáÊ°£</li>
<li>Ëøô‰∏§Áßç‰∫ãÂä°ÁÆ°ÁêÜÂô®Á±ªÂûãÈÉΩ‰∏çÈúÄË¶ÅËÆæÁΩÆ‰ªª‰ΩïÂ±ûÊÄß„ÄÇ</li>
<li>ÂÖ∑‰ΩìÁöÑ‰∏ÄÂ•óÁéØÂ¢ÉÔºåÈÄöËøáËÆæÁΩÆidËøõË°åÂå∫Âà´Ôºåid‰øùËØÅÂîØ‰∏ÄÔºÅ</li>
<li>Â≠êÂÖÉÁ¥†ËäÇÁÇπÔºötransactionManager - [ ‰∫ãÂä°ÁÆ°ÁêÜÂô® ]</li>
</ul>
</li>
</ul>
<pre><code class="language-xml">&lt;!-- ËØ≠Ê≥ï --&gt;
&lt;transactionManager type=&quot;[ JDBC | MANAGED ]&quot;/&gt;
</code></pre>
<ul>
<li>Â≠êÂÖÉÁ¥†ËäÇÁÇπÔºö<strong>Êï∞ÊçÆÊ∫êÔºàdataSourceÔºâ</strong></li>
</ul>
<h2 id="43-properties">4.3 properties</h2>
<p>Êï∞ÊçÆÂ∫ìËøô‰∫õÂ±ûÊÄßÈÉΩÊòØÂèØÂ§ñÈÉ®ÈÖçÁΩÆ‰∏îÂèØÂä®ÊÄÅÊõøÊç¢ÁöÑÔºåÊó¢ÂèØ‰ª•Âú®ÂÖ∏ÂûãÁöÑ Java Â±ûÊÄßÊñá‰ª∂‰∏≠ÈÖçÁΩÆÔºå‰∫¶ÂèØÈÄöËøá properties ÂÖÉÁ¥†ÁöÑÂ≠êÂÖÉÁ¥†Êù•‰º†ÈÄí„ÄÇÂÖ∑‰ΩìÁúãÂÆòÊñπÊñáÊ°£</p>
<p>Êàë‰ª¨Êù•‰ºòÂåñÈÖçÁΩÆÊñá‰ª∂</p>
<p>Á¨¨‰∏ÄÊ≠• ; Âú®ËµÑÊ∫êÁõÆÂΩï‰∏ãÊñ∞Âª∫‰∏Ä‰∏™db.properties</p>
<pre><code class="language-properties">driver=com.mysql.cj.jdbc.Driver
url=jdbc:mysql://localhost:3306/mybatis?useSSL=true&amp;useUnicode=true&amp;characterEncoding=UTF-8
user=root
password=xxx
</code></pre>
<p>Á¨¨‰∫åÊ≠• : Â∞ÜÊñá‰ª∂ÂØºÂÖ•properties ÈÖçÁΩÆÊñá‰ª∂</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE configuration
        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;
&lt;!--configurationÊ†∏ÂøÉÈÖçÁΩÆÊñá‰ª∂--&gt;
&lt;configuration&gt;
    &lt;!--ÂºïÂÖ•Â§ñÈÉ®ÈÖçÁΩÆÊñá‰ª∂ÔºåÂèØ‰ª•ÂÜÖÂµåpropertiesÊ†áÁ≠æÈÖçÁΩÆ‰∏Ä‰∫õ‰ø°ÊÅØÔºå‰ΩÜÂ¶ÇÊûúÊúâÁõ∏ÂêåÁöÑÂ±ûÊÄßÔºåÈÇ£‰πà‰ºòÂÖà‰ΩøÁî®Â§ñÈÉ®ÁöÑ--&gt;
    &lt;!--&lt;properties resource=&quot;db.properties&quot;/&gt;--&gt;
    &lt;properties resource=&quot;db.properties&quot;&gt;
        &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;
        &lt;property name=&quot;password&quot; value=&quot;xxx&quot;/&gt;
    &lt;/properties&gt;
    &lt;environments default=&quot;development&quot;&gt;
        &lt;environment id=&quot;development&quot;&gt;
            &lt;transactionManager type=&quot;JDBC&quot;/&gt;
            &lt;dataSource type=&quot;POOLED&quot;&gt;
                &lt;property name=&quot;driver&quot; value=&quot;${driver}&quot;/&gt;
                &lt;property name=&quot;url&quot; value=&quot;${url}&quot;/&gt;
                &lt;property name=&quot;username&quot; value=&quot;${username}&quot;/&gt;
                &lt;property name=&quot;password&quot; value=&quot;${password}&quot;/&gt;
            &lt;/dataSource&gt;
        &lt;/environment&gt;
    &lt;/environments&gt;
    &lt;!--ÊØè‰∏Ä‰∏™Mapper.xmlÈÉΩÈúÄË¶ÅÂú®MybatisÊ†∏ÂøÉÈÖçÁΩÆÊñá‰ª∂‰∏≠Ê≥®ÂÜå--&gt;
    &lt;mappers&gt;
        &lt;mapper resource=&quot;com/SolitudeAlma/dao/UserMapper.xml&quot;/&gt;
    &lt;/mappers&gt;
&lt;/configuration&gt;
</code></pre>
<p>Ê≥®ÊÑèÔºö‰∏•Ê†ºÊåâÁÖßÊ†áÁ≠æÈ°∫Â∫èÊù•ÂÜô<br>
Êõ¥Â§öÊìç‰ΩúÔºåÂèØ‰ª•Êü•ÁúãÂÆòÊñπÊñáÊ°£</p>
<ul>
<li>ÈÖçÁΩÆÊñá‰ª∂‰ºòÂÖàÁ∫ßÈóÆÈ¢òÔºàÁõ∏ÂêåÂ±ûÊÄß‰ºòÂÖà‰ΩøÁî®Â§ñÈÉ®ÈÖçÁΩÆÔºâ</li>
<li>Êñ∞ÁâπÊÄßÔºö‰ΩøÁî®Âç†‰ΩçÁ¨¶</li>
</ul>
<h2 id="44-typealiases">4.4 typeAliases</h2>
<p>Á±ªÂûãÂà´ÂêçÊòØ‰∏∫ Java Á±ªÂûãËÆæÁΩÆ‰∏Ä‰∏™Áü≠ÁöÑÂêçÂ≠ó„ÄÇÂÆÉÂè™Âíå XML ÈÖçÁΩÆÊúâÂÖ≥ÔºåÂ≠òÂú®ÁöÑÊÑè‰πâ‰ªÖÂú®‰∫éÁî®Êù•ÂáèÂ∞ëÁ±ªÂÆåÂÖ®ÈôêÂÆöÂêçÁöÑÂÜó‰Ωô„ÄÇ</p>
<pre><code class="language-xml">&lt;!--‰∏∫ÂÆû‰ΩìÁ±ªÈÖçÁΩÆÂà´Âêç,Ê≥®ÊÑèÈ°∫Â∫è--&gt;
&lt;typeAliases&gt;
  &lt;typeAlias type=&quot;com.SolitudeAlma.pojo.User&quot; alias=&quot;User&quot;/&gt;
&lt;/typeAliases&gt;
</code></pre>
<p>ÂΩìËøôÊ†∑ÈÖçÁΩÆÊó∂ÔºåUserÂèØ‰ª•Áî®Âú®‰ªª‰Ωï‰ΩøÁî®com.SolitudeAlma.pojo.UserÁöÑÂú∞Êñπ„ÄÇ</p>
<p>‰πüÂèØ‰ª•ÊåáÂÆö‰∏Ä‰∏™ÂåÖÂêçÔºåMyBatis ‰ºöÂú®ÂåÖÂêç‰∏ãÈù¢ÊêúÁ¥¢ÈúÄË¶ÅÁöÑ Java BeanÔºåÊØîÂ¶Ç:</p>
<pre><code class="language-xml">&lt;typeAliases&gt;
  &lt;!--‰ΩøÁî®Ëøô‰∏™ÊñπÊ≥ïÊó∂mapper‰∏≠Â∞±Áî®Â∞èÂÜôÔºå‰ª•‰æøÂå∫ÂàÜ‰ΩøÁî®ÁöÑÂà´ÂêçÊñπÊ≥ï--&gt;
  &lt;package name=&quot;com.SolitudeAlma.pojo&quot;/&gt;
&lt;/typeAliases&gt;
</code></pre>
<p>ÊØè‰∏Ä‰∏™Âú®com.SolitudeAlma.pojoÂåÖ‰∏≠ÁöÑ Java BeanÔºåÂú®Ê≤°ÊúâÊ≥®Ëß£ÁöÑÊÉÖÂÜµ‰∏ãÔºå‰ºö‰ΩøÁî® Bean ÁöÑÈ¶ñÂ≠óÊØçÂ∞èÂÜôÁöÑÈùûÈôêÂÆöÁ±ªÂêçÊù•‰Ωú‰∏∫ÂÆÉÁöÑÂà´Âêç„ÄÇ<br>
Â§ßÂ∞èÂÜôÈÉΩÂèØ‰ª•ËØÜÂà´Ôºå‰ΩÜÊòØÁî®Â∞èÂÜôÁöÑËØùÂ∞±Áü•ÈÅì‰Ω†ÊòØÁî®‰∫ÜÊâ´ÊèèÂåÖËøô‰∏™ÊñπÊ≥ï<br>
Ëã•ÊúâÊ≥®Ëß£ÔºåÂàôÂà´Âêç‰∏∫ÂÖ∂Ê≥®Ëß£ÂÄº„ÄÇËßÅ‰∏ãÈù¢ÁöÑ‰æãÂ≠êÔºö</p>
<pre><code class="language-java">@Alias(&quot;user&quot;)
public class User {
  ...
}
</code></pre>
<p>ÂÆû‰ΩìÁ±ªÊØîËæÉÂ∞ëÁöÑÊó∂ÂÄôÁî®Á¨¨‰∏ÄÈíüÊñπÊ≥ïÔºåÊØîËæÉÂ§öÁöÑÊó∂ÂÄôÁõ¥Êé•Êâ´ÊèèÂåÖ<br>
Á¨¨‰∏ÄÁßçÊñπÊ≥ïÂèØ‰ª•Ëá™ÂÆö‰πâÂà´ÂêçÔºåÁ¨¨‰∫åÁßç‰∏çË°åÔºå‰ΩÜÂèØ‰ª•Áî®Ê≥®Ëß£ÂÆûÁé∞Ëá™ÂÆö‰πâ‚Äã</p>
<p>ÂéªÂÆòÁΩëÊü•Áúã‰∏Ä‰∏ãMybatisÈªòËÆ§ÁöÑ‰∏Ä‰∫õÁ±ªÂûãÂà´ÂêçÔºàÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÂíåÂºïÁî®Á±ªÂûãÁ≠âÁ≠âÔºâ</p>
<h2 id="45-setting">4.5 setting</h2>
<ul>
<li>ËÆæÁΩÆÔºàsettingsÔºâÁõ∏ÂÖ≥ =&gt; Êü•ÁúãÂ∏ÆÂä©ÊñáÊ°£ÔºàÈúÄË¶ÅËÆ∞‰Ωè‰∏ãÈù¢‰∏â‰∏™Ôºâ
<ul>
<li>ÊáíÂä†ËΩΩ</li>
<li>Êó•ÂøóÂÆûÁé∞</li>
<li>ÁºìÂ≠òÂºÄÂêØÂÖ≥Èó≠</li>
</ul>
</li>
<li>‰∏Ä‰∏™ÈÖçÁΩÆÂÆåÊï¥ÁöÑ settings ÂÖÉÁ¥†ÁöÑÁ§∫‰æãÂ¶Ç‰∏ãÔºö</li>
</ul>
<pre><code class="language-xml">&lt;settings&gt;
  &lt;setting name=&quot;cacheEnabled&quot; value=&quot;true&quot;/&gt;
  &lt;setting name=&quot;lazyLoadingEnabled&quot; value=&quot;true&quot;/&gt;
  &lt;setting name=&quot;multipleResultSetsEnabled&quot; value=&quot;true&quot;/&gt;
  &lt;setting name=&quot;useColumnLabel&quot; value=&quot;true&quot;/&gt;
  &lt;setting name=&quot;useGeneratedKeys&quot; value=&quot;false&quot;/&gt;
  &lt;setting name=&quot;autoMappingBehavior&quot; value=&quot;PARTIAL&quot;/&gt;
  &lt;setting name=&quot;autoMappingUnknownColumnBehavior&quot; value=&quot;WARNING&quot;/&gt;
  &lt;setting name=&quot;defaultExecutorType&quot; value=&quot;SIMPLE&quot;/&gt;
  &lt;setting name=&quot;defaultStatementTimeout&quot; value=&quot;25&quot;/&gt;
  &lt;setting name=&quot;defaultFetchSize&quot; value=&quot;100&quot;/&gt;
  &lt;setting name=&quot;safeRowBoundsEnabled&quot; value=&quot;false&quot;/&gt;
  &lt;setting name=&quot;mapUnderscoreToCamelCase&quot; value=&quot;false&quot;/&gt;
  &lt;setting name=&quot;localCacheScope&quot; value=&quot;SESSION&quot;/&gt;
  &lt;setting name=&quot;jdbcTypeForNull&quot; value=&quot;OTHER&quot;/&gt;
  &lt;setting name=&quot;lazyLoadTriggerMethods&quot; value=&quot;equals,clone,hashCode,toString&quot;/&gt;
&lt;/settings&gt;
</code></pre>
<h2 id="46-mappers">4.6 mappers</h2>
<p><strong>mappers</strong></p>
<ul>
<li>Êò†Â∞ÑÂô® : ÂÆö‰πâÊò†Â∞ÑSQLËØ≠Âè•Êñá‰ª∂</li>
<li>Êó¢ÁÑ∂ MyBatis ÁöÑË°å‰∏∫ÂÖ∂‰ªñÂÖÉÁ¥†Â∑≤ÁªèÈÖçÁΩÆÂÆå‰∫ÜÔºåÊàë‰ª¨Áé∞Âú®Â∞±Ë¶ÅÂÆö‰πâ SQL Êò†Â∞ÑËØ≠Âè•‰∫Ü„ÄÇ‰ΩÜÊòØÈ¶ñÂÖàÊàë‰ª¨ÈúÄË¶ÅÂëäËØâ MyBatis Âà∞Âì™ÈáåÂéªÊâæÂà∞Ëøô‰∫õËØ≠Âè•„ÄÇJava Âú®Ëá™Âä®Êü•ÊâæËøôÊñπÈù¢Ê≤°ÊúâÊèê‰æõ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑÊñπÊ≥ïÔºåÊâÄ‰ª•ÊúÄ‰Ω≥ÁöÑÊñπÂºèÊòØÂëäËØâ MyBatis Âà∞Âì™ÈáåÂéªÊâæÊò†Â∞ÑÊñá‰ª∂„ÄÇ‰Ω†ÂèØ‰ª•‰ΩøÁî®Áõ∏ÂØπ‰∫éÁ±ªË∑ØÂæÑÁöÑËµÑÊ∫êÂºïÁî®Ôºå ÊàñÂÆåÂÖ®ÈôêÂÆöËµÑÊ∫êÂÆö‰ΩçÁ¨¶ÔºàÂåÖÊã¨ file:/// ÁöÑ URLÔºâÔºåÊàñÁ±ªÂêçÂíåÂåÖÂêçÁ≠â„ÄÇÊò†Â∞ÑÂô®ÊòØMyBatis‰∏≠ÊúÄÊ†∏ÂøÉÁöÑÁªÑ‰ª∂‰πã‰∏ÄÔºåÂú®MyBatis 3‰πãÂâçÔºåÂè™ÊîØÊåÅxmlÊò†Â∞ÑÂô®ÔºåÂç≥ÔºöÊâÄÊúâÁöÑSQLËØ≠Âè•ÈÉΩÂøÖÈ°ªÂú®xmlÊñá‰ª∂‰∏≠ÈÖçÁΩÆ„ÄÇËÄå‰ªéMyBatis 3ÂºÄÂßãÔºåËøòÊîØÊåÅÊé•Âè£Êò†Â∞ÑÂô®ÔºåËøôÁßçÊò†Â∞ÑÂô®ÊñπÂºèÂÖÅËÆ∏‰ª•Java‰ª£Á†ÅÁöÑÊñπÂºèÊ≥®Ëß£ÂÆö‰πâSQLËØ≠Âè•ÔºåÈùûÂ∏∏ÁÆÄÊ¥Å„ÄÇ</li>
</ul>
<p><strong>ÂºïÂÖ•ËµÑÊ∫êÊñπÂºè</strong></p>
<pre><code class="language-xml">&lt;!-- ‰ΩøÁî®Áõ∏ÂØπ‰∫éÁ±ªË∑ØÂæÑÁöÑËµÑÊ∫êÂºïÁî® --&gt;
&lt;mappers&gt;
 &lt;mapper resource=&quot;com/SolitudeAlma/dao/UserMapper.xml&quot;/&gt;
&lt;/mappers&gt;
</code></pre>
<pre><code class="language-xml">&lt;!-- ‰ΩøÁî®ÂÆåÂÖ®ÈôêÂÆöËµÑÊ∫êÂÆö‰ΩçÁ¨¶ÔºàURLÔºâÁõ¥Êé•passÔºÅÔºÅÔºÅÔºÅ --&gt;
&lt;mappers&gt;
 &lt;mapper url=&quot;file:///var/mappers/AuthorMapper.xml&quot;/&gt;
&lt;/mappers&gt;
</code></pre>
<pre><code class="language-xml">&lt;!--
‰ΩøÁî®Êò†Â∞ÑÂô®Êé•Âè£ÂÆûÁé∞Á±ªÁöÑÂÆåÂÖ®ÈôêÂÆöÁ±ªÂêç
ÈúÄË¶ÅÈÖçÁΩÆÊñá‰ª∂ÂêçÁß∞ÂíåÊé•Âè£ÂêçÁß∞‰∏ÄËá¥ÔºåÂπ∂‰∏î‰Ωç‰∫éÂêå‰∏ÄÁõÆÂΩï(ÂåÖ)‰∏ã
--&gt;
&lt;mappers&gt;
 &lt;mapper class=&quot;com.SolitudeAlma.dao.UserDao&quot;/&gt;
&lt;/mappers&gt;
</code></pre>
<pre><code class="language-xml">&lt;!--
Â∞ÜÂåÖÂÜÖÁöÑÊò†Â∞ÑÂô®Êé•Âè£ÂÆûÁé∞ÂÖ®ÈÉ®Ê≥®ÂÜå‰∏∫Êò†Â∞ÑÂô®
‰ΩÜÊòØÈúÄË¶ÅÈÖçÁΩÆÊñá‰ª∂ÂêçÁß∞ÂíåÊé•Âè£ÂêçÁß∞‰∏ÄËá¥ÔºåÂπ∂‰∏î‰Ωç‰∫éÂêå‰∏ÄÁõÆÂΩï‰∏ã
--&gt;
&lt;mappers&gt;
 &lt;package name=&quot;com.SolitudeAlma.dao&quot;/&gt;
&lt;/mappers&gt;
</code></pre>
<p><strong>MapperÈÖçÁΩÆÊñá‰ª∂</strong></p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
       PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
       &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;mapper namespace=&quot;com.kuang.mapper.UserMapper&quot;&gt;
   
&lt;/mapper&gt;
</code></pre>
<ul>
<li>namespace‰∏≠ÊñáÊÑèÊÄùÔºöÂëΩÂêçÁ©∫Èó¥Ôºå‰ΩúÁî®Â¶Ç‰∏ãÔºö
<ul>
<li>namespaceÁöÑÂëΩÂêçÂøÖÈ°ªË∑üÊüê‰∏™Êé•Âè£ÂêåÂêç</li>
<li>Êé•Âè£‰∏≠ÁöÑÊñπÊ≥ï‰∏éÊò†Â∞ÑÊñá‰ª∂‰∏≠sqlËØ≠Âè•idÂ∫îËØ•‰∏Ä‰∏ÄÂØπÂ∫î</li>
</ul>
<ol>
<li>namespaceÂíåÂ≠êÂÖÉÁ¥†ÁöÑidËÅîÂêà‰øùËØÅÂîØ‰∏Ä  , Âå∫Âà´‰∏çÂêåÁöÑmapper</li>
<li>ÁªëÂÆöDAOÊé•Âè£</li>
<li>namespaceÂëΩÂêçËßÑÂàô : ÂåÖÂêç+Á±ªÂêç</li>
</ol>
</li>
</ul>
<p>MyBatis ÁöÑÁúüÊ≠£Âº∫Â§ßÂú®‰∫éÂÆÉÁöÑÊò†Â∞ÑËØ≠Âè•ÔºåËøôÊòØÂÆÉÁöÑÈ≠îÂäõÊâÄÂú®„ÄÇÁî±‰∫éÂÆÉÁöÑÂºÇÂ∏∏Âº∫Â§ßÔºåÊò†Â∞ÑÂô®ÁöÑ XML Êñá‰ª∂Â∞±ÊòæÂæóÁõ∏ÂØπÁÆÄÂçï„ÄÇÂ¶ÇÊûúÊãøÂÆÉË∑üÂÖ∑ÊúâÁõ∏ÂêåÂäüËÉΩÁöÑ JDBC ‰ª£Á†ÅËøõË°åÂØπÊØîÔºå‰Ω†‰ºöÁ´ãÂç≥ÂèëÁé∞ÁúÅÊéâ‰∫ÜÂ∞ÜËøë 95% ÁöÑ‰ª£Á†Å„ÄÇMyBatis ‰∏∫ËÅöÁÑ¶‰∫é SQL ËÄåÊûÑÂª∫Ôºå‰ª•Â∞ΩÂèØËÉΩÂú∞‰∏∫‰Ω†ÂáèÂ∞ëÈ∫ªÁÉ¶„ÄÇ</p>
<h2 id="47-ÂÖ∂‰ªñÈÖçÁΩÆ">4.7 ÂÖ∂‰ªñÈÖçÁΩÆ</h2>
<p><strong>typeHandlersÁ±ªÂûãÂ§ÑÁêÜÂô®</strong></p>
<ul>
<li>Êó†ËÆ∫ÊòØ MyBatis Âú®È¢ÑÂ§ÑÁêÜËØ≠Âè•ÔºàPreparedStatementÔºâ‰∏≠ËÆæÁΩÆ‰∏Ä‰∏™ÂèÇÊï∞Êó∂ÔºåËøòÊòØ‰ªéÁªìÊûúÈõÜ‰∏≠ÂèñÂá∫‰∏Ä‰∏™ÂÄºÊó∂Ôºå ÈÉΩ‰ºöÁî®Á±ªÂûãÂ§ÑÁêÜÂô®Â∞ÜËé∑ÂèñÁöÑÂÄº‰ª•ÂêàÈÄÇÁöÑÊñπÂºèËΩ¨Êç¢Êàê Java Á±ªÂûã„ÄÇ</li>
<li>‰Ω†ÂèØ‰ª•ÈáçÂÜôÁ±ªÂûãÂ§ÑÁêÜÂô®ÊàñÂàõÂª∫‰Ω†Ëá™Â∑±ÁöÑÁ±ªÂûãÂ§ÑÁêÜÂô®Êù•Â§ÑÁêÜ‰∏çÊîØÊåÅÁöÑÊàñÈùûÊ†áÂáÜÁöÑÁ±ªÂûã„ÄÇ„Äê‰∫ÜËß£Âç≥ÂèØ„Äë</li>
</ul>
<p><strong>objectFactoryÂØπË±°Â∑•ÂéÇ</strong></p>
<ul>
<li>MyBatis ÊØèÊ¨°ÂàõÂª∫ÁªìÊûúÂØπË±°ÁöÑÊñ∞ÂÆû‰æãÊó∂ÔºåÂÆÉÈÉΩ‰ºö‰ΩøÁî®‰∏Ä‰∏™ÂØπË±°Â∑•ÂéÇÔºàObjectFactoryÔºâÂÆû‰æãÊù•ÂÆåÊàê„ÄÇ</li>
<li>ÈªòËÆ§ÁöÑÂØπË±°Â∑•ÂéÇÈúÄË¶ÅÂÅöÁöÑ‰ªÖ‰ªÖÊòØÂÆû‰æãÂåñÁõÆÊ†áÁ±ªÔºåË¶Å‰πàÈÄöËøáÈªòËÆ§ÊûÑÈÄ†ÊñπÊ≥ïÔºåË¶Å‰πàÂú®ÂèÇÊï∞Êò†Â∞ÑÂ≠òÂú®ÁöÑÊó∂ÂÄôÈÄöËøáÊúâÂèÇÊûÑÈÄ†ÊñπÊ≥ïÊù•ÂÆû‰æãÂåñ„ÄÇ</li>
<li>Â¶ÇÊûúÊÉ≥Ë¶ÜÁõñÂØπË±°Â∑•ÂéÇÁöÑÈªòËÆ§Ë°å‰∏∫ÔºåÂàôÂèØ‰ª•ÈÄöËøáÂàõÂª∫Ëá™Â∑±ÁöÑÂØπË±°Â∑•ÂéÇÊù•ÂÆûÁé∞„ÄÇ„Äê‰∫ÜËß£Âç≥ÂèØ„Äë</li>
</ul>
<p><strong>pluginsÊèí‰ª∂</strong></p>
<ul>
<li>mybatis-generator-core</li>
<li>mybatis-plus</li>
<li>ÈÄöÁî®mapper</li>
</ul>
<h2 id="48-ÁîüÂëΩÂë®ÊúüÂíå‰ΩúÁî®Âüü">4.8 ÁîüÂëΩÂë®ÊúüÂíå‰ΩúÁî®Âüü</h2>
<p><strong>‰ΩúÁî®ÂüüÔºàScopeÔºâÂíåÁîüÂëΩÂë®Êúü</strong><br>
ÁêÜËß£Êàë‰ª¨ÁõÆÂâçÂ∑≤ÁªèËÆ®ËÆ∫ËøáÁöÑ‰∏çÂêå‰ΩúÁî®ÂüüÂíåÁîüÂëΩÂë®ÊúüÁ±ªÊòØËá≥ÂÖ≥ÈáçË¶ÅÁöÑÔºåÂõ†‰∏∫ÈîôËØØÁöÑ‰ΩøÁî®‰ºöÂØºËá¥ÈùûÂ∏∏‰∏•ÈáçÁöÑÂπ∂ÂèëÈóÆÈ¢ò„ÄÇ<br>
Êàë‰ª¨ÂèØ‰ª•ÂÖàÁîª‰∏Ä‰∏™ÊµÅÁ®ãÂõæÔºåÂàÜÊûê‰∏Ä‰∏ãMybatisÁöÑÊâßË°åËøáÁ®ãÔºÅ<br>
<img src="https://cdn.nlark.com/yuque/0/2021/png/22045814/1629032135660-fba597e4-c9bd-4d57-b06b-cd2d8027dde2.png#clientId=u84d9e174-9337-4&amp;from=paste&amp;height=513&amp;id=ub1daef10&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=649&amp;originWidth=1004&amp;originalType=binary&amp;ratio=1&amp;size=58406&amp;status=done&amp;style=none&amp;taskId=ud56bcb6f-8b9f-4af3-b531-0d5fb70b10d&amp;width=794" alt="image.png" loading="lazy"></p>
<p><strong>‰ΩúÁî®ÂüüÁêÜËß£</strong></p>
<ul>
<li>SqlSessionFactoryBuilder ÁöÑ‰ΩúÁî®Âú®‰∫éÂàõÂª∫ SqlSessionFactoryÔºåÂàõÂª∫ÊàêÂäüÂêéÔºåSqlSessionFactoryBuilder Â∞±Â§±Âéª‰∫Ü‰ΩúÁî®ÔºåÊâÄ‰ª•ÂÆÉÂè™ËÉΩÂ≠òÂú®‰∫éÂàõÂª∫ SqlSessionFactory ÁöÑÊñπÊ≥ï‰∏≠ÔºåËÄå‰∏çË¶ÅËÆ©ÂÖ∂ÈïøÊúüÂ≠òÂú®„ÄÇÂõ†Ê≠§ <strong>SqlSessionFactoryBuilder ÂÆû‰æãÁöÑÊúÄ‰Ω≥‰ΩúÁî®ÂüüÊòØÊñπÊ≥ï‰ΩúÁî®Âüü</strong>Ôºà‰πüÂ∞±ÊòØÂ±ÄÈÉ®ÊñπÊ≥ïÂèòÈáèÔºâ„ÄÇ</li>
<li>SqlSessionFactory ÂèØ‰ª•Ë¢´ËÆ§‰∏∫ÊòØ‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìËøûÊé•Ê±†ÔºåÂÆÉÁöÑ‰ΩúÁî®ÊòØÂàõÂª∫ SqlSession Êé•Âè£ÂØπË±°„ÄÇÂõ†‰∏∫ MyBatis ÁöÑÊú¨Ë¥®Â∞±ÊòØ Java ÂØπÊï∞ÊçÆÂ∫ìÁöÑÊìç‰ΩúÔºåÊâÄ‰ª• SqlSessionFactory ÁöÑÁîüÂëΩÂë®ÊúüÂ≠òÂú®‰∫éÊï¥‰∏™ MyBatis ÁöÑÂ∫îÁî®‰πã‰∏≠ÔºåÊâÄ‰ª•‰∏ÄÊó¶ÂàõÂª∫‰∫Ü SqlSessionFactoryÔºåÂ∞±Ë¶ÅÈïøÊúü‰øùÂ≠òÂÆÉÔºåÁõ¥Ëá≥‰∏çÂÜç‰ΩøÁî® MyBatis Â∫îÁî®ÔºåÊâÄ‰ª•ÂèØ‰ª•ËÆ§‰∏∫ SqlSessionFactory ÁöÑÁîüÂëΩÂë®ÊúüÂ∞±Á≠âÂêå‰∫é MyBatis ÁöÑÂ∫îÁî®Âë®Êúü„ÄÇ</li>
<li>Áî±‰∫é SqlSessionFactory ÊòØ‰∏Ä‰∏™ÂØπÊï∞ÊçÆÂ∫ìÁöÑËøûÊé•Ê±†ÔºåÊâÄ‰ª•ÂÆÉÂç†ÊçÆÁùÄÊï∞ÊçÆÂ∫ìÁöÑËøûÊé•ËµÑÊ∫ê„ÄÇÂ¶ÇÊûúÂàõÂª∫Â§ö‰∏™ SqlSessionFactoryÔºåÈÇ£‰πàÂ∞±Â≠òÂú®Â§ö‰∏™Êï∞ÊçÆÂ∫ìËøûÊé•Ê±†ÔºåËøôÊ†∑‰∏çÂà©‰∫éÂØπÊï∞ÊçÆÂ∫ìËµÑÊ∫êÁöÑÊéßÂà∂Ôºå‰πü‰ºöÂØºËá¥Êï∞ÊçÆÂ∫ìËøûÊé•ËµÑÊ∫êË¢´Ê∂àËÄóÂÖâÔºåÂá∫Áé∞Á≥ªÁªüÂÆïÊú∫Á≠âÊÉÖÂÜµÔºåÊâÄ‰ª•Â∞ΩÈáèÈÅøÂÖçÂèëÁîüËøôÊ†∑ÁöÑÊÉÖÂÜµ„ÄÇ</li>
<li>Âõ†Ê≠§Âú®‰∏ÄËà¨ÁöÑÂ∫îÁî®‰∏≠Êàë‰ª¨ÂæÄÂæÄÂ∏åÊúõ SqlSessionFactory ‰Ωú‰∏∫‰∏Ä‰∏™Âçï‰æãÔºåËÆ©ÂÆÉÂú®Â∫îÁî®‰∏≠Ë¢´ÂÖ±‰∫´„ÄÇÊâÄ‰ª•ËØ¥ <strong>SqlSessionFactory ÁöÑÊúÄ‰Ω≥‰ΩúÁî®ÂüüÊòØÂ∫îÁî®‰ΩúÁî®Âüü„ÄÇ</strong></li>
<li>Â¶ÇÊûúËØ¥ SqlSessionFactory Áõ∏ÂΩì‰∫éÊï∞ÊçÆÂ∫ìËøûÊé•Ê±†ÔºåÈÇ£‰πà SqlSession Â∞±Áõ∏ÂΩì‰∫é‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìËøûÊé•ÔºàConnection ÂØπË±°ÔºâÔºå‰Ω†ÂèØ‰ª•Âú®‰∏Ä‰∏™‰∫ãÂä°ÈáåÈù¢ÊâßË°åÂ§öÊù° SQLÔºåÁÑ∂ÂêéÈÄöËøáÂÆÉÁöÑ commit„ÄÅrollback Á≠âÊñπÊ≥ïÔºåÊèê‰∫§ÊàñËÄÖÂõûÊªö‰∫ãÂä°„ÄÇÊâÄ‰ª•ÂÆÉÂ∫îËØ•Â≠òÊ¥ªÂú®‰∏Ä‰∏™‰∏öÂä°ËØ∑Ê±Ç‰∏≠ÔºåÂ§ÑÁêÜÂÆåÊï¥‰∏™ËØ∑Ê±ÇÂêéÔºåÂ∫îËØ•ÂÖ≥Èó≠ËøôÊù°ËøûÊé•ÔºåËÆ©ÂÆÉÂΩíËøòÁªô SqlSessionFactoryÔºåÂê¶ÂàôÊï∞ÊçÆÂ∫ìËµÑÊ∫êÂ∞±ÂæàÂø´Ë¢´ËÄóË¥πÁ≤æÂÖâÔºåÁ≥ªÁªüÂ∞±‰ºöÁò´Áó™ÔºåÊâÄ‰ª•Áî® try...catch...finally... ËØ≠Âè•Êù•‰øùËØÅÂÖ∂Ê≠£Á°ÆÂÖ≥Èó≠„ÄÇ</li>
<li><strong>ÊâÄ‰ª• SqlSession ÁöÑÊúÄ‰Ω≥ÁöÑ‰ΩúÁî®ÂüüÊòØËØ∑Ê±ÇÊàñÊñπÊ≥ï‰ΩúÁî®Âüü„ÄÇ</strong></li>
</ul>
<figure data-type="image" tabindex="2"><img src="https://cdn.nlark.com/yuque/0/2021/png/22045814/1629032623297-835f7dcf-0443-453a-9766-6488795612ab.png#clientId=u84d9e174-9337-4&amp;from=paste&amp;height=512&amp;id=u1eeb14da&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=722&amp;originWidth=973&amp;originalType=binary&amp;ratio=1&amp;size=211987&amp;status=done&amp;style=none&amp;taskId=ub86097f7-0f53-49a9-9439-c656d144eee&amp;width=690.5" alt="image.png" loading="lazy"></figure>
<h1 id="5-resultmap">5. ResultMap</h1>
<h2 id="51-Êü•ËØ¢‰∏∫null">5.1 Êü•ËØ¢‰∏∫null</h2>
<p><strong>Ë¶ÅËß£ÂÜ≥ÁöÑÈóÆÈ¢òÔºöÂ±ûÊÄßÂêçÂíåÂ≠óÊÆµÂêç‰∏ç‰∏ÄËá¥</strong><br>
ÁéØÂ¢ÉÔºöÊñ∞Âª∫‰∏Ä‰∏™È°πÁõÆÔºåÂ∞Ü‰πãÂâçÁöÑÈ°πÁõÆÊã∑Ë¥ùËøáÊù•<br>
1„ÄÅÊü•Áúã‰πãÂâçÁöÑÊï∞ÊçÆÂ∫ìÁöÑÂ≠óÊÆµÂêç<br>
<a href="https://cdn.nlark.com/yuque/0/2021/png/22045814/1629033277051-1fd3c7d6-c5bc-4124-99d9-51f54fafa848.png#clientId=u84d9e174-9337-4&amp;from=paste&amp;height=115&amp;id=u44171385&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=230&amp;originWidth=1080&amp;originalType=binary&amp;ratio=1&amp;size=17772&amp;status=done&amp;style=none&amp;taskId=ua4d6bca7-8114-4c0b-b4a4-033da22f03a&amp;width=540">image.png</a></p>
<p>2„ÄÅJava‰∏≠ÁöÑÂÆû‰ΩìÁ±ªËÆæËÆ°</p>
<pre><code class="language-java">package com.SolitudeAlma.pojo;

import org.apache.ibatis.type.Alias;

/**
 * @author SolitudeAlma
 * @date 2021/8/15
 * @description ÂÆû‰ΩìÁ±ª
 */
@Alias(&quot;user&quot;)
public class User {
    private int id;
    private String name;
    private String password;

    public User() {
    }

    public User(int id, String name, String password) {
        this.id = id;
        this.name = name;
        this.password = password;
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    @Override
    public String toString() {
        return &quot;User{&quot; +
                &quot;id=&quot; + id +
                &quot;, name='&quot; + name + '\'' +
                &quot;, password='&quot; + password + '\'' +
                '}';
    }
}
</code></pre>
<p>3„ÄÅÊé•Âè£</p>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.User;

import java.util.List;

/**
 * @author SolitudeAlma
 * @date 2021/8/15
 */
public interface UserDao {

    /**
     * Ê†πÊçÆidÊü•ËØ¢Áî®Êà∑‰ø°ÊÅØ
     * @param id Áî®Êà∑ÂîØ‰∏ÄÊ†áËØÜ
     * @return User Âçï‰∏™Áî®Êà∑ÁöÑ‰ø°ÊÅØ
     */
    User getUserById(int id);
}
</code></pre>
<p>4„ÄÅmapperÊò†Â∞ÑÊñá‰ª∂</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;!--namespaceÁªëÂÆö‰∏Ä‰∏™ÂØπÂ∫îÁöÑDao/MapperÊé•Âè£Ôºà‰ª•ÂêéÊîπ‰∏∫MapperÔºâ--&gt;
&lt;mapper namespace=&quot;com.SolitudeAlma.dao.UserDao&quot;&gt;
    &lt;select id=&quot;getUserById&quot; resultType=&quot;user&quot; parameterType=&quot;int&quot;&gt;
        select * from user where id = #{id};
    &lt;/select&gt;

&lt;/mapper&gt;
</code></pre>
<p>5„ÄÅÊµãËØï</p>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.User;
import com.SolitudeAlma.utils.MybatisUtils;
import org.apache.ibatis.session.SqlSession;
import org.junit.Test;

import java.util.List;

/**
 * junitÊµãËØïÁ±ª
 * @author SolitudeAlma
 * @date 2021/8/15
 */
public class UserDaoTest {

    @Test
    public void getUserById() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        User userInfo = mapper.getUserById(1);
        System.out.println(userInfo);
        sqlSession.close();
    }
}
</code></pre>
<p><strong>ÁªìÊûú:</strong></p>
<ul>
<li>User{id=1, name='SolitudeAlma', password='null'}</li>
<li>Êü•ËØ¢Âá∫Êù•ÂèëÁé∞ password ‰∏∫Á©∫ . ËØ¥ÊòéÂá∫Áé∞‰∫ÜÈóÆÈ¢òÔºÅ</li>
</ul>
<p><strong>ÂàÜÊûêÔºö</strong></p>
<ul>
<li>select * from user where id = #{id} ÂèØ‰ª•ÁúãÂÅöselect  id,name,pwd  from user where id = #{id}</li>
<li>mybatis‰ºöÊ†πÊçÆËøô‰∫õÊü•ËØ¢ÁöÑÂàóÂêç(‰ºöÂ∞ÜÂàóÂêçËΩ¨Âåñ‰∏∫Â∞èÂÜô,Êï∞ÊçÆÂ∫ì‰∏çÂå∫ÂàÜÂ§ßÂ∞èÂÜô) , ÂéªÂØπÂ∫îÁöÑÂÆû‰ΩìÁ±ª‰∏≠Êü•ÊâæÁõ∏Â∫îÂàóÂêçÁöÑsetÊñπÊ≥ïËÆæÂÄº , Áî±‰∫éÊâæ‰∏çÂà∞setPwd() , ÊâÄ‰ª•passwordËøîÂõûnull ; „ÄêËá™Âä®Êò†Â∞Ñ„Äë</li>
</ul>
<h3 id="511-Ëß£ÂÜ≥ÊñπÊ°à">5.1.1 Ëß£ÂÜ≥ÊñπÊ°à</h3>
<p>ÊñπÊ°à‰∏ÄÔºö‰∏∫ÂàóÂêçÊåáÂÆöÂà´Âêç , Âà´ÂêçÂíåjavaÂÆû‰ΩìÁ±ªÁöÑÂ±ûÊÄßÂêç‰∏ÄËá¥„ÄÇ</p>
<pre><code class="language-xml">&lt;select id=&quot;selectUserById&quot; resultType=&quot;User&quot;&gt;
  select id , name , pwd as password from user where id = #{id}
&lt;/select&gt;
</code></pre>
<p>ÊñπÊ°à‰∫åÔºö‰ΩøÁî®ÁªìÊûúÈõÜÊò†Â∞Ñ-&gt;ResultMap „ÄêÊé®Ëçê„Äë</p>
<pre><code class="language-xml">&lt;!--ÂÖ∂ÂÆûÂè™ÈúÄË¶ÅÂä†‰∏äË¶ÅÊò†Â∞ÑÁöÑÂ≠óÊÆµÂ∞±Ë°å‰∫Ü--&gt;
&lt;resultMap id=&quot;UserMap&quot; type=&quot;User&quot;&gt;
   &lt;!-- id‰∏∫‰∏ªÈîÆ --&gt;
   &lt;id column=&quot;id&quot; property=&quot;id&quot;/&gt;
   &lt;!-- columnÊòØÊï∞ÊçÆÂ∫ìË°®ÁöÑÂàóÂêç , propertyÊòØÂØπÂ∫îÂÆû‰ΩìÁ±ªÁöÑÂ±ûÊÄßÂêç --&gt;
   &lt;result column=&quot;name&quot; property=&quot;name&quot;/&gt;
   &lt;result column=&quot;pwd&quot; property=&quot;password&quot;/&gt;
&lt;/resultMap&gt;

&lt;select id=&quot;selectUserById&quot; resultMap=&quot;UserMap&quot;&gt;
  select id , name , pwd from user where id = #{id}
&lt;/select&gt;
</code></pre>
<h2 id="52-resultmap">5.2 resultMap</h2>
<p><strong>Ëá™Âä®Êò†Â∞Ñ</strong></p>
<ul>
<li>resultMapÂÖÉÁ¥†ÊòØ MyBatis ‰∏≠ÊúÄÈáçË¶ÅÊúÄÂº∫Â§ßÁöÑÂÖÉÁ¥†„ÄÇÂÆÉÂèØ‰ª•ËÆ©‰Ω†‰ªé 90% ÁöÑ JDBC ResultSets Êï∞ÊçÆÊèêÂèñ‰ª£Á†Å‰∏≠Ëß£ÊîæÂá∫Êù•„ÄÇ</li>
<li>ÂÆûÈôÖ‰∏äÔºåÂú®‰∏∫‰∏Ä‰∫õÊØîÂ¶ÇËøûÊé•ÁöÑÂ§çÊùÇËØ≠Âè•ÁºñÂÜôÊò†Â∞Ñ‰ª£Á†ÅÁöÑÊó∂ÂÄôÔºå‰∏Ä‰ªΩresultMapËÉΩÂ§ü‰ª£ÊõøÂÆûÁé∞ÂêåÁ≠âÂäüËÉΩÁöÑÈïøËææÊï∞ÂçÉË°åÁöÑ‰ª£Á†Å„ÄÇ</li>
<li>ResultMap ÁöÑËÆæËÆ°ÊÄùÊÉ≥ÊòØÔºåÂØπ‰∫éÁÆÄÂçïÁöÑËØ≠Âè•Ê†πÊú¨‰∏çÈúÄË¶ÅÈÖçÁΩÆÊòæÂºèÁöÑÁªìÊûúÊò†Â∞ÑÔºåËÄåÂØπ‰∫éÂ§çÊùÇ‰∏ÄÁÇπÁöÑËØ≠Âè•Âè™ÈúÄË¶ÅÊèèËø∞ÂÆÉ‰ª¨ÁöÑÂÖ≥Á≥ªÂ∞±Ë°å‰∫Ü„ÄÇ</li>
</ul>
<p>‰Ω†Â∑≤ÁªèËßÅËøáÁÆÄÂçïÊò†Â∞ÑËØ≠Âè•ÁöÑÁ§∫‰æã‰∫ÜÔºå‰ΩÜÂπ∂Ê≤°ÊúâÊòæÂºèÊåáÂÆöresultMap„ÄÇÊØîÂ¶ÇÔºö</p>
<pre><code class="language-xml">&lt;select id=&quot;selectUserById&quot; resultType=&quot;map&quot;&gt;
select id , name , pwd
  from user
  where id = #{id}
&lt;/select&gt;
</code></pre>
<p>‰∏äËø∞ËØ≠Âè•Âè™ÊòØÁÆÄÂçïÂú∞Â∞ÜÊâÄÊúâÁöÑÂàóÊò†Â∞ÑÂà∞HashMapÁöÑÈîÆ‰∏äÔºåËøôÁî±resultTypeÂ±ûÊÄßÊåáÂÆö„ÄÇËôΩÁÑ∂Âú®Â§ßÈÉ®ÂàÜÊÉÖÂÜµ‰∏ãÈÉΩÂ§üÁî®Ôºå‰ΩÜÊòØ HashMap ‰∏çÊòØ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑÊ®°Âûã„ÄÇ‰Ω†ÁöÑÁ®ãÂ∫èÊõ¥ÂèØËÉΩ‰ºö‰ΩøÁî® JavaBean Êàñ POJOÔºàPlain Old Java ObjectsÔºåÊôÆÈÄöËÄÅÂºè Java ÂØπË±°Ôºâ‰Ωú‰∏∫Ê®°Âûã„ÄÇ<br>
ResultMapÊúÄ‰ºòÁßÄÁöÑÂú∞ÊñπÂú®‰∫éÔºåËôΩÁÑ∂‰Ω†Â∑≤ÁªèÂØπÂÆÉÁõ∏ÂΩì‰∫ÜËß£‰∫ÜÔºå‰ΩÜÊòØÊ†πÊú¨Â∞±‰∏çÈúÄË¶ÅÊòæÂºèÂú∞Áî®Âà∞‰ªñ‰ª¨„ÄÇ</p>
<h3 id="521-ÊâãÂä®Êò†Â∞Ñ">5.2.1 ÊâãÂä®Êò†Â∞Ñ</h3>
<p>1„ÄÅËøîÂõûÂÄºÁ±ªÂûã‰∏∫resultMap</p>
<pre><code class="language-xml">&lt;select id=&quot;selectUserById&quot; resultMap=&quot;UserMap&quot;&gt;
  select id , name , pwd from user where id = #{id}
&lt;/select&gt;
</code></pre>
<p>2„ÄÅÁºñÂÜôresultMapÔºåÂÆûÁé∞ÊâãÂä®Êò†Â∞ÑÔºÅ</p>
<pre><code class="language-xml">&lt;resultMap id=&quot;UserMap&quot; type=&quot;User&quot;&gt;
   &lt;!-- id‰∏∫‰∏ªÈîÆ --&gt;
   &lt;id column=&quot;id&quot; property=&quot;id&quot;/&gt;
   &lt;!-- columnÊòØÊï∞ÊçÆÂ∫ìË°®ÁöÑÂàóÂêç , propertyÊòØÂØπÂ∫îÂÆû‰ΩìÁ±ªÁöÑÂ±ûÊÄßÂêç --&gt;
   &lt;result column=&quot;name&quot; property=&quot;name&quot;/&gt;
   &lt;result column=&quot;pwd&quot; property=&quot;password&quot;/&gt;
&lt;/resultMap&gt;
</code></pre>
<p>Â¶ÇÊûú‰∏ñÁïåÊÄªÊòØËøô‰πàÁÆÄÂçïÂ∞±Â•Ω‰∫Ü„ÄÇ‰ΩÜÊòØËÇØÂÆö‰∏çÊòØÁöÑÔºåÊï∞ÊçÆÂ∫ì‰∏≠ÔºåÂ≠òÂú®‰∏ÄÂØπÂ§öÔºåÂ§öÂØπ‰∏ÄÁöÑÊÉÖÂÜµÔºåÊàë‰ª¨‰πãÂêé‰ºö‰ΩøÁî®Âà∞‰∏Ä‰∫õÈ´òÁ∫ßÁöÑÁªìÊûúÈõÜÊò†Â∞ÑÔºåassociationÔºåcollectionËøô‰∫õ„ÄÇ</p>
<h1 id="6-Êó•Âøó">6. Êó•Âøó</h1>
<h2 id="61-Êó•ÂøóÂ∑•ÂéÇ">6.1 Êó•ÂøóÂ∑•ÂéÇ</h2>
<p>ÊÄùËÄÉÔºöÂú®ÊµãËØïSQLÁöÑÊó∂ÂÄôÔºåË¶ÅÊòØËÉΩÂ§üÂú®ÊéßÂà∂Âè∞ËæìÂá∫ SQL ÁöÑËØùÔºåÊòØ‰∏çÊòØÂ∞±ËÉΩÂ§üÊúâÊõ¥Âø´ÁöÑÊéíÈîôÊïàÁéáÔºü<br>
Â¶ÇÊûú‰∏Ä‰∏™ Êï∞ÊçÆÂ∫ìÁõ∏ÂÖ≥ÁöÑÊìç‰ΩúÂá∫Áé∞‰∫ÜÈóÆÈ¢òÔºåÊàë‰ª¨ÂèØ‰ª•Ê†πÊçÆËæìÂá∫ÁöÑSQLËØ≠Âè•Âø´ÈÄüÊéíÊü•ÈóÆÈ¢ò„ÄÇ<br>
ÂØπ‰∫é‰ª•ÂæÄÁöÑÂºÄÂèëËøáÁ®ãÔºåÊàë‰ª¨‰ºöÁªèÂ∏∏‰ΩøÁî®Âà∞debugÊ®°ÂºèÊù•Ë∞ÉËäÇÔºåË∑üË∏™Êàë‰ª¨ÁöÑ‰ª£Á†ÅÊâßË°åËøáÁ®ã„ÄÇ‰ΩÜÊòØÁé∞Âú®‰ΩøÁî®MybatisÊòØÂü∫‰∫éÊé•Âè£ÔºåÈÖçÁΩÆÊñá‰ª∂ÁöÑÊ∫ê‰ª£Á†ÅÊâßË°åËøáÁ®ã„ÄÇÂõ†Ê≠§ÔºåÊàë‰ª¨ÂøÖÈ°ªÈÄâÊã©Êó•ÂøóÂ∑•ÂÖ∑Êù•‰Ωú‰∏∫Êàë‰ª¨ÂºÄÂèëÔºåË∞ÉËäÇÁ®ãÂ∫èÁöÑÂ∑•ÂÖ∑„ÄÇ<br>
MybatisÂÜÖÁΩÆÁöÑÊó•ÂøóÂ∑•ÂéÇÊèê‰æõÊó•ÂøóÂäüËÉΩÔºåÂÖ∑‰ΩìÁöÑÊó•ÂøóÂÆûÁé∞Êúâ‰ª•‰∏ãÂá†ÁßçÂ∑•ÂÖ∑Ôºö</p>
<ul>
<li>SLF4J</li>
<li>LOG4J „ÄêÊéåÊè°„Äë</li>
<li>LOG4J2</li>
<li>JDK_LOGGING</li>
<li>COMMONS_LOGGING</li>
<li>STDOUT_LOGGING</li>
<li>NO_LOGGING</li>
</ul>
<p>ÂÖ∑‰ΩìÈÄâÊã©Âì™‰∏™Êó•ÂøóÂÆûÁé∞Â∑•ÂÖ∑Áî±MyBatisÁöÑÂÜÖÁΩÆÊó•ÂøóÂ∑•ÂéÇÁ°ÆÂÆö„ÄÇÂÆÉ‰ºö‰ΩøÁî®ÊúÄÂÖàÊâæÂà∞ÁöÑÔºàÊåâSLF4J„ÄÅApache Commons Logging„ÄÅLog4j 2„ÄÅLog4j„ÄÅJDK loggingÂàó‰∏æÁöÑÈ°∫Â∫èÊü•ÊâæÔºâ„ÄÇÂ¶ÇÊûú‰∏Ä‰∏™ÈÉΩÊú™ÊâæÂà∞ÔºåÊó•ÂøóÂäüËÉΩÂ∞±‰ºöË¢´Á¶ÅÁî®„ÄÇ‚Äã</p>
<p><strong>Ê†áÂáÜÊó•ÂøóÂÆûÁé∞</strong><br>
ÊåáÂÆö MyBatis Â∫îËØ•‰ΩøÁî®Âì™‰∏™Êó•ÂøóËÆ∞ÂΩïÂÆûÁé∞„ÄÇÂ¶ÇÊûúÊ≠§ËÆæÁΩÆ‰∏çÂ≠òÂú®ÔºåÂàô‰ºöËá™Âä®ÂèëÁé∞Êó•ÂøóËÆ∞ÂΩïÂÆûÁé∞„ÄÇ</p>
<pre><code class="language-xml">&lt;settings&gt;
  &lt;setting name=&quot;logImpl&quot; value=&quot;STDOUT_LOGGING&quot;/&gt;
&lt;/settings&gt;
</code></pre>
<p>ÊµãËØïÔºåÂèØ‰ª•ÁúãÂà∞ÊéßÂà∂Âè∞ÊúâÂ§ßÈáèÁöÑËæìÂá∫ÔºÅÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáËøô‰∫õËæìÂá∫Êù•Âà§Êñ≠Á®ãÂ∫èÂà∞Â∫ïÂì™ÈáåÂá∫‰∫ÜBug</p>
<h2 id="62-log4j">6.2 Log4j</h2>
<p><strong>ÁÆÄ‰ªãÔºö</strong></p>
<ul>
<li>Log4jÊòØApacheÁöÑ‰∏Ä‰∏™ÂºÄÊ∫êÈ°πÁõÆ</li>
<li>ÈÄöËøá‰ΩøÁî®Log4jÔºåÊàë‰ª¨ÂèØ‰ª•ÊéßÂà∂Êó•Âøó‰ø°ÊÅØËæìÈÄÅÁöÑÁõÆÁöÑÂú∞ÔºöÊéßÂà∂Âè∞ÔºåÊñáÊú¨ÔºåGUIÁªÑ‰ª∂....</li>
<li>Êàë‰ª¨‰πüÂèØ‰ª•ÊéßÂà∂ÊØè‰∏ÄÊù°Êó•ÂøóÁöÑËæìÂá∫Ê†ºÂºèÔºõ</li>
<li>ÈÄöËøáÂÆö‰πâÊØè‰∏ÄÊù°Êó•Âøó‰ø°ÊÅØÁöÑÁ∫ßÂà´ÔºåÊàë‰ª¨ËÉΩÂ§üÊõ¥Âä†ÁªÜËá¥Âú∞ÊéßÂà∂Êó•ÂøóÁöÑÁîüÊàêËøáÁ®ã„ÄÇÊúÄ‰ª§‰∫∫ÊÑüÂÖ¥Ë∂£ÁöÑÂ∞±ÊòØÔºåËøô‰∫õÂèØ‰ª•ÈÄöËøá‰∏Ä‰∏™ÈÖçÁΩÆÊñá‰ª∂Êù•ÁÅµÊ¥ªÂú∞ËøõË°åÈÖçÁΩÆÔºåËÄå‰∏çÈúÄË¶Å‰øÆÊîπÂ∫îÁî®ÁöÑ‰ª£Á†Å„ÄÇ</li>
</ul>
<p><strong>‰ΩøÁî®Ê≠•È™§Ôºö</strong></p>
<ol>
<li>ÂØºÂÖ•log4jÁöÑÂåÖ</li>
</ol>
<pre><code class="language-xml">&lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;log4j&lt;/groupId&gt;
    &lt;artifactId&gt;log4j&lt;/artifactId&gt;
    &lt;version&gt;1.2.17&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<ol start="2">
<li>ÈÖçÁΩÆÊñá‰ª∂ÁºñÂÜô</li>
</ol>
<pre><code class="language-properties">#Â∞ÜÁ≠âÁ∫ß‰∏∫DEBUGÁöÑÊó•Âøó‰ø°ÊÅØËæìÂá∫Âà∞consoleÂíåfileËøô‰∏§‰∏™ÁõÆÁöÑÂú∞ÔºåconsoleÂíåfileÁöÑÂÆö‰πâÂú®‰∏ãÈù¢ÁöÑ‰ª£Á†Å
log4j.rootLogger=DEBUG,console,file

#ÊéßÂà∂Âè∞ËæìÂá∫ÁöÑÁõ∏ÂÖ≥ËÆæÁΩÆ
log4j.appender.console = org.apache.log4j.ConsoleAppender
log4j.appender.console.Target = System.out
log4j.appender.console.Threshold=DEBUG
log4j.appender.console.layout = org.apache.log4j.PatternLayout
log4j.appender.console.layout.ConversionPattern=[%c]-%m%n

#Êñá‰ª∂ËæìÂá∫ÁöÑÁõ∏ÂÖ≥ËÆæÁΩÆ
log4j.appender.file = org.apache.log4j.RollingFileAppender
log4j.appender.file.File=./log/Mybatis-04.log
log4j.appender.file.MaxFileSize=10mb
log4j.appender.file.Threshold=DEBUG
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=[%p][%d{yy-MM-dd}][%c]%m%n

#Êó•ÂøóËæìÂá∫Á∫ßÂà´
log4j.logger.org.mybatis=DEBUG
log4j.logger.java.sql=DEBUG
log4j.logger.java.sql.Statement=DEBUG
log4j.logger.java.sql.ResultSet=DEBUG
log4j.logger.java.sql.PreparedStatement=DEBUG
</code></pre>
<ol start="3">
<li>settingËÆæÁΩÆÊó•ÂøóÂÆûÁé∞</li>
</ol>
<pre><code class="language-xml">&lt;settings&gt;
   &lt;setting name=&quot;logImpl&quot; value=&quot;LOG4J&quot;/&gt;
&lt;/settings&gt;
</code></pre>
<ol start="4">
<li>Âú®Á®ãÂ∫è‰∏≠‰ΩøÁî®Log4jËøõË°åËæìÂá∫ÔºÅ</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.User;
import com.SolitudeAlma.utils.MybatisUtils;
import org.apache.ibatis.session.SqlSession;
import org.apache.log4j.Logger;
import org.junit.Test;

/**
 * junitÊµãËØïÁ±ª
 * @author SolitudeAlma
 * @date 2021/8/15
 */
public class UserDaoTest {

    //Ê≥®ÊÑèÂØºÂåÖÔºöorg.apache.log4j.Logger
    static Logger logger = Logger.getLogger(UserDaoTest.class);

    @Test
    public void getUserById() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        User userInfo = mapper.getUserById(1);
        System.out.println(userInfo);
        sqlSession.close();
    }

    @Test
    public void selectUser() {
        logger.info(&quot;infoÔºöËøõÂÖ•selectUserÊñπÊ≥ï&quot;);
        logger.debug(&quot;debugÔºöËøõÂÖ•selectUserÊñπÊ≥ï&quot;);
        logger.error(&quot;error: ËøõÂÖ•selectUserÊñπÊ≥ï&quot;);
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        User userInfo = mapper.getUserById(1);
        System.out.println(userInfo);
        sqlSession.close();
    }
}
</code></pre>
<ol start="5">
<li>ÊµãËØïÔºåÁúãÊéßÂà∂Âè∞ËæìÂá∫ÔºÅ</li>
</ol>
<ul>
<li>‰ΩøÁî®Log4j ËæìÂá∫Êó•Âøó</li>
<li>ÂèØ‰ª•ÁúãÂà∞ËøòÁîüÊàê‰∫Ü‰∏Ä‰∏™Êó•ÂøóÁöÑÊñá‰ª∂ „ÄêÈúÄË¶Å‰øÆÊîπfileÁöÑÊó•ÂøóÁ∫ßÂà´„Äë</li>
</ul>
<p>ÈúÄË¶ÅÂØºÂåÖÔºåÂèÇÊï∞‰∏∫ÂΩìÂâçÁ±ªÁöÑclassÂØπË±°</p>
<blockquote>
<p><a href="https://www.cnblogs.com/xiaobaizhiqian/p/7956690.html">https://www.cnblogs.com/xiaobaizhiqian/p/7956690.html</a><br>
<a href="https://blog.csdn.net/eagleuniversityeye/article/details/80582140">https://blog.csdn.net/eagleuniversityeye/article/details/80582140</a><br>
<a href="https://www.cnblogs.com/wangzhuxing/p/7753420.html">https://www.cnblogs.com/wangzhuxing/p/7753420.html</a></p>
</blockquote>
<h1 id="7-ÂàÜÈ°µ">7. ÂàÜÈ°µ</h1>
<p><strong>ÊÄùËÄÉÔºö‰∏∫‰ªÄ‰πàÈúÄË¶ÅÂàÜÈ°µÔºü</strong><br>
Âú®Â≠¶‰π†mybatisÁ≠âÊåÅ‰πÖÂ±ÇÊ°ÜÊû∂ÁöÑÊó∂ÂÄôÔºå‰ºöÁªèÂ∏∏ÂØπÊï∞ÊçÆËøõË°åÂ¢ûÂà†ÊîπÊü•Êìç‰ΩúÔºå‰ΩøÁî®ÊúÄÂ§öÁöÑÊòØÂØπÊï∞ÊçÆÂ∫ìËøõË°åÊü•ËØ¢Êìç‰ΩúÔºåÂ¶ÇÊûúÊü•ËØ¢Â§ßÈáèÊï∞ÊçÆÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨ÂæÄÂæÄ‰ΩøÁî®ÂàÜÈ°µËøõË°åÊü•ËØ¢Ôºå‰πüÂ∞±ÊòØÊØèÊ¨°Â§ÑÁêÜÂ∞èÈÉ®ÂàÜÊï∞ÊçÆÔºåËøôÊ†∑ÂØπÊï∞ÊçÆÂ∫ìÂéãÂäõÂ∞±Âú®ÂèØÊéßËåÉÂõ¥ÂÜÖ„ÄÇ</p>
<h2 id="71-‰ΩøÁî®limitÂÆûÁé∞ÂàÜÈ°µ">7.1 ‰ΩøÁî®LimitÂÆûÁé∞ÂàÜÈ°µ</h2>
<pre><code class="language-sql">#ËØ≠Ê≥ï
SELECT * FROM table LIMIT stratIndexÔºåpageSize

SELECT * FROM table LIMIT 5,10; // Ê£ÄÁ¥¢ËÆ∞ÂΩïË°å 6-15  

#‰∏∫‰∫ÜÊ£ÄÁ¥¢‰ªéÊüê‰∏Ä‰∏™ÂÅèÁßªÈáèÂà∞ËÆ∞ÂΩïÈõÜÁöÑÁªìÊùüÊâÄÊúâÁöÑËÆ∞ÂΩïË°åÔºåÂèØ‰ª•ÊåáÂÆöÁ¨¨‰∫å‰∏™ÂèÇÊï∞‰∏∫ -1Ôºö   
SELECT * FROM table LIMIT 95,-1; // Ê£ÄÁ¥¢ËÆ∞ÂΩïË°å 96-last.  

#Â¶ÇÊûúÂè™ÁªôÂÆö‰∏Ä‰∏™ÂèÇÊï∞ÔºåÂÆÉË°®Á§∫ËøîÂõûÊúÄÂ§ßÁöÑËÆ∞ÂΩïË°åÊï∞ÁõÆÔºö   
SELECT * FROM table LIMIT 5; //Ê£ÄÁ¥¢Ââç 5 ‰∏™ËÆ∞ÂΩïË°å  

#Êç¢Âè•ËØùËØ¥ÔºåLIMIT n Á≠â‰ª∑‰∫é LIMIT 0,n„ÄÇ 
</code></pre>
<p><strong>Ê≠•È™§Ôºö</strong></p>
<ol>
<li>‰øÆÊîπMapperÊñá‰ª∂</li>
</ol>
<pre><code class="language-xml">&lt;select id=&quot;getUserByLimit&quot; parameterType=&quot;map&quot; resultMap=&quot;UserMap&quot;&gt;
  select * from user limit #{currentPage},#{pageSize};
&lt;/select&gt;
</code></pre>
<ol start="2">
<li>MapperÊé•Âè£ÔºåÂèÇÊï∞‰∏∫map</li>
</ol>
<pre><code class="language-java">//ÈÄâÊã©ÂÖ®ÈÉ®Áî®Êà∑ÂÆûÁé∞ÂàÜÈ°µ
List&lt;User&gt; selectUser(Map&lt;String,Integer&gt; map);
</code></pre>
<ol start="3">
<li>Âú®ÊµãËØïÁ±ª‰∏≠‰º†ÂÖ•ÂèÇÊï∞ÊµãËØï</li>
</ol>
<ul>
<li>Êé®Êñ≠ÔºöËµ∑Âßã‰ΩçÁΩÆ =  ÔºàÂΩìÂâçÈ°µÈù¢ - 1 Ôºâ * È°µÈù¢Â§ßÂ∞è</li>
</ul>
<pre><code class="language-java">//ÂàÜÈ°µÊü•ËØ¢ , ‰∏§‰∏™ÂèÇÊï∞startIndex , pageSize
@Test
public void getUserByLimit() {
    SqlSession sqlSession = MybatisUtils.getSqlSession();
    UserDao mapper = sqlSession.getMapper(UserDao.class);
    int currentPage = 1;
    int pageSize = 2;
    Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();
    map.put(&quot;currentPage&quot;, (currentPage - 1) * pageSize);//‰∏ãÊ†á‰ªé0ÂºÄÂßã
    map.put(&quot;pageSize&quot;, pageSize);
    List&lt;User&gt; userList = mapper.getUserByLimit(map);
    for (User user : userList) {
        System.out.println(user);
    }
    sqlSession.close();
}
</code></pre>
<h2 id="72-‰ΩøÁî®rowboundsÂàÜÈ°µ">7.2 ‰ΩøÁî®RowBoundsÂàÜÈ°µ</h2>
<p>Êàë‰ª¨Èô§‰∫Ü‰ΩøÁî®LimitÂú®SQLÂ±ÇÈù¢ÂÆûÁé∞ÂàÜÈ°µÔºå‰πüÂèØ‰ª•‰ΩøÁî®RowBoundsÂú®Java‰ª£Á†ÅÂ±ÇÈù¢ÂÆûÁé∞ÂàÜÈ°µÔºåÂΩìÁÑ∂Ê≠§ÁßçÊñπÂºè‰Ωú‰∏∫‰∫ÜËß£Âç≥ÂèØ„ÄÇÊàë‰ª¨Êù•Áúã‰∏ãÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºÅ<br>
<strong>Ê≠•È™§Ôºö</strong></p>
<ol>
<li>mapperÊé•Âè£</li>
</ol>
<pre><code class="language-java">/**
* ÈÄöËøáJavaÁ±ªÂÆûÁé∞ÂàÜÈ°µ
* @return List Áî®Êà∑‰ø°ÊÅØÈõÜÂêà
*/
List&lt;User&gt; getUserByRowBounds();
</code></pre>
<ol start="2">
<li>mapperÊñá‰ª∂</li>
</ol>
<pre><code class="language-xml">&lt;select id=&quot;getUserByRowBounds&quot; resultType=&quot;user&quot;&gt;
  select * from user
&lt;/select&gt;
</code></pre>
<ol start="3">
<li>ÊµãËØïÁ±ª<br>
Âú®ËøôÈáåÔºåÊàë‰ª¨ÈúÄË¶Å‰ΩøÁî®RowBoundsÁ±ª</li>
</ol>
<pre><code class="language-java">@Test
public void getUserByRowBounds() {
    SqlSession sqlSession = MybatisUtils.getSqlSession();
    int currentPage = 1;
    int pageSize = 2;
    RowBounds rowBounds = new RowBounds(currentPage - 1, pageSize);
    //ÈÄöËøáJavaÂ±Ç‰ª£Á†ÅÂÆûÁé∞ÂàÜÈ°µ
    //ÈÄöËøásession.**ÊñπÊ≥ïËøõË°å‰º†ÈÄírowBoundsÔºå[Ê≠§ÁßçÊñπÂºèÁé∞Âú®Â∑≤Áªè‰∏çÊé®Ëçê‰ΩøÁî®‰∫Ü]
    List&lt;User&gt; userList = sqlSession.selectList(&quot;com.SolitudeAlma.dao.UserDao.getUserByRowBounds&quot;, null, rowBounds);
    for (User user : userList) {
        System.out.println(user);
    }
    sqlSession.close();
}
</code></pre>
<h2 id="73-pagehelper">7.3 PageHelper</h2>
<figure data-type="image" tabindex="3"><img src="https://cdn.nlark.com/yuque/0/2021/png/22045814/1629127875711-753a1a31-2d3c-45bd-90d5-def577c246ae.png#clientId=u479eed64-76c8-4&amp;from=paste&amp;height=312&amp;id=udc4b7fa6&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=624&amp;originWidth=1244&amp;originalType=binary&amp;ratio=1&amp;size=71223&amp;status=done&amp;style=none&amp;taskId=uc03774e4-b22f-4f2e-ae8a-2818e5cecba&amp;width=622" alt="image.png" loading="lazy"></figure>
<p>‰∫ÜËß£Âç≥ÂèØÔºåÂèØ‰ª•Ëá™Â∑±Â∞ùËØï‰ΩøÁî®</p>
<p>ÂÆòÊñπÊñáÊ°£Ôºöhttps://pagehelper.github.io/‚Äã</p>
<p>Âú®MyBatisPlu‰∏≠ÔºåÊàë‰ª¨‰πüËÆ≤Ëß£Âà∞‰∫ÜÂàÜÈ°µÂÆûÁé∞ÔºåÊâÄ‰ª•ÂÆûÁé∞ÊñπÂºèÂæàÂ§öÔºåÁúãËá™Â∑±ÁöÑÁêÜËß£ÂêàÁÜüÁªÉÁ®ãÂ∫¶ËøõË°åÊéåÊè°Âç≥ÂèØ</p>
<h1 id="8-‰ΩøÁî®Ê≥®Ëß£ÂºÄÂèë">8. ‰ΩøÁî®Ê≥®Ëß£ÂºÄÂèë</h1>
<h2 id="81-Èù¢ÂêëÊé•Âè£ÁºñÁ®ã">8.1 Èù¢ÂêëÊé•Âè£ÁºñÁ®ã</h2>
<p><strong>Èù¢ÂêëÊé•Âè£ÁºñÁ®ãÔºö</strong></p>
<ul>
<li>Â§ßÂÆ∂‰πãÂâçÈÉΩÂ≠¶ËøáÈù¢ÂêëÂØπË±°ÁºñÁ®ãÔºå‰πüÂ≠¶‰π†ËøáÊé•Âè£Ôºå‰ΩÜÂú®ÁúüÊ≠£ÁöÑÂºÄÂèë‰∏≠ÔºåÂæàÂ§öÊó∂ÂÄôÊàë‰ª¨‰ºöÈÄâÊã©Èù¢ÂêëÊé•Âè£ÁºñÁ®ã</li>
<li><strong>Ê†πÊú¨ÂéüÂõ† :  Ëß£ËÄ¶ , ÂèØÊãìÂ±ï , ÊèêÈ´òÂ§çÁî® , ÂàÜÂ±ÇÂºÄÂèë‰∏≠ , ‰∏äÂ±Ç‰∏çÁî®ÁÆ°ÂÖ∑‰ΩìÁöÑÂÆûÁé∞ , Â§ßÂÆ∂ÈÉΩÈÅµÂÆàÂÖ±ÂêåÁöÑÊ†áÂáÜ , ‰ΩøÂæóÂºÄÂèëÂèòÂæóÂÆπÊòì , ËßÑËåÉÊÄßÊõ¥Â•Ω</strong></li>
<li>Âú®‰∏Ä‰∏™Èù¢ÂêëÂØπË±°ÁöÑÁ≥ªÁªü‰∏≠ÔºåÁ≥ªÁªüÁöÑÂêÑÁßçÂäüËÉΩÊòØÁî±ËÆ∏ËÆ∏Â§öÂ§öÁöÑ‰∏çÂêåÂØπË±°Âçè‰ΩúÂÆåÊàêÁöÑ„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÂêÑ‰∏™ÂØπË±°ÂÜÖÈÉ®ÊòØÂ¶Ç‰ΩïÂÆûÁé∞Ëá™Â∑±ÁöÑ,ÂØπÁ≥ªÁªüËÆæËÆ°‰∫∫ÂëòÊù•ËÆ≤Â∞±‰∏çÈÇ£‰πàÈáçË¶Å‰∫ÜÔºõ</li>
<li>ËÄåÂêÑ‰∏™ÂØπË±°‰πãÈó¥ÁöÑÂçè‰ΩúÂÖ≥Á≥ªÂàôÊàê‰∏∫Á≥ªÁªüËÆæËÆ°ÁöÑÂÖ≥ÈîÆ„ÄÇÂ∞èÂà∞‰∏çÂêåÁ±ª‰πãÈó¥ÁöÑÈÄö‰ø°ÔºåÂ§ßÂà∞ÂêÑÊ®°Âùó‰πãÈó¥ÁöÑ‰∫§‰∫íÔºåÂú®Á≥ªÁªüËÆæËÆ°‰πãÂàùÈÉΩÊòØË¶ÅÁùÄÈáçËÄÉËôëÁöÑÔºåËøô‰πüÊòØÁ≥ªÁªüËÆæËÆ°ÁöÑ‰∏ªË¶ÅÂ∑•‰ΩúÂÜÖÂÆπ„ÄÇÈù¢ÂêëÊé•Âè£ÁºñÁ®ãÂ∞±ÊòØÊåáÊåâÁÖßËøôÁßçÊÄùÊÉ≥Êù•ÁºñÁ®ã„ÄÇ</li>
</ul>
<p><strong>ÂÖ≥‰∫éÊé•Âè£ÁöÑÁêÜËß£</strong></p>
<ul>
<li>Êé•Âè£‰ªéÊõ¥Ê∑±Â±ÇÊ¨°ÁöÑÁêÜËß£ÔºåÂ∫îÊòØÂÆö‰πâÔºàËßÑËåÉÔºåÁ∫¶ÊùüÔºâ‰∏éÂÆûÁé∞ÔºàÂêçÂÆûÂàÜÁ¶ªÁöÑÂéüÂàôÔºâÁöÑÂàÜÁ¶ª„ÄÇ</li>
<li>Êé•Âè£ÁöÑÊú¨Ë∫´ÂèçÊò†‰∫ÜÁ≥ªÁªüËÆæËÆ°‰∫∫ÂëòÂØπÁ≥ªÁªüÁöÑÊäΩË±°ÁêÜËß£„ÄÇ</li>
<li>Êé•Âè£Â∫îÊúâ‰∏§Á±ªÔºö
<ul>
<li>Á¨¨‰∏ÄÁ±ªÊòØÂØπ‰∏Ä‰∏™‰∏™‰ΩìÁöÑÊäΩË±°ÔºåÂÆÉÂèØÂØπÂ∫î‰∏∫‰∏Ä‰∏™ÊäΩË±°‰Ωì(abstract class)Ôºõ</li>
<li>Á¨¨‰∫åÁ±ªÊòØÂØπ‰∏Ä‰∏™‰∏™‰ΩìÊüê‰∏ÄÊñπÈù¢ÁöÑÊäΩË±°ÔºåÂç≥ÂΩ¢Êàê‰∏Ä‰∏™ÊäΩË±°Èù¢ÔºàinterfaceÔºâÔºõ</li>
</ul>
</li>
<li>‰∏Ä‰∏™‰∏™‰ΩìÊúâÂèØËÉΩÊúâÂ§ö‰∏™ÊäΩË±°Èù¢„ÄÇÊäΩË±°‰Ωì‰∏éÊäΩË±°Èù¢ÊòØÊúâÂå∫Âà´ÁöÑ„ÄÇ</li>
</ul>
<p><strong>‰∏â‰∏™Èù¢ÂêëÂå∫Âà´</strong></p>
<ul>
<li>Èù¢ÂêëÂØπË±°ÊòØÊåáÔºåÊàë‰ª¨ËÄÉËôëÈóÆÈ¢òÊó∂Ôºå‰ª•ÂØπË±°‰∏∫Âçï‰ΩçÔºåËÄÉËôëÂÆÉÁöÑÂ±ûÊÄßÂèäÊñπÊ≥ï .</li>
<li>Èù¢ÂêëËøáÁ®ãÊòØÊåáÔºåÊàë‰ª¨ËÄÉËôëÈóÆÈ¢òÊó∂Ôºå‰ª•‰∏Ä‰∏™ÂÖ∑‰ΩìÁöÑÊµÅÁ®ãÔºà‰∫ãÂä°ËøáÁ®ãÔºâ‰∏∫Âçï‰ΩçÔºåËÄÉËôëÂÆÉÁöÑÂÆûÁé∞ .</li>
<li>Êé•Âè£ËÆæËÆ°‰∏éÈùûÊé•Âè£ËÆæËÆ°ÊòØÈíàÂØπÂ§çÁî®ÊäÄÊúØËÄåË®ÄÁöÑÔºå‰∏éÈù¢ÂêëÂØπË±°ÔºàËøáÁ®ãÔºâ‰∏çÊòØ‰∏Ä‰∏™ÈóÆÈ¢ò.Êõ¥Â§öÁöÑ‰ΩìÁé∞Â∞±ÊòØÂØπÁ≥ªÁªüÊï¥‰ΩìÁöÑÊû∂ÊûÑ</li>
</ul>
<h2 id="82-Âà©Áî®Ê≥®Ëß£ÂºÄÂèë">8.2 Âà©Áî®Ê≥®Ëß£ÂºÄÂèë</h2>
<ul>
<li><strong>mybatisÊúÄÂàùÈÖçÁΩÆ‰ø°ÊÅØÊòØÂü∫‰∫é XML ,Êò†Â∞ÑËØ≠Âè•(SQL)‰πüÊòØÂÆö‰πâÂú® XML ‰∏≠ÁöÑ„ÄÇËÄåÂà∞MyBatis 3Êèê‰æõ‰∫ÜÊñ∞ÁöÑÂü∫‰∫éÊ≥®Ëß£ÁöÑÈÖçÁΩÆ„ÄÇ‰∏çÂπ∏ÁöÑÊòØÔºåJava Ê≥®Ëß£ÁöÑÁöÑË°®ËææÂäõÂíåÁÅµÊ¥ªÊÄßÂçÅÂàÜÊúâÈôê„ÄÇÊúÄÂº∫Â§ßÁöÑ MyBatis Êò†Â∞ÑÂπ∂‰∏çËÉΩÁî®Ê≥®Ëß£Êù•ÊûÑÂª∫</strong></li>
<li>sql Á±ªÂûã‰∏ªË¶ÅÂàÜÊàê :
<ul>
<li>@select ()</li>
<li>@update ()</li>
<li>@Insert ()</li>
<li>@delete ()</li>
</ul>
</li>
</ul>
<p>**Ê≥®ÊÑèÔºö**Âà©Áî®Ê≥®Ëß£ÂºÄÂèëÂ∞±‰∏çÈúÄË¶Åmapper.xmlÊò†Â∞ÑÊñá‰ª∂‰∫Ü .</p>
<ol>
<li>Êàë‰ª¨Âú®Êàë‰ª¨ÁöÑÊé•Âè£‰∏≠Ê∑ªÂä†Ê≥®Ëß£</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.User;
import org.apache.ibatis.annotations.Select;

import java.util.List;
import java.util.Map;

/**
 * @author SolitudeAlma
 * @date 2021/8/17
 */
public interface UserDao {

    /**
     * Ëé∑ÂèñÊâÄÁî®Áî®Êà∑‰ø°ÊÅØ
     * @return List Áî®Êà∑‰ø°ÊÅØÈõÜÂêà
     */
    @Select(&quot;select id, name, pwd as password from user&quot;)
    List&lt;User&gt; selectAll();
}
</code></pre>
<ol start="2">
<li>Âú®mybatisÁöÑÊ†∏ÂøÉÈÖçÁΩÆÊñá‰ª∂‰∏≠Ê≥®ÂÖ•</li>
</ol>
<pre><code class="language-xml">&lt;!--ÁªëÂÆöÊé•Âè£--&gt;
&lt;mappers&gt;
  &lt;mapper class=&quot;com.SolitudeAlma.dao.UserDao&quot;/&gt;
&lt;/mappers&gt;
</code></pre>
<ol start="3">
<li>Êàë‰ª¨ÂéªËøõË°åÊµãËØï</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.User;
import com.SolitudeAlma.utils.MybatisUtils;
import org.apache.ibatis.session.SqlSession;
import org.junit.Test;

import java.util.List;

/**
 * junitÊµãËØïÁ±ª
 * @author SolitudeAlma
 * @date 2021/8/16
 */
public class UserDaoTest {

    @Test
    public void selectAll() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        //Â∫ïÂ±Ç‰∏ªË¶ÅÂ∫îÁî®ÂèçÂ∞Ñ
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        List&lt;User&gt; userList = mapper.selectAll();
        for (User user : userList) {
            System.out.println(user);
        }
        sqlSession.close();
    }
}
</code></pre>
<ol start="4">
<li>
<p>Âà©Áî®DebugÊü•ÁúãÊú¨Ë¥®<br>
<img src="https://cdn.nlark.com/yuque/0/2021/png/22045814/1629173214734-b246f3ca-bb96-41a5-8c12-6dbcf18740d5.png#clientId=ud139b93b-0d14-4&amp;from=paste&amp;height=224&amp;id=ue2615ea0&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=447&amp;originWidth=1098&amp;originalType=binary&amp;ratio=1&amp;size=66517&amp;status=done&amp;style=none&amp;taskId=u44ecb60a-3cc9-4221-88bc-6dce8433463&amp;width=549" alt="image.png" loading="lazy"></p>
</li>
<li>
<p>Êú¨Ë¥®‰∏äÂà©Áî®‰∫ÜjvmÁöÑÂä®ÊÄÅ‰ª£ÁêÜÊú∫Âà∂<br>
Êú¨Ë¥®ÔºöÂèçÂ∞ÑÊú∫Âà∂<br>
Â∫ïÂ±ÇÔºöÂä®ÊÄÅ‰ª£ÁêÜ<br>
<img src="https://cdn.nlark.com/yuque/0/2021/png/22045814/1629173252833-289945ca-c59b-46fd-a05a-6f133639298c.png#clientId=ud139b93b-0d14-4&amp;from=paste&amp;height=223&amp;id=u60812ed8&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=446&amp;originWidth=837&amp;originalType=binary&amp;ratio=1&amp;size=109012&amp;status=done&amp;style=none&amp;taskId=u2df55bc4-c8c7-4e94-b093-5e22d3a2253&amp;width=418.5" alt="image.png" loading="lazy"></p>
</li>
<li>
<p>MybatisËØ¶ÁªÜÁöÑÊâßË°åÊµÅÁ®ã</p>
</li>
</ol>
<figure data-type="image" tabindex="4"><img src="https://cdn.nlark.com/yuque/0/2021/png/22045814/1629173355601-c1d2700d-936f-4761-af74-1f89bc9873d8.png#clientId=ud139b93b-0d14-4&amp;from=paste&amp;height=984&amp;id=uea18b5aa&amp;margin=%5Bobject%20Object%5D&amp;name=640.png&amp;originHeight=928&amp;originWidth=423&amp;originalType=binary&amp;ratio=1&amp;size=91882&amp;status=done&amp;style=none&amp;taskId=u71133102-b519-4ea5-915a-a327e23dfc1&amp;width=448.5" alt="640.png" loading="lazy"></figure>
<h2 id="83-crud">8.3 CRUD</h2>
<p>ÊîπÈÄ†MybatisUtilsÂ∑•ÂÖ∑Á±ªÁöÑgetSession( ) ÊñπÊ≥ïÔºåÈáçËΩΩÂÆûÁé∞„ÄÇ</p>
<pre><code class="language-java">/**
* Êó¢ÁÑ∂Êúâ‰∫Ü SqlSessionFactoryÔºåÈ°æÂêçÊÄù‰πâÔºåÊàë‰ª¨ÂèØ‰ª•‰ªé‰∏≠Ëé∑Âæó SqlSession ÁöÑÂÆû‰æã„ÄÇSqlSession Êèê‰æõ‰∫ÜÂú®Êï∞ÊçÆÂ∫ìÊâßË°å SQL
* ÂëΩ‰ª§ÊâÄÈúÄÁöÑÊâÄÊúâÊñπÊ≥ï„ÄÇ‰Ω†ÂèØ‰ª•ÈÄöËøá SqlSession ÂÆû‰æãÊù•Áõ¥Êé•ÊâßË°åÂ∑≤Êò†Â∞ÑÁöÑSQLËØ≠Âè•„ÄÇ sqlSessionÁõ∏ÂΩì‰∫éjdbc‰∏≠ÁöÑ
* prepareStatementÂØπË±°
* @return SqlSessionFactory
*/
public static SqlSession getSqlSession() {
    return sqlSessionFactory.openSession(true);
}
</code></pre>
<p>„ÄêÊ≥®ÊÑè„ÄëÁ°Æ‰øùÂÆû‰ΩìÁ±ªÂíåÊï∞ÊçÆÂ∫ìÂ≠óÊÆµÂØπÂ∫î<br>
<strong>Êü•ËØ¢Ôºö</strong></p>
<ol>
<li>ÁºñÂÜôÊé•Âè£ÊñπÊ≥ïÊ≥®Ëß£</li>
</ol>
<pre><code class="language-java">/**
* Ê†πÊçÆidÊü•ËØ¢Áî®Êà∑‰ø°ÊÅØ
* @param id Áî®Êà∑ÂîØ‰∏ÄÊ†áËØÜ @Param(&quot;xxx&quot;) ÊñπÊ≥ïÂ≠òÂú®Â§ö‰∏™ÂèÇÊï∞Êó∂ÂâçÈù¢ÂøÖÈ°ªÂä†‰∏äËøô‰∏™Ê≥®Ëß£Ôºå‰πüËµ∑Âà∞Ëµ∑Âà´ÂêçÁöÑ‰ΩúÁî®
* @return UserÁ±ª Áî®Êà∑‰ø°ÊÅØÁ±ª
*/
@Select(&quot;select id, name, pwd as password from user where id=#{id}&quot;)
User selectById(@Param(&quot;id&quot;) int id);
</code></pre>
<ol start="2">
<li>ÊµãËØï</li>
</ol>
<pre><code class="language-java">@Test
public void selectById() {
    SqlSession sqlSession = MybatisUtils.getSqlSession();
    UserDao mapper = sqlSession.getMapper(UserDao.class);
    User user = mapper.selectById(1);
    System.out.println(user);
    sqlSession.close();
}
</code></pre>
<p><strong>Êñ∞Â¢ûÔºö</strong></p>
<ol>
<li>ÁºñÂÜôÊé•Âè£ÊñπÊ≥ïÊ≥®Ëß£</li>
</ol>
<pre><code class="language-java">/**
* ÊèíÂÖ•‰∏ÄÊù°Áî®Êà∑‰ø°ÊÅØ
* @param user Áî®Êà∑‰ø°ÊÅØÁ±ª
* @return SQLÊü•ËØ¢ÁªìÊûúÔºåÂΩ±Âìç‰∫ÜÂá†Ë°å
*/
@Insert(&quot;insert into user(`id`, `name`, `pwd`) values(#{id}, #{name}, #{password})&quot;)
int insertOne(User user);
</code></pre>
<ol start="2">
<li>ÊµãËØï</li>
</ol>
<pre><code class="language-java">@Test
public void insertOne() {
    SqlSession sqlSession = MybatisUtils.getSqlSession();
    UserDao mapper = sqlSession.getMapper(UserDao.class);
    int user = mapper.insertOne(new User(7, &quot;asd&quot;, &quot;asdsa&quot;));
    System.out.println(user);
    sqlSession.close();
}
</code></pre>
<p><strong>‰øÆÊîπÔºö</strong></p>
<ol>
<li>ÁºñÂÜôÊé•Âè£ÊñπÊ≥ïÊ≥®Ëß£</li>
</ol>
<pre><code class="language-java">/**
* ‰øÆÊîπ‰∏ÄÊù°Áî®Êà∑‰ø°ÊÅØ
* @param user Áî®Êà∑‰ø°ÊÅØÁ±ª
* @return SQLÊü•ËØ¢ÁªìÊûúÔºåÂΩ±Âìç‰∫ÜÂá†Ë°å
*/
@Update(&quot;update user set name = #{name}, pwd = #{password} where id = #{id}&quot;)
int updateOne(User user);
</code></pre>
<ol start="2">
<li>ÊµãËØï</li>
</ol>
<pre><code class="language-java">@Test
public void updateOne() {
    SqlSession sqlSession = MybatisUtils.getSqlSession();
    UserDao mapper = sqlSession.getMapper(UserDao.class);
    int user = mapper.updateOne(new User(7, &quot;Â∞èÁéã&quot;, &quot;145236&quot;));
    System.out.println(user);
    sqlSession.close();
}
</code></pre>
<p><strong>Âà†Èô§Ôºö</strong></p>
<ol>
<li>ÁºñÂÜôÊé•Âè£ÊñπÊ≥ïÊ≥®Ëß£</li>
</ol>
<pre><code class="language-java">/**
* Âà†Èô§‰∏ÄÊù°Áî®Êà∑‰ø°ÊÅØ
* @param id Áî®Êà∑ÂîØ‰∏ÄÊ†áËØÜ
* @return SQLÊü•ËØ¢ÁªìÊûúÔºåÂΩ±Âìç‰∫ÜÂá†Ë°å
*/
@Delete(&quot;delete from user where id = #{uid}&quot;)
int deleteOne(@Param(&quot;uid&quot;) int id);
</code></pre>
<ol start="2">
<li>ÊµãËØï</li>
</ol>
<pre><code class="language-java">@Test
public void deleteOne() {
    SqlSession sqlSession = MybatisUtils.getSqlSession();
    UserDao mapper = sqlSession.getMapper(UserDao.class);
    int user = mapper.deleteOne(7);
    System.out.println(user);
    sqlSession.close();
}
</code></pre>
<p>„ÄêÊ≥®ÊÑèÁÇπÔºöÂ¢ûÂà†Êîπ‰∏ÄÂÆöËÆ∞ÂæóÂØπ‰∫ãÂä°ÁöÑÂ§ÑÁêÜ„Äë‚Äã</p>
<p><strong>ÂÖ≥‰∫é@param</strong><br>
@ParamÊ≥®Ëß£Áî®‰∫éÁªôÊñπÊ≥ïÂèÇÊï∞Ëµ∑‰∏Ä‰∏™ÂêçÂ≠ó„ÄÇ‰ª•‰∏ãÊòØÊÄªÁªìÁöÑ‰ΩøÁî®ÂéüÂàôÔºö</p>
<ul>
<li>Âú®ÊñπÊ≥ïÂè™Êé•Âèó‰∏Ä‰∏™ÂèÇÊï∞ÁöÑÊÉÖÂÜµ‰∏ãÔºåÂèØ‰ª•‰∏ç‰ΩøÁî®@Param„ÄÇ</li>
<li>Âú®ÊñπÊ≥ïÊé•ÂèóÂ§ö‰∏™ÂèÇÊï∞ÁöÑÊÉÖÂÜµ‰∏ãÔºåÂª∫ËÆÆ‰∏ÄÂÆöË¶Å‰ΩøÁî®@ParamÊ≥®Ëß£ÁªôÂèÇÊï∞ÂëΩÂêç„ÄÇ</li>
<li>Â¶ÇÊûúÂèÇÊï∞ÊòØ JavaBean Ôºå Âàô‰∏çËÉΩ‰ΩøÁî®@Param„ÄÇ</li>
<li>‰∏ç‰ΩøÁî®@ParamÊ≥®Ëß£Êó∂ÔºåÂèÇÊï∞Âè™ËÉΩÊúâ‰∏Ä‰∏™ÔºåÂπ∂‰∏îÊòØJavabean„ÄÇ</li>
</ul>
<blockquote>
<p><a href="https://www.cnblogs.com/zhuhui-site/p/10088369.html">https://www.cnblogs.com/zhuhui-site/p/10088369.html</a><br>
<a href="https://blog.csdn.net/sinat_33010325/article/details/84261662">https://blog.csdn.net/sinat_33010325/article/details/84261662</a></p>
</blockquote>
<p><strong>#{}‰∏é${}ÁöÑÂå∫Âà´</strong></p>
<ul>
<li>#{} ÁöÑ‰ΩúÁî®‰∏ªË¶ÅÊòØÊõøÊç¢È¢ÑÁºñËØëËØ≠Âè•(PrepareStatement)‰∏≠ÁöÑÂç†‰ΩçÁ¨¶? „ÄêÊé®Ëçê‰ΩøÁî®„Äë</li>
</ul>
<pre><code class="language-sql">INSERT INTO user (name) VALUES (#{name});
INSERT INTO user (name) VALUES (?);
</code></pre>
<ul>
<li>${} ÁöÑ‰ΩúÁî®ÊòØÁõ¥Êé•ËøõË°åÂ≠óÁ¨¶‰∏≤ÊõøÊç¢Ôºà‰∏çÊé®Ëçê‰ΩøÁî®ÔºåÂÆπÊòìÂºïËµ∑SQLÊ≥®ÂÖ•Ôºâ</li>
</ul>
<pre><code class="language-sql">INSERT INTO user (name) VALUES ('${name}');
INSERT INTO user (name) VALUES ('kuangshen');
</code></pre>
<p>‰ΩøÁî®Ê≥®Ëß£ÂíåÈÖçÁΩÆÊñá‰ª∂ÂçèÂêåÂºÄÂèëÔºåÊâçÊòØMyBatisÁöÑÊúÄ‰Ω≥ÂÆûË∑µ</p>
<h1 id="9-lombok">9. Lombok</h1>
<blockquote>
<p>Project Lombok is a java library that automatically plugs into your editor and build tools, spicing up your java.<br>
Never write another getter or equals method again, with one annotation your class has a fully featured builder, Automate your logging variables, and much more.</p>
</blockquote>
<ul>
<li>java library</li>
<li>plugs</li>
<li>build tools</li>
<li>with one annotation your class</li>
</ul>
<p>‰ΩøÁî®Ê≠•È™§Ôºö</p>
<ol>
<li>Âú®ideaÂÆâË£ÖLombokÊèí‰ª∂</li>
<li>Âú®È°πÁõÆ‰∏≠ÂØºÂÖ•Lombok‰æùËµñ</li>
</ol>
<pre><code class="language-xml">&lt;!-- https://mvnrepository.com/artifact/org.projectlombok/lombok --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
    &lt;artifactId&gt;lombok&lt;/artifactId&gt;
    &lt;version&gt;1.18.20&lt;/version&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;
</code></pre>
<ol start="3">
<li>Ê≥®Ëß£ËØ¥Êòé</li>
</ol>
<pre><code class="language-java">@Getter and @Setter
@FieldNameConstants
@ToString
@EqualsAndHashCode
@AllArgsConstructor, @RequiredArgsConstructor and @NoArgsConstructor
@Log, @Log4j, @Log4j2, @Slf4j, @XSlf4j, @CommonsLog, @JBossLog, @Flogger, @CustomLog
@Data
@Builder
@SuperBuilder
@Singular
@Delegate
@Value
@Accessors
@Wither
@With
@SneakyThrows
@val
@var
experimental @var
@UtilityClass
</code></pre>
<pre><code class="language-java">//ÁÇπÂºÄÂ∑¶ËæπÁöÑstructureÊü•ÁúãÁ±ªÁªìÊûÑ
@DataÔºöÊó†ÂèÇÊûÑÈÄ†„ÄÅget„ÄÅset„ÄÅtoString()„ÄÅhashcode()„ÄÅequals()
@AllArgsConstructor
@NoArgsConstructor
@ToString
@EqualsAndHashCode
@Getter ÂèØ‰ª•ÊîæÂú®Âõ∫ÂÆöÁöÑÂ≠óÊÆµÊàñËÄÖÁõ¥Êé•ÊîæÂú®Á±ª‰∏ä
</code></pre>
<h1 id="10-Â§öÂØπ‰∏ÄÂ§ÑÁêÜ">10. Â§öÂØπ‰∏ÄÂ§ÑÁêÜ</h1>
<p>Â§öÂØπ‰∏ÄÁöÑÁêÜËß£Ôºö</p>
<ul>
<li>Â§ö‰∏™Â≠¶ÁîüÂØπÂ∫î‰∏Ä‰∏™ËÄÅÂ∏à</li>
<li>Â¶ÇÊûúÂØπ‰∫éÂ≠¶ÁîüËøôËæπÔºåÂ∞±ÊòØ‰∏Ä‰∏™Â§öÂØπ‰∏ÄÁöÑÁé∞Ë±°ÔºåÂç≥‰ªéÂ≠¶ÁîüËøôËæπÂÖ≥ËÅî‰∏Ä‰∏™ËÄÅÂ∏àÔºÅ</li>
</ul>
<figure data-type="image" tabindex="5"><img src="https://cdn.nlark.com/yuque/0/2021/png/22045814/1629265047172-418c2b65-1792-4cba-8afb-206f25fe326e.png#clientId=ufbc0d8bb-8fc0-4&amp;from=paste&amp;height=483&amp;id=uf4324fe2&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=575&amp;originWidth=642&amp;originalType=binary&amp;ratio=1&amp;size=204230&amp;status=done&amp;style=none&amp;taskId=udebcbd19-0ec1-4758-9f59-6804279f5f7&amp;width=539" alt="image.png" loading="lazy"></figure>
<h2 id="101-Êï∞ÊçÆÂ∫ìËÆæËÆ°">10.1 Êï∞ÊçÆÂ∫ìËÆæËÆ°</h2>
<figure data-type="image" tabindex="6"><img src="https://cdn.nlark.com/yuque/0/2021/png/22045814/1629266284727-184d67a8-683d-46ad-8f39-4fec37c74415.png#clientId=ufbc0d8bb-8fc0-4&amp;from=paste&amp;height=165&amp;id=u7a21238d&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=330&amp;originWidth=635&amp;originalType=binary&amp;ratio=1&amp;size=89181&amp;status=done&amp;style=none&amp;taskId=ue57078c4-a157-4e5d-9efd-18656695493&amp;width=317.5" alt="image.png" loading="lazy"></figure>
<pre><code class="language-sql">CREATE TABLE `teacher` (
  `id` INT(10) NOT NULL,
  `name` VARCHAR(30) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=INNODB DEFAULT CHARSET=utf8mb4;

INSERT INTO teacher(`id`, `name`) VALUES (1, 'SolitudeAlma'); 

CREATE TABLE `student` (
  `id` INT(10) NOT NULL,
  `name` VARCHAR(30) DEFAULT NULL,
  `tid` INT(10) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `fktid` (`tid`),
  CONSTRAINT `fktid` FOREIGN KEY (`tid`) REFERENCES `teacher` (`id`)
) ENGINE=INNODB DEFAULT CHARSET=utf8mb4;
INSERT INTO `student` (`id`, `name`, `tid`) VALUES ('1', 'Â∞èÊòé', '1'); 
INSERT INTO `student` (`id`, `name`, `tid`) VALUES ('2', 'Â∞èÁ∫¢', '1'); 
INSERT INTO `student` (`id`, `name`, `tid`) VALUES ('3', 'Â∞èÂº†', '1'); 
INSERT INTO `student` (`id`, `name`, `tid`) VALUES ('4', 'Â∞èÊùé', '1'); 
INSERT INTO `student` (`id`, `name`, `tid`) VALUES ('5', 'Â∞èÁéã', '1');
</code></pre>
<h2 id="102-Êê≠Âª∫ÊµãËØïÁéØÂ¢É">10.2 Êê≠Âª∫ÊµãËØïÁéØÂ¢É</h2>
<ol>
<li>IDEAÂÆâË£ÖLombokÊèí‰ª∂</li>
<li>ÂºïÂÖ•Maven‰æùËµñ</li>
</ol>
<pre><code class="language-xml">&lt;!-- https://mvnrepository.com/artifact/org.projectlombok/lombok --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
    &lt;artifactId&gt;lombok&lt;/artifactId&gt;
    &lt;version&gt;1.18.20&lt;/version&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;
</code></pre>
<ol start="3">
<li>Âú®‰ª£Á†Å‰∏≠Â¢ûÂä†Ê≥®Ëß£</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.pojo;

import lombok.Data;

/**
 * @author SolitudeAlma
 * @date 2021/8/18
 */
@Data
public class Teacher {
    private int id;
    private String name;
}


package com.SolitudeAlma.pojo;

import lombok.Data;

/**
 * @author SolitudeAlma
 * @date 2021/8/18
 */
@Data
public class Student {
    private int id;
    private String name;
    private Teacher teacher;
}
</code></pre>
<ol start="4">
<li>ÁºñÂÜôÂÆû‰ΩìÁ±ªÂØπÂ∫îÁöÑMapperÊé•Âè£ „Äê‰∏§‰∏™„Äë</li>
</ol>
<ul>
<li><strong>Êó†ËÆ∫ÊúâÊ≤°ÊúâÈúÄÊ±ÇÔºåÈÉΩÂ∫îËØ•ÂÜô‰∏äÔºå‰ª•Â§áÂêéÊù•‰πãÈúÄÔºÅ</strong></li>
</ul>
<pre><code class="language-java">package com.SolitudeAlma.dao;

/**
 * @author SolitudeAlma
 * @date 2021/8/18
 */
public interface StudentMapper {
}
</code></pre>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.Teacher;
import org.apache.ibatis.annotations.Param;
import org.apache.ibatis.annotations.Select;

/**
 * @author SolitudeAlma
 * @date 2021/8/18
 */
public interface TeacherMapper {

    /**
     * Êü•ËØ¢Âçï‰∏™ËÄÅÂ∏àÁöÑ‰ø°ÊÅØ
     * @param id ËÄÅÂ∏àÁöÑÂîØ‰∏ÄÊ†áËØÜ
     * @return Teacher ËÄÅÂ∏à‰ø°ÊÅØÁ±ª
     */
    @Select(&quot;select * from teacher where id = #{tid}&quot;)
    Teacher getTeacher(@Param(&quot;tid&quot;) int id);
}
</code></pre>
<ol start="5">
<li>ÁºñÂÜôMapperÊé•Âè£ÂØπÂ∫îÁöÑ mapper.xmlÈÖçÁΩÆÊñá‰ª∂ „Äê‰∏§‰∏™„Äë</li>
</ol>
<ul>
<li><strong>Êó†ËÆ∫ÊúâÊ≤°ÊúâÈúÄÊ±ÇÔºåÈÉΩÂ∫îËØ•ÂÜô‰∏äÔºå‰ª•Â§áÂêéÊù•‰πãÈúÄÔºÅ</strong></li>
</ul>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;mapper namespace=&quot;com.SolitudeAlma.dao.StudentMapper&quot;&gt;

&lt;/mapper&gt;
</code></pre>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;mapper namespace=&quot;com.SolitudeAlma.dao.TeacherMapper&quot;&gt;

&lt;/mapper&gt;
</code></pre>
<ol start="6">
<li>ÊµãËØï</li>
</ol>
<pre><code class="language-java">import com.SolitudeAlma.dao.TeacherMapper;
import com.SolitudeAlma.pojo.Teacher;
import com.SolitudeAlma.utils.MybatisUtils;
import org.apache.ibatis.session.SqlSession;
import org.junit.Test;

/**
 * @author SolitudeAlma
 * @date 2021/8/18
 */
public class MyTest {
    @Test
    public void selectOne() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        TeacherMapper mapper = sqlSession.getMapper(TeacherMapper.class);
        Teacher teacher = mapper.getTeacher(1);
        System.out.println(teacher.getId() + &quot; &quot; + teacher.getName());
        sqlSession.close();
    }
}
</code></pre>
<h2 id="103-ÊåâÊü•ËØ¢ÂµåÂ•óÂ§ÑÁêÜ">10.3 ÊåâÊü•ËØ¢ÂµåÂ•óÂ§ÑÁêÜ</h2>
<ol>
<li>ÁªôStudentMapperÊé•Âè£Â¢ûÂä†ÊñπÊ≥ï</li>
</ol>
<pre><code class="language-java">/**
* Êü•ËØ¢ÊâÄÊúâÂ≠¶ÁîüÁöÑ‰ø°ÊÅØÔºå‰ª•ÂèäÂØπÂ∫îËÄÅÂ∏àÁöÑ‰ø°ÊÅØ
* @return List Â≠¶Áîü‰ø°ÊÅØÈõÜÂêà
*/
List&lt;Student&gt; getStudent();
</code></pre>
<ol start="2">
<li>ÁºñÂÜôÂØπÂ∫îÁöÑMapperÊñá‰ª∂</li>
</ol>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
       PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
       &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;mapper namespace=&quot;com.kuang.mapper.StudentMapper&quot;&gt;
   &lt;!--
   ÈúÄÊ±ÇÔºöËé∑ÂèñÊâÄÊúâÂ≠¶ÁîüÂèäÂØπÂ∫îËÄÅÂ∏àÁöÑ‰ø°ÊÅØ
   ÊÄùË∑ØÔºö
       1. Ëé∑ÂèñÊâÄÊúâÂ≠¶ÁîüÁöÑ‰ø°ÊÅØ
       2. Ê†πÊçÆËé∑ÂèñÁöÑÂ≠¶Áîü‰ø°ÊÅØÁöÑËÄÅÂ∏àID-&gt;Ëé∑ÂèñËØ•ËÄÅÂ∏àÁöÑ‰ø°ÊÅØ
       3. ÊÄùËÄÉÈóÆÈ¢òÔºåËøôÊ†∑Â≠¶ÁîüÁöÑÁªìÊûúÈõÜ‰∏≠Â∫îËØ•ÂåÖÂê´ËÄÅÂ∏àÔºåËØ•Â¶Ç‰ΩïÂ§ÑÁêÜÂë¢ÔºåÊï∞ÊçÆÂ∫ì‰∏≠Êàë‰ª¨‰∏ÄËà¨‰ΩøÁî®ÂÖ≥ËÅîÊü•ËØ¢Ôºü
           1. ÂÅö‰∏Ä‰∏™ÁªìÊûúÈõÜÊò†Â∞ÑÔºöstudentInfo
           2. studentInfoÁªìÊûúÈõÜÁöÑÁ±ªÂûã‰∏∫ Student
           3. Â≠¶Áîü‰∏≠ËÄÅÂ∏àÁöÑÂ±ûÊÄß‰∏∫teacherÔºåÂØπÂ∫îÊï∞ÊçÆÂ∫ì‰∏≠‰∏∫tid„ÄÇ
              Â§ö‰∏™ [1,...ÔºâÂ≠¶ÁîüÂÖ≥ËÅî‰∏Ä‰∏™ËÄÅÂ∏à=&gt; ‰∏ÄÂØπ‰∏ÄÔºå‰∏ÄÂØπÂ§ö
           4. Êü•ÁúãÂÆòÁΩëÊâæÂà∞Ôºöassociation ‚Äì ‰∏Ä‰∏™Â§çÊùÇÁ±ªÂûãÁöÑÂÖ≥ËÅîÔºõ‰ΩøÁî®ÂÆÉÊù•Â§ÑÁêÜÂÖ≥ËÅîÊü•ËØ¢
   --&gt;
   &lt;select id=&quot;getStudents&quot; resultMap=&quot;studentInfo&quot;&gt;
    select * from student
   &lt;/select&gt;
   &lt;resultMap id=&quot;studentInfo&quot; type=&quot;Student&quot;&gt;
       &lt;id property=&quot;id&quot; column=&quot;id&quot;/&gt;
       &lt;id property=&quot;name&quot; column=&quot;name&quot;/&gt;
       &lt;!--associationÂÖ≥ËÅîÂ±ûÊÄß propertyÁ±ªÁöÑÂ±ûÊÄßÂêç javaTypeÂ±ûÊÄßÁ±ªÂûã columnÂú®Â§öÁöÑ‰∏ÄÊñπÁöÑË°®‰∏≠ÁöÑÂàóÂêç--&gt;
       &lt;association property=&quot;teacher&quot;  column=&quot;tid&quot; javaType=&quot;Teacher&quot; select=&quot;getTeacher&quot;/&gt;
   &lt;/resultMap&gt;
   &lt;!--
   ËøôÈáå‰º†ÈÄíËøáÊù•ÁöÑidÔºåÂè™Êúâ‰∏Ä‰∏™Â±ûÊÄßÁöÑÊó∂ÂÄôÔºå‰∏ãÈù¢ÂèØ‰ª•ÂÜô‰ªª‰ΩïÂÄº
   association‰∏≠columnÂ§öÂèÇÊï∞ÈÖçÁΩÆÔºö
       column=&quot;{key=value,key=value}&quot;
       ÂÖ∂ÂÆûÂ∞±ÊòØÈîÆÂÄºÂØπÁöÑÂΩ¢ÂºèÔºåkeyÊòØ‰º†Áªô‰∏ã‰∏™sqlÁöÑÂèñÂÄºÂêçÁß∞ÔºåvalueÊòØÁâáÊÆµ‰∏Ä‰∏≠sqlÊü•ËØ¢ÁöÑÂ≠óÊÆµÂêç„ÄÇ
   --&gt;
   &lt;select id=&quot;getTeacher&quot; resultType=&quot;Teacher&quot;&gt;
      select id, name from teacher where id = #{id}
   &lt;/select&gt;
&lt;/mapper&gt;
</code></pre>
<ol start="3">
<li>ÁºñÂÜôÂÆåÊØïÂéªMybatisÈÖçÁΩÆÊñá‰ª∂‰∏≠ÔºåÊ≥®ÂÜåMapperÔºÅ</li>
<li>Ê≥®ÊÑèÁÇπËØ¥ÊòéÔºö</li>
</ol>
<pre><code class="language-xml">&lt;resultMap id=&quot;studentInfo&quot; type=&quot;Student&quot;&gt;
   &lt;!--associationÂÖ≥ËÅîÂ±ûÊÄß propertyÁ±ªÁöÑÂ±ûÊÄßÂêç javaTypeÂ±ûÊÄßÁ±ªÂûã columnÂú®Â§öÁöÑ‰∏ÄÊñπÁöÑË°®‰∏≠ÁöÑÂàóÂêç--&gt;
   &lt;association property=&quot;teacher&quot;  column=&quot;{id=tid}&quot; javaType=&quot;Teacher&quot; select=&quot;getTeacher&quot;/&gt;
&lt;/resultMap&gt;
&lt;!--
ËøôÈáå‰º†ÈÄíËøáÊù•ÁöÑidÔºåÂè™Êúâ‰∏Ä‰∏™Â±ûÊÄßÁöÑÊó∂ÂÄôÔºå‰∏ãÈù¢ÂèØ‰ª•ÂÜô‰ªª‰ΩïÂÄº
association‰∏≠columnÂ§öÂèÇÊï∞ÈÖçÁΩÆÔºö
   column=&quot;{key=value,key=value}&quot;
   Ê≥®ÊÑèÔºöÂú®‰ΩøÁî®Â§çÂêà‰∏ªÈîÆÁöÑÊó∂ÂÄôÔºå‰Ω†ÂèØ‰ª•‰ΩøÁî® column=&quot;{prop1=col1,prop2=col2}&quot; ËøôÊ†∑ÁöÑËØ≠Ê≥ïÊù•ÊåáÂÆöÂ§ö‰∏™‰º†ÈÄíÁªôÂµåÂ•ó Select Êü•ËØ¢ËØ≠Âè•ÁöÑÂàóÂêç„ÄÇËøô‰ºö‰ΩøÂæó prop1 Âíå prop2 ‰Ωú‰∏∫ÂèÇÊï∞ÂØπË±°ÔºåË¢´ËÆæÁΩÆ‰∏∫ÂØπÂ∫îÂµåÂ•ó Select ËØ≠Âè•ÁöÑÂèÇÊï∞„ÄÇ
--&gt;
&lt;select id=&quot;getTeacher&quot; resultType=&quot;teacher&quot;&gt;
  select * from teacher where id = #{id}
&lt;/select&gt;
</code></pre>
<ol start="5">
<li>ÊµãËØï</li>
</ol>
<pre><code class="language-java">import com.SolitudeAlma.dao.StudentMapper;
import com.SolitudeAlma.dao.TeacherMapper;
import com.SolitudeAlma.pojo.Student;
import com.SolitudeAlma.pojo.Teacher;
import com.SolitudeAlma.utils.MybatisUtils;
import org.apache.ibatis.session.SqlSession;
import org.junit.Test;

import java.util.List;

/**
 * @author SolitudeAlma
 * @date 2021/8/18
 */
public class MyTest {
    @Test
    public void selectOne() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        TeacherMapper mapper = sqlSession.getMapper(TeacherMapper.class);
        Teacher teacher = mapper.getTeacher(1);
        System.out.println(teacher.getId() + &quot; &quot; + teacher.getName());
        sqlSession.close();
    }

    @Test
    public void selectAll() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        StudentMapper mapper = sqlSession.getMapper(StudentMapper.class);
        List&lt;Student&gt; students = mapper.getStudent();
        for (Student student : students) {
            System.out.println(&quot;Â≠¶ÁîüÔºö&quot; + student.getName() + &quot;\t&quot; + &quot;ËÄÅÂ∏àÔºö&quot; + student.getTeacher().getName());
        }
        sqlSession.close();
    }
}
</code></pre>
<h2 id="104-ÊåâÁªìÊûúÂµåÂ•óÂ§ÑÁêÜ">10.4 ÊåâÁªìÊûúÂµåÂ•óÂ§ÑÁêÜ</h2>
<p>Èô§‰∫Ü‰∏äÈù¢ËøôÁßçÊñπÂºèÔºåËøòÊúâÂÖ∂‰ªñÊÄùË∑ØÂêóÔºü<br>
Êàë‰ª¨ËøòÂèØ‰ª•ÊåâÁÖßÁªìÊûúËøõË°åÂµåÂ•óÂ§ÑÁêÜÔºõ</p>
<ol>
<li>Êé•Âè£ÊñπÊ≥ïÁºñÂÜô</li>
</ol>
<pre><code class="language-java">/**
* Êü•ËØ¢ÊâÄÊúâÂ≠¶ÁîüÁöÑ‰ø°ÊÅØÔºå‰ª•ÂèäÂØπÂ∫îËÄÅÂ∏àÁöÑ‰ø°ÊÅØ
* @return List Â≠¶Áîü‰ø°ÊÅØÈõÜÂêà
*/
List&lt;Student&gt; getStudent01();
</code></pre>
<ol start="2">
<li>ÁºñÂÜôÂØπÂ∫îÁöÑmapperÊñá‰ª∂</li>
</ol>
<pre><code class="language-xml">&lt;!--
ÊåâÊü•ËØ¢ÁªìÊûúÂµåÂ•óÂ§ÑÁêÜ
ÊÄùË∑ØÔºö
1. Áõ¥Êé•Êü•ËØ¢Âá∫ÁªìÊûúÔºåËøõË°åÁªìÊûúÈõÜÁöÑÊò†Â∞Ñ
--&gt;
&lt;select id=&quot;getStudent01&quot; resultMap=&quot;studentInfo01&quot;&gt;
  select s.id, s.name, t.name from student as s, teacher as t where s.tid = t.id
&lt;/select&gt;
&lt;resultMap id=&quot;studentInfo01&quot; type=&quot;Student&quot;&gt;
  &lt;id property=&quot;id&quot; column=&quot;id&quot;/&gt;
  &lt;result property=&quot;name&quot; column=&quot;name&quot;/&gt;
  &lt;!--ÂÖ≥ËÅîÂØπË±°property ÂÖ≥ËÅîÂØπË±°Âú®StudentÂÆû‰ΩìÁ±ª‰∏≠ÁöÑÂ±ûÊÄß--&gt;
  &lt;association property=&quot;teacher&quot; javaType=&quot;Teacher&quot;&gt;
    &lt;result property=&quot;name&quot; column=&quot;name&quot;/&gt;
  &lt;/association&gt;
&lt;/resultMap&gt;
</code></pre>
<ol start="3">
<li>Âéªmybatis-configÊñá‰ª∂‰∏≠Ê≥®ÂÖ•„ÄêÊ≠§Â§ÑÂ∫îËØ•Â§ÑÁêÜËøá‰∫Ü„Äë</li>
<li>ÊµãËØï</li>
</ol>
<pre><code class="language-java">@Test
public void selectAll01() {
    SqlSession sqlSession = MybatisUtils.getSqlSession();
    StudentMapper mapper = sqlSession.getMapper(StudentMapper.class);
    List&lt;Student&gt; students = mapper.getStudent01();
    for (Student student : students) {
        System.out.println(&quot;Â≠¶ÁîüÔºö&quot; + student.getName() + &quot;\t&quot; + &quot;ËÄÅÂ∏àÔºö&quot; + student.getTeacher().getName());
    }
    sqlSession.close();
}
</code></pre>
<p><strong>Â∞èÁªìÔºö</strong><br>
ÊåâÁÖßÊü•ËØ¢ËøõË°åÂµåÂ•óÂ§ÑÁêÜÂ∞±ÂÉèSQL‰∏≠ÁöÑÂ≠êÊü•ËØ¢<br>
ÊåâÁÖßÁªìÊûúËøõË°åÂµåÂ•óÂ§ÑÁêÜÂ∞±ÂÉèSQL‰∏≠ÁöÑËÅîË°®Êü•ËØ¢</p>
<h1 id="11-‰∏ÄÂØπÂ§öÂ§ÑÁêÜ">11. ‰∏ÄÂØπÂ§öÂ§ÑÁêÜ</h1>
<p>‰∏ÄÂØπÂ§öÁöÑÁêÜËß£Ôºö</p>
<ul>
<li>‰∏Ä‰∏™ËÄÅÂ∏àÊã•ÊúâÂ§ö‰∏™Â≠¶Áîü</li>
<li>Â¶ÇÊûúÂØπ‰∫éËÄÅÂ∏àËøôËæπÔºåÂ∞±ÊòØ‰∏Ä‰∏™‰∏ÄÂØπÂ§öÁöÑÁé∞Ë±°ÔºåÂç≥‰ªé‰∏Ä‰∏™ËÄÅÂ∏à‰∏ãÈù¢Êã•Êúâ‰∏ÄÁæ§Â≠¶ÁîüÔºàÈõÜÂêàÔºâÔºÅ</li>
</ul>
<h2 id="111-Êï∞ÊçÆÂ∫ìËÆæËÆ°">11.1 Êï∞ÊçÆÂ∫ìËÆæËÆ°</h2>
<p>‰∏ç‰øÆÊîπ</p>
<h2 id="112-Êê≠Âª∫ÊµãËØïÁéØÂ¢É">11.2 Êê≠Âª∫ÊµãËØïÁéØÂ¢É</h2>
<p>Êää‰∏ä‰∏Ä‰∏™È°πÁõÆÊã∑ËøáÊù•ÔºåÈáçÊñ∞ÂàõÂª∫‰∏Ä‰∏™module</p>
<p>ÂÆû‰ΩìÁ±ª:</p>
<pre><code class="language-java">package com.SolitudeAlma.pojo;

import lombok.Data;

import java.util.List;

/**
 * @author SolitudeAlma
 * @date 2021/8/18
 */
@Data
public class Teacher {
    private int id;
    private String name;
    private List&lt;Student&gt; studentList;
}
</code></pre>
<pre><code class="language-java">package com.SolitudeAlma.pojo;

import lombok.Data;

/**
 * @author SolitudeAlma
 * @date 2021/8/18
 */
@Data
public class Student {
    private int id;
    private String name;
    private int tid;
}
</code></pre>
<h2 id="113-ÊåâÁªìÊûúÂµåÂ•óÂ§ÑÁêÜ">11.3 ÊåâÁªìÊûúÂµåÂ•óÂ§ÑÁêÜ</h2>
<ol>
<li>TeacherMapperÊé•Âè£ÁºñÂÜôÊñπÊ≥ï</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.Teacher;
import lombok.Data;
import org.apache.ibatis.annotations.Param;
import org.apache.ibatis.annotations.Select;

import java.util.List;

/**
 * @author SolitudeAlma
 * @date 2021/8/18
 */
public interface TeacherMapper {
    /**
     * Ëé∑ÂèñÊåáÂÆöÊïôÂ∏à‰ø°ÊÅØÁöÑÂêåÊó∂Ëé∑ÂèñÂÖ∂ÊïôÁöÑÂ≠¶ÁîüÁöÑ‰ø°ÊÅØ
     * @param id ÊïôÂ∏àÂîØ‰∏ÄÊ†áËØÜ
     * @return List ‰ø°ÊÅØÈõÜÂêàÔºåÂåÖÊã¨ÊïôÂ∏àÂèäÊâÄÊïôÂ≠¶Áîü‰ø°ÊÅØ
     */
    List&lt;Teacher&gt; getTeacher(@Param(&quot;tid&quot;) int id);
}
</code></pre>
<ol start="2">
<li>ÁºñÂÜôÊé•Âè£ÂØπÂ∫îÁöÑMapperÈÖçÁΩÆÊñá‰ª∂</li>
</ol>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;mapper namespace=&quot;com.SolitudeAlma.dao.TeacherMapper&quot;&gt;
    &lt;!--
    ÊÄùË∑Ø:
        1. ‰ªéÂ≠¶ÁîüË°®ÂíåËÄÅÂ∏àË°®‰∏≠Êü•Âá∫Â≠¶ÁîüidÔºåÂ≠¶ÁîüÂßìÂêçÔºåËÄÅÂ∏àÂßìÂêç
        2. ÂØπÊü•ËØ¢Âá∫Êù•ÁöÑÊìç‰ΩúÂÅöÁªìÊûúÈõÜÊò†Â∞Ñ
            1. ÈõÜÂêàÁöÑËØùÔºå‰ΩøÁî®collectionÔºÅ
                JavaTypeÂíåofTypeÈÉΩÊòØÁî®Êù•ÊåáÂÆöÂØπË±°Á±ªÂûãÁöÑ
                JavaTypeÊòØÁî®Êù•ÊåáÂÆöpojo‰∏≠Â±ûÊÄßÁöÑÁ±ªÂûã
                ofTypeÊåáÂÆöÁöÑÊòØÊò†Â∞ÑÂà∞listÈõÜÂêàÂ±ûÊÄß‰∏≠pojoÁöÑÁ±ªÂûã„ÄÇ
    --&gt;
    &lt;select id=&quot;getTeacher&quot; resultMap=&quot;teacherInfo&quot;&gt;
        select s.id as sid, s.name as sname, t.id as tid, t.name as tname from student as s, teacher as t where s.tid = t.id and t.id = #{tid};
    &lt;/select&gt;
    &lt;!--
        Â§çÊùÇÁöÑÂ±ûÊÄßÈúÄË¶ÅÂçïÁã¨Â§ÑÁêÜ
        ÂØπË±°Ôºöassociation
        ÈõÜÂêàÔºöcollection
    --&gt;
    &lt;resultMap id=&quot;teacherInfo&quot; type=&quot;Teacher&quot;&gt;
        &lt;result property=&quot;id&quot; column=&quot;tid&quot;/&gt;
        &lt;result property=&quot;name&quot; column=&quot;tname&quot;/&gt;
        &lt;collection  property=&quot;studentList&quot; ofType=&quot;Student&quot;&gt;
            &lt;result property=&quot;id&quot; column=&quot;sid&quot;/&gt;
            &lt;result property=&quot;name&quot; column=&quot;sname&quot;/&gt;
            &lt;result property=&quot;tid&quot; column=&quot;tid&quot;/&gt;
        &lt;/collection &gt;
    &lt;/resultMap&gt;
&lt;/mapper&gt;
</code></pre>
<ol start="3">
<li>Â∞ÜMapperÊñá‰ª∂Ê≥®ÂÜåÂà∞MyBatis-configÊñá‰ª∂‰∏≠</li>
</ol>
<pre><code class="language-xml">&lt;mappers&gt;
  &lt;mapper resource=&quot;com/SolitudeAlma/dao/StudentMapper.xml&quot;/&gt;
  &lt;mapper resource=&quot;com/SolitudeAlma/dao/TeacherMapper.xml&quot;/&gt;
&lt;/mappers&gt;
</code></pre>
<ol start="4">
<li>ÊµãËØï</li>
</ol>
<pre><code class="language-java">import com.SolitudeAlma.dao.TeacherMapper;
import com.SolitudeAlma.pojo.Teacher;
import com.SolitudeAlma.utils.MybatisUtils;
import org.apache.ibatis.session.SqlSession;
import org.junit.Test;

import java.util.List;

/**
 * @author SolitudeAlma
 * @date 2021/8/18
 */
public class MyTest {
    @Test
    public void getTeacher() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        TeacherMapper mapper = sqlSession.getMapper(TeacherMapper.class);
        List&lt;Teacher&gt; teacherList = mapper.getTeacher(1);
        for (Teacher teacher : teacherList) {
            System.out.println(&quot;teacher: &quot; + teacher.getName());
            teacher.getStudentList().forEach(e -&gt; {
                System.out.println(&quot;student&quot; + e.getId() + &quot;: name: &quot; + e.getName() +  &quot; tid: &quot; + e.getTid());
            });
        }
    }
}
</code></pre>
<h2 id="114-ÊåâÊü•ËØ¢ÂµåÂ•óÂ§ÑÁêÜ">11.4 ÊåâÊü•ËØ¢ÂµåÂ•óÂ§ÑÁêÜ</h2>
<ol>
<li>TeacherMapperÊé•Âè£ÁºñÂÜôÊñπÊ≥ï</li>
</ol>
<pre><code class="language-java">/**
* Ëé∑ÂèñÊåáÂÆöÊïôÂ∏à‰ø°ÊÅØÁöÑÂêåÊó∂Ëé∑ÂèñÂÖ∂ÊïôÁöÑÂ≠¶ÁîüÁöÑ‰ø°ÊÅØ
* @param id ÊïôÂ∏àÂîØ‰∏ÄÊ†áËØÜ
* @return List ‰ø°ÊÅØÈõÜÂêàÔºåÂåÖÊã¨ÊïôÂ∏àÂèäÊâÄÊïôÂ≠¶Áîü‰ø°ÊÅØ
*/
List&lt;Teacher&gt; getTeacher01(@Param(&quot;tid&quot;) int id);
</code></pre>
<ol start="2">
<li>ÁºñÂÜôÊé•Âè£ÂØπÂ∫îÁöÑMapperÈÖçÁΩÆÊñá‰ª∂</li>
</ol>
<pre><code class="language-xml">&lt;select id=&quot;getTeacher01&quot; resultMap=&quot;teacherInfo01&quot;&gt;
  select id, name from teacher
  where id = #{tid};
&lt;/select&gt;
&lt;resultMap id=&quot;teacherInfo01&quot; type=&quot;Teacher&quot;&gt;
  &lt;result property=&quot;id&quot; column=&quot;id&quot;/&gt;
  &lt;!--columnÊòØ‰∏ÄÂØπÂ§öÁöÑÂ§ñÈîÆ , ÂÜôÁöÑÊòØ‰∏ÄÁöÑ‰∏ªÈîÆÁöÑÂàóÂêç--&gt;
  &lt;collection property=&quot;studentList&quot; javaType=&quot;List&quot; column=&quot;id&quot; ofType=&quot;Student&quot; select=&quot;getStudentByTeacherId&quot;/&gt;
&lt;/resultMap&gt;
&lt;select id=&quot;getStudentByTeacherId&quot; resultType=&quot;Student&quot;&gt;
  select id, name, tid from student
  where tid = #{tid};
&lt;/select&gt;
</code></pre>
<ol start="3">
<li>Â∞ÜMapperÊñá‰ª∂Ê≥®ÂÜåÂà∞MyBatis-configÊñá‰ª∂‰∏≠</li>
<li>ÊµãËØï</li>
</ol>
<pre><code class="language-java">@Test
public void getTeacher01() {
    SqlSession sqlSession = MybatisUtils.getSqlSession();
    TeacherMapper mapper = sqlSession.getMapper(TeacherMapper.class);
    List&lt;Teacher&gt; teacherList = mapper.getTeacher01(1);
    for (Teacher teacher : teacherList) {
        System.out.println(&quot;teacher: name: &quot; + teacher.getName() + &quot; id: &quot; + teacher.getId());
        teacher.getStudentList().forEach(e -&gt; {
            System.out.println(&quot;student&quot; + e.getId() + &quot;: name: &quot; + e.getName() +  &quot; tid: &quot; + e.getTid());
        });
    }
}
</code></pre>
<p><strong>Â∞èÁªìÔºö</strong></p>
<ol>
<li>ÂÖ≥ËÅî-association</li>
<li>ÈõÜÂêà-collection</li>
<li>ÊâÄ‰ª•associationÊòØÁî®‰∫é‰∏ÄÂØπ‰∏ÄÂíåÂ§öÂØπ‰∏ÄÔºåËÄåcollectionÊòØÁî®‰∫é‰∏ÄÂØπÂ§öÁöÑÂÖ≥Á≥ª</li>
<li>JavaTypeÂíåofTypeÈÉΩÊòØÁî®Êù•ÊåáÂÆöÂØπË±°Á±ªÂûãÁöÑ</li>
</ol>
<ul>
<li>JavaTypeÊòØÁî®Êù•ÊåáÂÆöpojo‰∏≠Â±ûÊÄßÁöÑÁ±ªÂûã</li>
<li>ofTypeÊåáÂÆöÁöÑÊòØÊò†Â∞ÑÂà∞listÈõÜÂêàÂ±ûÊÄß‰∏≠pojoÁöÑÁ±ªÂûã„ÄÇ</li>
</ul>
<p><strong>Ê≥®ÊÑèËØ¥ÊòéÔºö</strong></p>
<ol>
<li>‰øùËØÅSQLÁöÑÂèØËØªÊÄßÔºåÂ∞ΩÈáèÈÄö‰øóÊòìÊáÇ</li>
<li>Ê†πÊçÆÂÆûÈôÖË¶ÅÊ±ÇÔºåÂ∞ΩÈáèÁºñÂÜôÊÄßËÉΩÊõ¥È´òÁöÑSQLËØ≠Âè•</li>
<li>Ê≥®ÊÑèÂ±ûÊÄßÂêçÂíåÂ≠óÊÆµ‰∏ç‰∏ÄËá¥ÁöÑÈóÆÈ¢ò</li>
<li>Ê≥®ÊÑè‰∏ÄÂØπÂ§öÂíåÂ§öÂØπ‰∏Ä ‰∏≠ÔºöÂ≠óÊÆµÂíåÂ±ûÊÄßÂØπÂ∫îÁöÑÈóÆÈ¢ò</li>
<li>Â∞ΩÈáè‰ΩøÁî®Log4jÔºåÈÄöËøáÊó•ÂøóÊù•Êü•ÁúãËá™Â∑±ÁöÑÈîôËØØ</li>
</ol>
<h1 id="12-Âä®ÊÄÅsql">12. Âä®ÊÄÅSQL</h1>
<h2 id="121-‰ªãÁªç">12.1 ‰ªãÁªç</h2>
<p>‰ªÄ‰πàÊòØÂä®ÊÄÅSQLÔºö<strong>Âä®ÊÄÅSQLÊåáÁöÑÊòØÊ†πÊçÆ‰∏çÂêåÁöÑÊü•ËØ¢Êù°‰ª∂ , ÁîüÊàê‰∏çÂêåÁöÑSqlËØ≠Âè•.</strong></p>
<blockquote>
<p>ÂÆòÁΩëÊèèËø∞Ôºö<br>
MyBatis ÁöÑÂº∫Â§ßÁâπÊÄß‰πã‰∏Ä‰æøÊòØÂÆÉÁöÑÂä®ÊÄÅ SQL„ÄÇÂ¶ÇÊûú‰Ω†Êúâ‰ΩøÁî® JDBC ÊàñÂÖ∂ÂÆÉÁ±ª‰ººÊ°ÜÊû∂ÁöÑÁªèÈ™åÔºå‰Ω†Â∞±ËÉΩ‰Ωì‰ºöÂà∞Ê†πÊçÆ‰∏çÂêåÊù°‰ª∂ÊãºÊé• SQL ËØ≠Âè•ÁöÑÁóõËã¶„ÄÇ‰æãÂ¶ÇÊãºÊé•Êó∂Ë¶ÅÁ°Æ‰øù‰∏çËÉΩÂøòËÆ∞Ê∑ªÂä†ÂøÖË¶ÅÁöÑÁ©∫Ê†ºÔºåËøòË¶ÅÊ≥®ÊÑèÂéªÊéâÂàóË°®ÊúÄÂêé‰∏Ä‰∏™ÂàóÂêçÁöÑÈÄóÂè∑„ÄÇÂà©Áî®Âä®ÊÄÅ SQL Ëøô‰∏ÄÁâπÊÄßÂèØ‰ª•ÂΩªÂ∫ïÊëÜËÑ±ËøôÁßçÁóõËã¶„ÄÇ<br>
ËôΩÁÑ∂Âú®‰ª•Ââç‰ΩøÁî®Âä®ÊÄÅ SQL Âπ∂Èùû‰∏Ä‰ª∂Êòì‰∫ãÔºå‰ΩÜÊ≠£ÊòØ MyBatis Êèê‰æõ‰∫ÜÂèØ‰ª•Ë¢´Áî®Âú®‰ªªÊÑè SQL Êò†Â∞ÑËØ≠Âè•‰∏≠ÁöÑÂº∫Â§ßÁöÑÂä®ÊÄÅ SQL ËØ≠Ë®ÄÂæó‰ª•ÊîπËøõËøôÁßçÊÉÖÂΩ¢„ÄÇ<br>
Âä®ÊÄÅ SQL ÂÖÉÁ¥†Âíå JSTL ÊàñÂü∫‰∫éÁ±ª‰ºº XML ÁöÑÊñáÊú¨Â§ÑÁêÜÂô®Áõ∏‰ºº„ÄÇÂú® MyBatis ‰πãÂâçÁöÑÁâàÊú¨‰∏≠ÔºåÊúâÂæàÂ§öÂÖÉÁ¥†ÈúÄË¶ÅËä±Êó∂Èó¥‰∫ÜËß£„ÄÇMyBatis 3 Â§ßÂ§ßÁ≤æÁÆÄ‰∫ÜÂÖÉÁ¥†ÁßçÁ±ªÔºåÁé∞Âú®Âè™ÈúÄÂ≠¶‰π†ÂéüÊù•‰∏ÄÂçäÁöÑÂÖÉÁ¥†‰æøÂèØ„ÄÇMyBatis ÈááÁî®ÂäüËÉΩÂº∫Â§ßÁöÑÂü∫‰∫é OGNL ÁöÑË°®ËææÂºèÊù•Ê∑òÊ±∞ÂÖ∂ÂÆÉÂ§ßÈÉ®ÂàÜÂÖÉÁ¥†„ÄÇ</p>
</blockquote>
<hr>
<ul>
<li>if</li>
<li>choose (when, otherwise)</li>
<li>trim (where, set)</li>
<li>foreach</li>
</ul>
<hr>
<p>Êàë‰ª¨‰πãÂâçÂÜôÁöÑ SQL ËØ≠Âè•ÈÉΩÊØîËæÉÁÆÄÂçïÔºåÂ¶ÇÊûúÊúâÊØîËæÉÂ§çÊùÇÁöÑ‰∏öÂä°ÔºåÊàë‰ª¨ÈúÄË¶ÅÂÜôÂ§çÊùÇÁöÑ SQL ËØ≠Âè•ÔºåÂæÄÂæÄÈúÄË¶ÅÊãºÊé•ÔºåËÄåÊãºÊé• SQL ÔºåÁ®çÂæÆ‰∏çÊ≥®ÊÑèÔºåÁî±‰∫éÂºïÂè∑ÔºåÁ©∫Ê†ºÁ≠âÁº∫Â§±ÂèØËÉΩÈÉΩ‰ºöÂØºËá¥ÈîôËØØ„ÄÇ<br>
ÈÇ£‰πàÊÄé‰πàÂéªËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÂë¢ÔºüËøôÂ∞±Ë¶Å‰ΩøÁî® mybatis Âä®ÊÄÅSQLÔºåÈÄöËøá if, choose, when, otherwise, trim, where, set, foreachÁ≠âÊ†áÁ≠æÔºåÂèØÁªÑÂêàÊàêÈùûÂ∏∏ÁÅµÊ¥ªÁöÑSQLËØ≠Âè•Ôºå‰ªéËÄåÂú®ÊèêÈ´ò SQL ËØ≠Âè•ÁöÑÂáÜÁ°ÆÊÄßÁöÑÂêåÊó∂Ôºå‰πüÂ§ßÂ§ßÊèêÈ´ò‰∫ÜÂºÄÂèë‰∫∫ÂëòÁöÑÊïàÁéá„ÄÇ</p>
<h2 id="122-Êê≠Âª∫ÁéØÂ¢É">12.2 Êê≠Âª∫ÁéØÂ¢É</h2>
<p><strong>Êñ∞Âª∫‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìË°®Ôºöblog</strong><br>
Â≠óÊÆµÔºöidÔºåtitleÔºåauthorÔºåcreate_timeÔºåviews</p>
<pre><code class="language-sql">CREATE TABLE `blog` (
`id` varchar(50) NOT NULL COMMENT 'ÂçöÂÆ¢id',
`title` varchar(100) NOT NULL COMMENT 'ÂçöÂÆ¢Ê†áÈ¢ò',
`author` varchar(30) NOT NULL COMMENT 'ÂçöÂÆ¢‰ΩúËÄÖ',
`create_time` datetime NOT NULL COMMENT 'ÂàõÂª∫Êó∂Èó¥',
`views` int(30) NOT NULL COMMENT 'ÊµèËßàÈáè'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
</code></pre>
<ol>
<li>
<p>ÂàõÂª∫MybatisÂü∫Á°ÄÂ∑•Á®ã<br>
<img src="https://cdn.nlark.com/yuque/0/2021/png/22045814/1629355404544-0a21636f-5f2d-40af-9009-85c4e5b9ba8a.png#clientId=u35d2d825-d4a0-4&amp;from=paste&amp;height=161&amp;id=ue903d042&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=322&amp;originWidth=484&amp;originalType=binary&amp;ratio=1&amp;size=24006&amp;status=done&amp;style=none&amp;taskId=ud67e234e-d148-439e-82fe-b8534ea8774&amp;width=242" alt="image.png" loading="lazy"></p>
</li>
<li>
<p>IDutilÂ∑•ÂÖ∑Á±ª</p>
</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.utils;

import org.junit.Test;

import java.util.UUID;

/**
 * Â¶ÇÊûúÊÉ≥Âú®ÈùûtestÁõÆÂΩï‰∏ãÊµãËØïÔºåÊää‰æùËµñÁöÑ‰ΩúÁî®ÂüüÊîπ‰∏Ä‰∏ãÊàñËÄÖÂéªÊéâ
 * @author SolitudeAlma
 * @date 2021/8/19
 */
public class IDUtils {
    public static String getId() {
        return UUID.randomUUID().toString().replaceAll(&quot;-&quot;, &quot;&quot;);
    }
}
</code></pre>
<ol start="3">
<li>ÂÆû‰ΩìÁ±ªÁºñÂÜô  „ÄêÊ≥®ÊÑèsetÊñπÊ≥ï‰ΩúÁî®„Äë</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.pojo;

import lombok.Data;

import java.util.Date;

/**
 * @author SolitudeAlma
 * @date 2021/8/19
 */
@Data
public class Blog {
    private String id;
    private String title;
    private String author;
    private Date createTime;
    private int views;
}
</code></pre>
<ol start="4">
<li>ÁºñÂÜôMapperÊé•Âè£ÂèäxmlÊñá‰ª∂</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.dao;

/**
 * @author SolitudeAlma
 * @date 2021/8/19
 */
public interface BlogMapper {
}
</code></pre>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;mapper namespace=&quot;com.SolitudeAlma.dao.BlogMapper&quot;&gt;

&lt;/mapper&gt;
</code></pre>
<ol start="5">
<li>mybatisÊ†∏ÂøÉÈÖçÁΩÆÊñá‰ª∂Ôºå‰∏ãÂàíÁ∫øÈ©ºÂ≥∞Ëá™Âä®ËΩ¨Êç¢</li>
</ol>
<pre><code class="language-xml">&lt;settings&gt;
  &lt;!--ÊòØÂê¶ÂºÄÂêØÈ©ºÂ≥∞ÂëΩÂêçËá™Âä®Êò†Â∞ÑÔºåÂç≥‰ªéÁªèÂÖ∏Êï∞ÊçÆÂ∫ìÂàóÂêç A_COLUMN Êò†Â∞ÑÂà∞ÁªèÂÖ∏ Java Â±ûÊÄßÂêç aColumn„ÄÇ--&gt;
  &lt;setting name=&quot;logImpl&quot; value=&quot;STDOUT_LOGGING&quot;/&gt;
  &lt;setting name=&quot;mapUnderscoreToCamelCase&quot; value=&quot;true&quot;/&gt;
&lt;/settings&gt;
&lt;mappers&gt;
  &lt;mapper resource=&quot;com/SolitudeAlma/dao/BlogMapper.xml&quot;/&gt;
&lt;/mappers&gt;
</code></pre>
<ol start="6">
<li>ÊèíÂÖ•ÂàùÂßãÊï∞ÊçÆ<br>
ÁºñÂÜôÊé•Âè£</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.Blog;

/**
 * @author SolitudeAlma
 * @date 2021/8/19
 */
public interface BlogMapper {
    /**
     * Ê∑ªÂä†‰∏ÄÁØáÊñáÁ´†
     * @param blog ÊñáÁ´†Á±ª
     * @return SQLÊâßË°åÁªìÊûúÔºåÂΩ±Âìç‰∫ÜÂá†Ë°å
     */
    int addArticle(Blog blog);
}
</code></pre>
<p>sqlÈÖçÁΩÆÊñá‰ª∂</p>
<pre><code class="language-xml">&lt;insert id=&quot;addArticle&quot; parameterType=&quot;Blog&quot;&gt;
  insert into blog(`id`, `title`, `author`, `create_time`, `views`)
  values (#{id}, #{title}, #{author}, #{createTime}, #{views});
&lt;/insert&gt;
</code></pre>
<p>ÊµãËØï</p>
<pre><code class="language-java">@Test
public void addArticleTest() throws ParseException {
    String strDateFormat = &quot;yyyy-MM-dd HH:mm:ss&quot;;
    SqlSession sqlSession = MybatisUtils.getSqlSession();
    BlogMapper mapper = sqlSession.getMapper(BlogMapper.class);
    SimpleDateFormat dateFormat = new SimpleDateFormat(strDateFormat);

    Blog blog = new Blog();
    blog.setId(IDUtils.getId());
    blog.setTitle(&quot;MybatisÂ¶ÇÊ≠§ÁÆÄÂçï&quot;);
    blog.setAuthor(&quot;SolitudeAlma&quot;);
    blog.setCreateTime(dateFormat.format(new Date()));
    blog.setViews(23333);
    int result = mapper.addArticle(blog);
    System.out.println(result);

    blog.setId(IDUtils.getId());
    blog.setTitle(&quot;JavaÂ¶ÇÊ≠§ÁÆÄÂçï&quot;);
    blog.setCreateTime(dateFormat.format(new Date()));
    result = mapper.addArticle(blog);
    System.out.println(result);

    blog.setId(IDUtils.getId());
    blog.setTitle(&quot;ÂæÆÊúçÂä°Â¶ÇÊ≠§ÁÆÄÂçï&quot;);
    blog.setCreateTime(dateFormat.format(new Date()));
    result = mapper.addArticle(blog);
    System.out.println(result);

    blog.setId(IDUtils.getId());
    blog.setTitle(&quot;SpringÂ¶ÇÊ≠§ÁÆÄÂçï&quot;);
    blog.setCreateTime(dateFormat.format(new Date()));
    result = mapper.addArticle(blog);
    System.out.println(result);

    sqlSession.close();
}
</code></pre>
<p>ÂàùÂßãÂåñÊï∞ÊçÆÂÆåÊØïÔºÅ</p>
<h2 id="123-if">12.3 IF</h2>
<p><strong>ÈúÄÊ±ÇÔºöÊ†πÊçÆ‰ΩúËÄÖÂêçÂ≠óÂíåÂçöÂÆ¢ÂêçÂ≠óÊù•Êü•ËØ¢ÂçöÂÆ¢ÔºÅÂ¶ÇÊûú‰ΩúËÄÖÂêçÂ≠ó‰∏∫Á©∫ÔºåÈÇ£‰πàÂè™Ê†πÊçÆÂçöÂÆ¢ÂêçÂ≠óÊü•ËØ¢ÔºåÂèç‰πãÔºåÂàôÊ†πÊçÆ‰ΩúËÄÖÂêçÊù•Êü•ËØ¢</strong></p>
<ol>
<li>ÁºñÂÜôÊé•Âè£Á±ª</li>
</ol>
<pre><code class="language-java">/**
* Êü•ËØ¢ÊñáÁ´†‰ø°ÊÅØÔºåÂπ∂Ê†πÊçÆifËØ≠Âè•Ëøõ‰∏ÄÊ≠•Êü•ËØ¢
* @param map Êü•ËØ¢Êù°‰ª∂ÈõÜÂêà
* @return List ÊñáÁ´†‰ø°ÊÅØÈõÜÂêà
*/
List&lt;Blog&gt; queryArticleIf(Map&lt;String, Object&gt; map);
</code></pre>
<ol start="2">
<li>ÁºñÂÜôSQLËØ≠Âè•</li>
</ol>
<pre><code class="language-xml">&lt;!--
ÈúÄÊ±Ç1Ôºö
	   Ê†πÊçÆ‰ΩúËÄÖÂêçÂ≠óÂíåÂçöÂÆ¢ÂêçÂ≠óÊù•Êü•ËØ¢ÂçöÂÆ¢ÔºÅ
		 Â¶ÇÊûú‰ΩúËÄÖÂêçÂ≠ó‰∏∫Á©∫ÔºåÈÇ£‰πàÂè™Ê†πÊçÆÂçöÂÆ¢ÂêçÂ≠óÊü•ËØ¢ÔºåÂèç‰πãÔºåÂàôÊ†πÊçÆ‰ΩúËÄÖÂêçÊù•Êü•ËØ¢
     select * from blog where title = #{title} and author = #{author}
--&gt;
&lt;select id=&quot;queryArticleIf&quot; parameterType=&quot;map&quot; resultType=&quot;Blog&quot;&gt;
  select * from blog where
  &lt;if test=&quot;title != null&quot;&gt;
    title = #{title}
  &lt;/if&gt;
  &lt;if test=&quot;author != null&quot;&gt;
    and author = #{author}
  &lt;/if&gt;
&lt;/select&gt;
</code></pre>
<ol start="3">
<li>ÊµãËØï</li>
</ol>
<pre><code class="language-java">@Test
public void queryArticleIfTest() {
    SqlSession sqlSession = MybatisUtils.getSqlSession();
    BlogMapper mapper = sqlSession.getMapper(BlogMapper.class);
    Map&lt;String, Object&gt;map = new HashMap&lt;&gt;();
    //map.put(&quot;title&quot;, &quot;MybatisÂ¶ÇÊ≠§ÁÆÄÂçï&quot;);
    map.put(&quot;author&quot;, &quot;SolitudeAlma&quot;);
    List&lt;Blog&gt; blogs = mapper.queryArticleIf(map);
    for (Blog blog : blogs) {
        System.out.println(blog);
    }
    sqlSession.close();
}
</code></pre>
<p>ËøôÊ†∑ÂÜôÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ÔºåÂ¶ÇÊûú author Á≠â‰∫é nullÔºåÈÇ£‰πàÊü•ËØ¢ËØ≠Âè•‰∏∫ select * from user where title=#{title},‰ΩÜÊòØÂ¶ÇÊûútitle‰∏∫Á©∫Âë¢ÔºüÈÇ£‰πàÊü•ËØ¢ËØ≠Âè•‰∏∫ select * from user where and author=#{author}ÔºåËøôÊòØÈîôËØØÁöÑ SQL ËØ≠Âè•ÔºåÂ¶Ç‰ΩïËß£ÂÜ≥Âë¢ÔºüËØ∑Áúã‰∏ãÈù¢ÁöÑ where ËØ≠Âè•ÔºÅ</p>
<h2 id="124-where">12.4 WHERE</h2>
<p>‰øÆÊîπ‰∏äÈù¢ÁöÑSQLËØ≠Âè•Ôºö</p>
<pre><code class="language-xml">&lt;!--
ÈúÄÊ±Ç1Ôºö
     Ê†πÊçÆ‰ΩúËÄÖÂêçÂ≠óÂíåÂçöÂÆ¢ÂêçÂ≠óÊù•Êü•ËØ¢ÂçöÂÆ¢ÔºÅ
     Â¶ÇÊûú‰ΩúËÄÖÂêçÂ≠ó‰∏∫Á©∫ÔºåÈÇ£‰πàÂè™Ê†πÊçÆÂçöÂÆ¢ÂêçÂ≠óÊü•ËØ¢ÔºåÂèç‰πãÔºåÂàôÊ†πÊçÆ‰ΩúËÄÖÂêçÊù•Êü•ËØ¢
     select * from blog where title = #{title} and author = #{author}
--&gt;
&lt;select id=&quot;queryArticleIf&quot; parameterType=&quot;map&quot; resultType=&quot;Blog&quot;&gt;
  &lt;!--select * from blog where--&gt;
  &lt;!--&lt;if test=&quot;title != null&quot;&gt;--&gt;
  &lt;!--    title = #{title}--&gt;
  &lt;!--&lt;/if&gt;--&gt;
  &lt;!--&lt;if test=&quot;author != null&quot;&gt;--&gt;
  &lt;!--    and author = #{author}--&gt;
  &lt;!--&lt;/if&gt;--&gt;
  select * from blog
  &lt;where&gt;
    &lt;if test=&quot;title != null&quot;&gt;
      title = #{title}
    &lt;/if&gt;
    &lt;if test=&quot;author != null&quot;&gt;
      and author = #{author}
    &lt;/if&gt;
  &lt;/where&gt;
&lt;/select&gt;
</code></pre>
<p>Ëøô‰∏™‚Äúwhere‚ÄùÊ†áÁ≠æ‰ºöÁü•ÈÅìÂ¶ÇÊûúÂÆÉÂåÖÂê´ÁöÑÊ†áÁ≠æ‰∏≠ÊúâËøîÂõûÂÄºÁöÑËØùÔºåÂÆÉÂ∞±ÊèíÂÖ•‰∏Ä‰∏™‚Äòwhere‚Äô„ÄÇÊ≠§Â§ñÔºåÂ¶ÇÊûúÊ†áÁ≠æËøîÂõûÁöÑÂÜÖÂÆπÊòØ‰ª•AND ÊàñOR ÂºÄÂ§¥ÁöÑÔºåÂàôÂÆÉ‰ºöÂâîÈô§Êéâ„ÄÇ</p>
<h2 id="125-choose-when-otherwise">12.5 choose (when, otherwise)</h2>
<p>ÊúâÊó∂ÂÄôÔºåÊàë‰ª¨‰∏çÊÉ≥Áî®Âà∞ÊâÄÊúâÁöÑÊü•ËØ¢Êù°‰ª∂ÔºåÂè™ÊÉ≥ÈÄâÊã©ÂÖ∂‰∏≠ÁöÑ‰∏Ä‰∏™ÔºåÊü•ËØ¢Êù°‰ª∂Êúâ‰∏Ä‰∏™Êª°Ë∂≥Âç≥ÂèØÔºå‰ΩøÁî® choose Ê†áÁ≠æÂèØ‰ª•Ëß£ÂÜ≥Ê≠§Á±ªÈóÆÈ¢òÔºåÁ±ª‰ºº‰∫é Java ÁöÑ switch ËØ≠Âè•‚Äã</p>
<ol>
<li>ÁºñÂÜôÊé•Âè£ÊñπÊ≥ï</li>
</ol>
<pre><code class="language-java">/**
* Êü•ËØ¢ÊñáÁ´†‰ø°ÊÅØÔºåÂπ∂Ê†πÊçÆchooseËØ≠Âè•Ëøõ‰∏ÄÊ≠•Êü•ËØ¢
* @param map Êü•ËØ¢Êù°‰ª∂ÈõÜÂêà
* @return List ÊñáÁ´†‰ø°ÊÅØÈõÜÂêà
*/
List&lt;Blog&gt; queryBlogChoose(Map&lt;String, Object&gt; map);
</code></pre>
<ol start="2">
<li>sqlÈÖçÁΩÆÊñá‰ª∂</li>
</ol>
<pre><code class="language-xml">&lt;!--Ê†πÊçÆÊú™ÊãºÊé•ÁöÑsqlÂÜ≥ÂÆöÊòØÂê¶ÂµåÂ•ó‰∏Ä‰∏™whereÊ†áÁ≠æ--&gt;
&lt;select id=&quot;queryBlogChoose&quot; parameterType=&quot;map&quot; resultType=&quot;Blog&quot;&gt;
  select * from blog
  &lt;where&gt;
    &lt;choose&gt;
      &lt;when test=&quot;title != null&quot;&gt;
        title = #{title}
      &lt;/when&gt;
      &lt;when test=&quot;author != null&quot;&gt;
        and author = #{author}
      &lt;/when&gt;
      &lt;otherwise&gt;
        and views = #{views}
      &lt;/otherwise&gt;
    &lt;/choose&gt;
  &lt;/where&gt;
&lt;/select&gt;
</code></pre>
<ol start="3">
<li>ÊµãËØïÁ±ª</li>
</ol>
<pre><code class="language-java">@Test
public void queryBlogChooseTest() {
    SqlSession sqlSession = MybatisUtils.getSqlSession();
    BlogMapper mapper = sqlSession.getMapper(BlogMapper.class);
    Map&lt;String, Object&gt;map = new HashMap&lt;&gt;();
    map.put(&quot;views&quot;, &quot;23333&quot;);
    List&lt;Blog&gt; blogs = mapper.queryBlogChoose(map);
    for (Blog blog : blogs) {
        System.out.println(blog);
    }
    sqlSession.close();
}
</code></pre>
<h2 id="126-set">12.6 set</h2>
<p>ÂêåÁêÜÔºå‰∏äÈù¢ÁöÑÂØπ‰∫éÊü•ËØ¢ SQL ËØ≠Âè•ÂåÖÂê´ where ÂÖ≥ÈîÆÂ≠óÔºåÂ¶ÇÊûúÂú®ËøõË°åÊõ¥Êñ∞Êìç‰ΩúÁöÑÊó∂ÂÄôÔºåÂê´Êúâ set ÂÖ≥ÈîÆËØçÔºåÊàë‰ª¨ÊÄé‰πàÂ§ÑÁêÜÂë¢Ôºü<br>
SETÂÖÉÁ¥†‰ºöÂä®ÊÄÅÂú∞Âú®Ë°åÈ¶ñÊèíÂÖ• SET ÂÖ≥ÈîÆÂ≠óÔºåÂπ∂‰ºöÂà†ÊéâÈ¢ùÂ§ñÁöÑÈÄóÂè∑ÔºàËøô‰∫õÈÄóÂè∑ÊòØÂú®‰ΩøÁî®Êù°‰ª∂ËØ≠Âè•ÁªôÂàóËµãÂÄºÊó∂ÂºïÂÖ•ÁöÑÔºâ„ÄÇ</p>
<ol>
<li>ÁºñÂÜôÊé•Âè£ÊñπÊ≥ï</li>
</ol>
<pre><code class="language-java">/**
* ‰øÆÊîπÊñáÁ´†‰ø°ÊÅØÔºåÂπ∂Ê†πÊçÆtrimËØ≠Âè•Âä®ÊÄÅ‰øÆÊîπ
* @param map Êü•ËØ¢Êù°‰ª∂ÈõÜÂêà
* @return SQLÊâßË°åÁªìÊûúÔºåÂΩ±Âìç‰∫ÜÂá†Ë°å
*/
int updateArticle(Map&lt;String, Object&gt; map);
</code></pre>
<ol start="2">
<li>sqlÈÖçÁΩÆÊñá‰ª∂</li>
</ol>
<pre><code class="language-xml">&lt;!--Ê≥®ÊÑèsetÊòØÁî®ÁöÑÈÄóÂè∑ÈöîÂºÄ--&gt;
&lt;update id=&quot;updateArticle&quot; parameterType=&quot;map&quot; &gt;
  update blog
  &lt;set&gt;
    &lt;if test=&quot;title != null&quot;&gt;
      title=#{title},
    &lt;/if&gt;
    &lt;if test=&quot;author != null&quot;&gt;
      author=#{author}
    &lt;/if&gt;
  &lt;/set&gt;
  where id =#{id}
&lt;/update&gt;
</code></pre>
<ol start="3">
<li>ÊµãËØï</li>
</ol>
<pre><code class="language-java">@Test
public void updateArticleTest() {
    SqlSession sqlSession = MybatisUtils.getSqlSession();
    BlogMapper mapper = sqlSession.getMapper(BlogMapper.class);
    Map&lt;String, Object&gt;map = new HashMap&lt;&gt;();
    map.put(&quot;id&quot;, &quot;de27dc043af84946b008ff6ce3b866d1&quot;);
    map.put(&quot;title&quot;, &quot;MybatisÂ¶ÇÊ≠§ÁÆÄÂçï01&quot;);
    int i = mapper.updateArticle(map);
    System.out.println(i);
    sqlSession.close();
}
</code></pre>
<h2 id="127-trim-where-set">12.7 trim (where, set)</h2>
<pre><code class="language-xml">&lt;trim prefix=&quot;WHERE&quot; prefixOverrides=&quot;AND |OR &quot;&gt;
  ...
&lt;/trim&gt;
</code></pre>
<p><em>prefixOverrides</em> Â±ûÊÄß‰ºöÂøΩÁï•ÈÄöËøáÁÆ°ÈÅìÁ¨¶ÂàÜÈöîÁöÑÊñáÊú¨Â∫èÂàóÔºàÊ≥®ÊÑèÊ≠§‰æã‰∏≠ÁöÑÁ©∫Ê†ºÊòØÂøÖË¶ÅÁöÑÔºâ„ÄÇ‰∏äËø∞‰æãÂ≠ê‰ºöÁßªÈô§ÊâÄÊúâ <em>prefixOverrides</em> Â±ûÊÄß‰∏≠ÊåáÂÆöÁöÑÂÜÖÂÆπÔºåÂπ∂‰∏îÊèíÂÖ• <em>prefix</em> Â±ûÊÄß‰∏≠ÊåáÂÆöÁöÑÂÜÖÂÆπ„ÄÇ<br>
Áî®‰∫éÂä®ÊÄÅÊõ¥Êñ∞ËØ≠Âè•ÁöÑÁ±ª‰ººËß£ÂÜ≥ÊñπÊ°àÂè´ÂÅö <em>set</em>„ÄÇ<em>set</em> ÂÖÉÁ¥†ÂèØ‰ª•Áî®‰∫éÂä®ÊÄÅÂåÖÂê´ÈúÄË¶ÅÊõ¥Êñ∞ÁöÑÂàóÔºåÂøΩÁï•ÂÖ∂ÂÆÉ‰∏çÊõ¥Êñ∞ÁöÑÂàó„ÄÇÊØîÂ¶ÇÔºö</p>
<pre><code class="language-xml">&lt;update id=&quot;updateAuthorIfNecessary&quot;&gt;
  update Author
    &lt;set&gt;
      &lt;if test=&quot;username != null&quot;&gt;username=#{username},&lt;/if&gt;
      &lt;if test=&quot;password != null&quot;&gt;password=#{password},&lt;/if&gt;
      &lt;if test=&quot;email != null&quot;&gt;email=#{email},&lt;/if&gt;
      &lt;if test=&quot;bio != null&quot;&gt;bio=#{bio}&lt;/if&gt;
    &lt;/set&gt;
  where id=#{id}
&lt;/update&gt;
</code></pre>
<p>Ëøô‰∏™‰æãÂ≠ê‰∏≠Ôºå<em>set</em> ÂÖÉÁ¥†‰ºöÂä®ÊÄÅÂú∞Âú®Ë°åÈ¶ñÊèíÂÖ• SET ÂÖ≥ÈîÆÂ≠óÔºåÂπ∂‰ºöÂà†ÊéâÈ¢ùÂ§ñÁöÑÈÄóÂè∑ÔºàËøô‰∫õÈÄóÂè∑ÊòØÂú®‰ΩøÁî®Êù°‰ª∂ËØ≠Âè•ÁªôÂàóËµãÂÄºÊó∂ÂºïÂÖ•ÁöÑÔºâ„ÄÇ<br>
Êù•ÁúãÁúã‰∏é <em>set</em> ÂÖÉÁ¥†Á≠â‰ª∑ÁöÑËá™ÂÆö‰πâ <em>trim</em> ÂÖÉÁ¥†ÂêßÔºö</p>
<pre><code class="language-xml">&lt;trim prefix=&quot;SET&quot; suffixOverrides=&quot;,&quot;&gt;
  ...
&lt;/trim&gt;
</code></pre>
<p>Ê≥®ÊÑèÔºåÊàë‰ª¨Ë¶ÜÁõñ‰∫ÜÂêéÁºÄÂÄºËÆæÁΩÆÔºåÂπ∂‰∏îËá™ÂÆö‰πâ‰∫ÜÂâçÁºÄÂÄº„ÄÇ‚Äã</p>
<p>ËøôÈÉ®ÂàÜÁõ∏ÂΩì‰∫éÊâ©Â±ïÂäüËÉΩÔºåÈúÄË¶ÅÁöÑËá™Â∑±ÂÆûË∑µÔºåÊâÄ‰ª•Â∞±Áõ¥Êé•Êê¨ÊñáÊ°£‰∫Ü</p>
<h2 id="128-sqlÁâáÊÆµ">12.8 SQLÁâáÊÆµ</h2>
<p>ÊúâÊó∂ÂÄôÂèØËÉΩÊüê‰∏™ sql ËØ≠Âè•Êàë‰ª¨Áî®ÁöÑÁâπÂà´Â§öÔºå‰∏∫‰∫ÜÂ¢ûÂä†‰ª£Á†ÅÁöÑÂ§çÁî®ÊÄßÔºåÁÆÄÂåñ‰ª£Á†ÅÔºåÊàë‰ª¨ÈúÄË¶ÅÂ∞ÜËøô‰∫õ‰ª£Á†ÅÊäΩÂèñÂá∫Êù•ÔºåÁÑ∂Âêé‰ΩøÁî®Êó∂Áõ¥Êé•Ë∞ÉÁî®„ÄÇ</p>
<p><strong>ÊèêÂèñSQLÁâáÊÆµÔºö</strong></p>
<pre><code class="language-xml">&lt;sql id=&quot;if-title-author&quot;&gt;
  &lt;if test=&quot;title != null&quot;&gt;
    title = #{title}
  &lt;/if&gt;
  &lt;if test=&quot;author != null&quot;&gt;
    and author = #{author}
  &lt;/if&gt;
&lt;/sql&gt;
</code></pre>
<p><strong>ÂºïÁî®SQLÁâáÊÆµÔºö</strong></p>
<pre><code class="language-xml">&lt;select id=&quot;queryArticleIf&quot; parameterType=&quot;map&quot; resultType=&quot;Blog&quot;&gt;
  &lt;!--select * from blog where--&gt;
  &lt;!--&lt;if test=&quot;title != null&quot;&gt;--&gt;
  &lt;!--    title = #{title}--&gt;
  &lt;!--&lt;/if&gt;--&gt;
  &lt;!--&lt;if test=&quot;author != null&quot;&gt;--&gt;
  &lt;!--    and author = #{author}--&gt;
  &lt;!--&lt;/if&gt;--&gt;
  &lt;!--select * from blog--&gt;
  &lt;!--&lt;where&gt;--&gt;
  &lt;!--    &lt;if test=&quot;title != null&quot;&gt;--&gt;
  &lt;!--        title = #{title}--&gt;
  &lt;!--    &lt;/if&gt;--&gt;
  &lt;!--    &lt;if test=&quot;author != null&quot;&gt;--&gt;
  &lt;!--        and author = #{author}--&gt;
  &lt;!--    &lt;/if&gt;--&gt;
  &lt;!--&lt;/where&gt;--&gt;
  select * from blog
  &lt;where&gt;
    &lt;!-- ÂºïÁî® sql ÁâáÊÆµÔºåÂ¶ÇÊûúrefid ÊåáÂÆöÁöÑ‰∏çÂú®Êú¨Êñá‰ª∂‰∏≠ÔºåÈÇ£‰πàÈúÄË¶ÅÂú®ÂâçÈù¢Âä†‰∏ä namespace --&gt;
    &lt;include refid=&quot;if-title-author&quot;/&gt;
    &lt;!-- Âú®ËøôÈáåËøòÂèØ‰ª•ÂºïÁî®ÂÖ∂‰ªñÁöÑ sql ÁâáÊÆµ --&gt;
  &lt;/where&gt;
&lt;/select&gt;
</code></pre>
<p>Ê≥®ÊÑèÔºö<br>
‚ë†„ÄÅÊúÄÂ•ΩÂü∫‰∫éÂçïË°®Êù•ÂÆö‰πâ sql ÁâáÊÆµÔºåÊèêÈ´òÁâáÊÆµÁöÑÂèØÂ§çÁî®ÊÄß<br>
‚ë°„ÄÅÂú® sql ÁâáÊÆµ‰∏≠‰∏çË¶ÅÂåÖÊã¨ where</p>
<h2 id="129-foreach">12.9 foreach</h2>
<p>Â∞ÜÊï∞ÊçÆÂ∫ì‰∏≠Ââç‰∏â‰∏™Êï∞ÊçÆÁöÑid‰øÆÊîπ‰∏∫1,2,3Ôºõ<br>
ÈúÄÊ±ÇÔºöÊàë‰ª¨ÈúÄË¶ÅÊü•ËØ¢ blog Ë°®‰∏≠ id ÂàÜÂà´‰∏∫1,2,3ÁöÑÂçöÂÆ¢‰ø°ÊÅØ</p>
<ol>
<li>ÁºñÂÜôÊé•Âè£</li>
</ol>
<pre><code class="language-java">/**
* Êü•ËØ¢ÊñáÁ´†‰ø°ÊÅØÔºåÊ†πÊçÆforeachËØ≠Âè•Âä®ÊÄÅÊü•ËØ¢
* @param map Êü•ËØ¢Êù°‰ª∂ÈõÜÂêà
* @return List ÊñáÁ´†‰ø°ÊÅØÈõÜÂêà
*/
List&lt;Blog&gt; queryBlogForeach(Map&lt;String, Object&gt; map);
</code></pre>
<ol start="2">
<li>ÁºñÂÜôSQLËØ≠Âè•</li>
</ol>
<pre><code class="language-xml">&lt;select id=&quot;queryBlogForeach&quot; parameterType=&quot;map&quot; resultType=&quot;blog&quot;&gt;
  select * from blog
  &lt;where&gt;
    &lt;!--
       collection:ÊåáÂÆöËæìÂÖ•ÂØπË±°‰∏≠ÁöÑÈõÜÂêàÂ±ûÊÄß
       item:ÊØèÊ¨°ÈÅçÂéÜÁîüÊàêÁöÑÂØπË±°
       open:ÂºÄÂßãÈÅçÂéÜÊó∂ÁöÑÊãºÊé•Â≠óÁ¨¶‰∏≤
       close:ÁªìÊùüÊó∂ÊãºÊé•ÁöÑÂ≠óÁ¨¶‰∏≤
       separator:ÈÅçÂéÜÂØπË±°‰πãÈó¥ÈúÄË¶ÅÊãºÊé•ÁöÑÂ≠óÁ¨¶‰∏≤
       select * from blog where 1=1 and (id=1 or id=2 or id=3)
     --&gt;
    &lt;foreach collection=&quot;ids&quot;  item=&quot;id&quot; open=&quot;and (&quot; close=&quot;)&quot; separator=&quot;or&quot;&gt;
      id=#{id}
    &lt;/foreach&gt;
  &lt;/where&gt;
&lt;/select&gt;
</code></pre>
<ol start="3">
<li>ÊµãËØï</li>
</ol>
<pre><code class="language-java">@Test
public void testQueryBlogForeachTest() {
    SqlSession session = MybatisUtils.getSqlSession();
    BlogMapper mapper = session.getMapper(BlogMapper.class);

    Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();
    List&lt;Integer&gt; ids = new ArrayList&lt;&gt;();
    ids.add(1);
    ids.add(2);
    ids.add(3);
    map.put(&quot;ids&quot;,ids);

    List&lt;Blog&gt; blogs = mapper.queryBlogForeach(map);

    System.out.println(blogs);

    session.close();
}
</code></pre>
<p>Â∞èÁªìÔºöÂÖ∂ÂÆûÂä®ÊÄÅ sql ËØ≠Âè•ÁöÑÁºñÂÜôÂæÄÂæÄÂ∞±ÊòØ‰∏Ä‰∏™ÊãºÊé•ÁöÑÈóÆÈ¢òÔºå‰∏∫‰∫Ü‰øùËØÅÊãºÊé•ÂáÜÁ°ÆÔºåÊàë‰ª¨ÊúÄÂ•ΩÈ¶ñÂÖàË¶ÅÂÜôÂéüÁîüÁöÑ sql ËØ≠Âè•Âá∫Êù•ÔºåÁÑ∂ÂêéÂú®ÈÄöËøá mybatis Âä®ÊÄÅsql ÂØπÁÖßÁùÄÊîπÔºåÈò≤Ê≠¢Âá∫Èîô„ÄÇÂ§öÂú®ÂÆûË∑µ‰∏≠‰ΩøÁî®ÊâçÊòØÁÜüÁªÉÊéåÊè°ÂÆÉÁöÑÊäÄÂ∑ß„ÄÇ</p>
<h1 id="13-ÁºìÂ≠ò">13. ÁºìÂ≠ò</h1>
<h2 id="131-ÁÆÄ‰ªã">13.1 ÁÆÄ‰ªã</h2>
<p>1„ÄÅ‰ªÄ‰πàÊòØÁºìÂ≠ò [ Cache ]Ôºü</p>
<ul>
<li>Â≠òÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑ‰∏¥Êó∂Êï∞ÊçÆ„ÄÇ</li>
<li>Â∞ÜÁî®Êà∑ÁªèÂ∏∏Êü•ËØ¢ÁöÑÊï∞ÊçÆÊîæÂú®ÁºìÂ≠òÔºàÂÜÖÂ≠òÔºâ‰∏≠ÔºåÁî®Êà∑ÂéªÊü•ËØ¢Êï∞ÊçÆÂ∞±‰∏çÁî®‰ªéÁ£ÅÁõò‰∏ä(ÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÊï∞ÊçÆÊñá‰ª∂)Êü•ËØ¢Ôºå‰ªéÁºìÂ≠ò‰∏≠Êü•ËØ¢Ôºå‰ªéËÄåÊèêÈ´òÊü•ËØ¢ÊïàÁéáÔºåËß£ÂÜ≥‰∫ÜÈ´òÂπ∂ÂèëÁ≥ªÁªüÁöÑÊÄßËÉΩÈóÆÈ¢ò„ÄÇ</li>
</ul>
<p>2„ÄÅ‰∏∫‰ªÄ‰πà‰ΩøÁî®ÁºìÂ≠òÔºü</p>
<ul>
<li>ÂáèÂ∞ëÂíåÊï∞ÊçÆÂ∫ìÁöÑ‰∫§‰∫íÊ¨°Êï∞ÔºåÂáèÂ∞ëÁ≥ªÁªüÂºÄÈîÄÔºåÊèêÈ´òÁ≥ªÁªüÊïàÁéá„ÄÇ</li>
</ul>
<p>3„ÄÅ‰ªÄ‰πàÊ†∑ÁöÑÊï∞ÊçÆËÉΩ‰ΩøÁî®ÁºìÂ≠òÔºü</p>
<ul>
<li>ÁªèÂ∏∏Êü•ËØ¢Âπ∂‰∏î‰∏çÁªèÂ∏∏ÊîπÂèòÁöÑÊï∞ÊçÆ„ÄÇ</li>
</ul>
<h2 id="132-mybatisÁºìÂ≠ò">13.2 MybatisÁºìÂ≠ò</h2>
<ul>
<li>MyBatisÂåÖÂê´‰∏Ä‰∏™ÈùûÂ∏∏Âº∫Â§ßÁöÑÊü•ËØ¢ÁºìÂ≠òÁâπÊÄßÔºåÂÆÉÂèØ‰ª•ÈùûÂ∏∏Êñπ‰æøÂú∞ÂÆöÂà∂ÂíåÈÖçÁΩÆÁºìÂ≠ò„ÄÇÁºìÂ≠òÂèØ‰ª•ÊûÅÂ§ßÁöÑÊèêÂçáÊü•ËØ¢ÊïàÁéá„ÄÇ</li>
<li>MyBatisÁ≥ªÁªü‰∏≠ÈªòËÆ§ÂÆö‰πâ‰∫Ü‰∏§Á∫ßÁºìÂ≠òÔºö<strong>‰∏ÄÁ∫ßÁºìÂ≠ò</strong>Âíå<strong>‰∫åÁ∫ßÁºìÂ≠ò</strong>
<ul>
<li>ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÂè™Êúâ‰∏ÄÁ∫ßÁºìÂ≠òÂºÄÂêØ„ÄÇÔºàSqlSessionÁ∫ßÂà´ÁöÑÁºìÂ≠òÔºå‰πüÁß∞‰∏∫Êú¨Âú∞ÁºìÂ≠òÔºâ</li>
<li>‰∫åÁ∫ßÁºìÂ≠òÈúÄË¶ÅÊâãÂä®ÂºÄÂêØÂíåÈÖçÁΩÆÔºå‰ªñÊòØÂü∫‰∫énamespaceÁ∫ßÂà´ÁöÑÁºìÂ≠ò„ÄÇ</li>
<li>‰∏∫‰∫ÜÊèêÈ´òÊâ©Â±ïÊÄßÔºåMyBatisÂÆö‰πâ‰∫ÜÁºìÂ≠òÊé•Âè£Cache„ÄÇÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáÂÆûÁé∞CacheÊé•Âè£Êù•Ëá™ÂÆö‰πâ‰∫åÁ∫ßÁºìÂ≠ò</li>
</ul>
</li>
</ul>
<h2 id="133-‰∏ÄÁ∫ßÁºìÂ≠ò">13.3 ‰∏ÄÁ∫ßÁºìÂ≠ò</h2>
<p>‰∏ÄÁ∫ßÁºìÂ≠ò‰πüÂè´Êú¨Âú∞ÁºìÂ≠òÔºö</p>
<ul>
<li>‰∏éÊï∞ÊçÆÂ∫ìÂêå‰∏ÄÊ¨°‰ºöËØùÊúüÈó¥Êü•ËØ¢Âà∞ÁöÑÊï∞ÊçÆ‰ºöÊîæÂú®Êú¨Âú∞ÁºìÂ≠ò‰∏≠„ÄÇ</li>
<li>‰ª•ÂêéÂ¶ÇÊûúÈúÄË¶ÅËé∑ÂèñÁõ∏ÂêåÁöÑÊï∞ÊçÆÔºåÁõ¥Êé•‰ªéÁºìÂ≠ò‰∏≠ÊãøÔºåÊ≤°ÂøÖÈ°ªÂÜçÂéªÊü•ËØ¢Êï∞ÊçÆÂ∫ìÔºõ</li>
</ul>
<p>ÊµãËØïÔºö</p>
<ol>
<li>Âú®mybatis‰∏≠Âä†ÂÖ•Êó•ÂøóÔºåÊñπ‰æøÊµãËØïÁªìÊûú</li>
<li>ÁºñÂÜôÊé•Âè£ÊñπÊ≥ï</li>
</ol>
<pre><code class="language-java">/**
* Ê†πÊçÆidÊü•ËØ¢Áî®Êà∑‰ø°ÊÅØ
* @param id Áî®Êà∑ÂîØ‰∏ÄÊ†áËØÜ
* @return User Áî®Êà∑‰ø°ÊÅØÁ±ª
*/
User getUserById(@Param(&quot;id&quot;) int id);
</code></pre>
<ol start="3">
<li>Êé•Âè£ÂØπÂ∫îÁöÑMapperÊñá‰ª∂</li>
</ol>
<pre><code class="language-xml">&lt;select id=&quot;getUserById&quot; resultType=&quot;User&quot;&gt;
  select * from user where id = #{id};
&lt;/select&gt;
</code></pre>
<ol start="4">
<li>ÊµãËØï</li>
</ol>
<pre><code class="language-java">@Test
public void getUserByIdTest() {
    SqlSession sqlSession = MybatisUtils.getSqlSession();
    UserMapper mapper = sqlSession.getMapper(UserMapper.class);

    User user = mapper.getUserById(1);
    System.out.println(user);
    System.out.println(&quot;=========================&quot;);
    User user1 = mapper.getUserById(1);
    System.out.println(user1);
    System.out.println(user == user1);
    sqlSession.close();
}
</code></pre>
<ol start="5">
<li>ÁªìÊûúÂàÜÊûê</li>
</ol>
<figure data-type="image" tabindex="7"><img src="https://cdn.nlark.com/yuque/0/2021/png/22045814/1629390217604-e805969f-d72d-4a23-996e-ab0aeded0f42.png#clientId=u10c19a42-5750-4&amp;from=paste&amp;height=198&amp;id=u2d32b383&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=396&amp;originWidth=897&amp;originalType=binary&amp;ratio=1&amp;size=63062&amp;status=done&amp;style=none&amp;taskId=u675414a1-0343-4edb-9810-f0517557bfd&amp;width=448.5" alt="image.png" loading="lazy"></figure>
<h2 id="134-‰∏ÄÁ∫ßÁºìÂ≠òÂ§±ÊïàÁöÑÂõõÁßçÊÉÖÂÜµ">13.4 ‰∏ÄÁ∫ßÁºìÂ≠òÂ§±ÊïàÁöÑÂõõÁßçÊÉÖÂÜµ</h2>
<p>‰∏ÄÁ∫ßÁºìÂ≠òÊòØSqlSessionÁ∫ßÂà´ÁöÑÁºìÂ≠òÔºåÊòØ‰∏ÄÁõ¥ÂºÄÂêØÁöÑÔºåÊàë‰ª¨ÂÖ≥Èó≠‰∏ç‰∫ÜÂÆÉÔºõ<br>
‰∏ÄÁ∫ßÁºìÂ≠òÂ§±ÊïàÊÉÖÂÜµÔºöÊ≤°Êúâ‰ΩøÁî®Âà∞ÂΩìÂâçÁöÑ‰∏ÄÁ∫ßÁºìÂ≠òÔºåÊïàÊûúÂ∞±ÊòØÔºåËøòÈúÄË¶ÅÂÜçÂêëÊï∞ÊçÆÂ∫ì‰∏≠ÂèëËµ∑‰∏ÄÊ¨°Êü•ËØ¢ËØ∑Ê±ÇÔºÅ</p>
<ol>
<li>sqlSession‰∏çÂêå</li>
</ol>
<pre><code class="language-java">@Test
public void getUserByIdTest01(){
    SqlSession sqlSession = MybatisUtils.getSqlSession();
    SqlSession sqlSession1 = MybatisUtils.getSqlSession();
    UserMapper mapper = sqlSession.getMapper(UserMapper.class);
    UserMapper mapper2 = sqlSession1.getMapper(UserMapper.class);

    User user = mapper.getUserById(1);
    System.out.println(user);
    User user2 = mapper2.getUserById(1);
    System.out.println(user2);
    System.out.println(user==user2);

    sqlSession.close();
    sqlSession1.close();
}
</code></pre>
<p>ËßÇÂØüÁªìÊûúÔºöÂèëÁé∞ÂèëÈÄÅ‰∫Ü‰∏§Êù°SQLËØ≠Âè•ÔºÅ<br>
ÁªìËÆ∫Ôºö<strong>ÊØè‰∏™sqlSession‰∏≠ÁöÑÁºìÂ≠òÁõ∏‰∫íÁã¨Á´ã</strong></p>
<ol start="2">
<li>sqlSessionÁõ∏ÂêåÔºåÊü•ËØ¢Êù°‰ª∂‰∏çÂêå</li>
</ol>
<pre><code class="language-java">@Test
public void getUserByIdTest02(){
    SqlSession session = MybatisUtils.getSqlSession();
    UserMapper mapper = session.getMapper(UserMapper.class);
    UserMapper mapper1 = session.getMapper(UserMapper.class);

    User user = mapper.getUserById(1);
    System.out.println(user);
    User user2 = mapper1.getUserById(2);
    System.out.println(user2);
    System.out.println(user==user2);

    session.close();
}
</code></pre>
<p>ËßÇÂØüÁªìÊûúÔºöÂèëÁé∞ÂèëÈÄÅ‰∫Ü‰∏§Êù°SQLËØ≠Âè•ÔºÅÂæàÊ≠£Â∏∏ÁöÑÁêÜËß£<br>
ÁªìËÆ∫Ôºö<strong>ÂΩìÂâçÁºìÂ≠ò‰∏≠Ôºå‰∏çÂ≠òÂú®Ëøô‰∏™Êï∞ÊçÆ</strong></p>
<ol start="3">
<li>sqlSessionÁõ∏ÂêåÔºå‰∏§Ê¨°Êü•ËØ¢‰πãÈó¥ÊâßË°å‰∫ÜÂ¢ûÂà†ÊîπÊìç‰ΩúÔºÅ<br>
Â¢ûÂä†ÊñπÊ≥ï</li>
</ol>
<pre><code class="language-java">/**
* ‰øÆÊîπÁî®Êà∑‰ø°ÊÅØ
* @param map Êù°‰ª∂‰ª•Âèä‰øÆÊîπ‰ø°ÊÅØÁöÑÈõÜÂêà
* @return SQLÊâßË°åÁöÑÁªìÊûúÔºåÂΩ±Âìç‰∫ÜÂá†Ë°å
*/
int updateUser(Map&lt;String, Object&gt; map);
</code></pre>
<p>ÁºñÂÜôSQL</p>
<pre><code class="language-sql">&lt;update id=&quot;updateUser&quot; parameterType=&quot;map&quot;&gt;
	  update user set name = #{name}, pwd = #{pwd} where id = #{id}
&lt;/update&gt;
</code></pre>
<p>ÊµãËØï</p>
<pre><code class="language-java">@Test
public void updateUserTest() {
    SqlSession session = MybatisUtils.getSqlSession();
    UserMapper mapper = session.getMapper(UserMapper.class);

    User user = mapper.getUserById(1);
    System.out.println(user);

    Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();
    map.put(&quot;name&quot;,&quot;SolitudeAlma&quot;);
    map.put(&quot;id&quot;,4);
    mapper.updateUser(map);

    User user2 = mapper.getUserById(1);
    System.out.println(user2);

    System.out.println(user==user2);

    session.close();
}
</code></pre>
<p>ËßÇÂØüÁªìÊûúÔºöÊü•ËØ¢Âú®‰∏≠Èó¥ÊâßË°å‰∫ÜÂ¢ûÂà†ÊîπÊìç‰ΩúÂêéÔºåÈáçÊñ∞ÊâßË°å‰∫Ü<br>
ÁªìËÆ∫Ôºö<strong>Âõ†‰∏∫Â¢ûÂà†ÊîπÊìç‰ΩúÂèØËÉΩ‰ºöÂØπÂΩìÂâçÊï∞ÊçÆ‰∫ßÁîüÂΩ±Âìç</strong></p>
<ol start="4">
<li>sqlSessionÁõ∏ÂêåÔºåÊâãÂä®Ê∏ÖÈô§‰∏ÄÁ∫ßÁºìÂ≠ò</li>
</ol>
<pre><code class="language-java">@Test
public void getUserById03(){
    SqlSession session = MybatisUtils.getSqlSession();
    UserMapper mapper = session.getMapper(UserMapper.class);
    User user = mapper.getUserById(1);
    System.out.println(user);

    session.clearCache();//ÊâãÂä®Ê∏ÖÈô§ÁºìÂ≠ò

    User user2 = mapper.getUserById(1);
    System.out.println(user2);

    System.out.println(user==user2);

    session.close();
}
</code></pre>
<p>‰∏ÄÁ∫ßÁºìÂ≠òÂ∞±ÊòØ‰∏Ä‰∏™map</p>
<h2 id="135-‰∫åÁ∫ßÁºìÂ≠ò">13.5 ‰∫åÁ∫ßÁºìÂ≠ò</h2>
<ul>
<li>‰∫åÁ∫ßÁºìÂ≠ò‰πüÂè´ÂÖ®Â±ÄÁºìÂ≠òÔºå‰∏ÄÁ∫ßÁºìÂ≠ò‰ΩúÁî®ÂüüÂ§™‰Ωé‰∫ÜÔºåÊâÄ‰ª•ËØûÁîü‰∫Ü‰∫åÁ∫ßÁºìÂ≠ò</li>
<li>Âü∫‰∫énamespaceÁ∫ßÂà´ÁöÑÁºìÂ≠òÔºå‰∏Ä‰∏™ÂêçÁß∞Á©∫Èó¥ÔºåÂØπÂ∫î‰∏Ä‰∏™‰∫åÁ∫ßÁºìÂ≠òÔºõ</li>
<li>Â∑•‰ΩúÊú∫Âà∂
<ul>
<li>‰∏Ä‰∏™‰ºöËØùÊü•ËØ¢‰∏ÄÊù°Êï∞ÊçÆÔºåËøô‰∏™Êï∞ÊçÆÂ∞±‰ºöË¢´ÊîæÂú®ÂΩìÂâç‰ºöËØùÁöÑ‰∏ÄÁ∫ßÁºìÂ≠ò‰∏≠Ôºõ</li>
<li>Â¶ÇÊûúÂΩìÂâç‰ºöËØùÂÖ≥Èó≠‰∫ÜÔºåËøô‰∏™‰ºöËØùÂØπÂ∫îÁöÑ‰∏ÄÁ∫ßÁºìÂ≠òÂ∞±Ê≤°‰∫ÜÔºõ‰ΩÜÊòØÊàë‰ª¨ÊÉ≥Ë¶ÅÁöÑÊòØÔºå‰ºöËØùÂÖ≥Èó≠‰∫ÜÔºå‰∏ÄÁ∫ßÁºìÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆË¢´‰øùÂ≠òÂà∞‰∫åÁ∫ßÁºìÂ≠ò‰∏≠Ôºõ</li>
<li>Êñ∞ÁöÑ‰ºöËØùÊü•ËØ¢‰ø°ÊÅØÔºåÂ∞±ÂèØ‰ª•‰ªé‰∫åÁ∫ßÁºìÂ≠ò‰∏≠Ëé∑ÂèñÂÜÖÂÆπÔºõ</li>
<li>‰∏çÂêåÁöÑmapperÊü•Âá∫ÁöÑÊï∞ÊçÆ‰ºöÊîæÂú®Ëá™Â∑±ÂØπÂ∫îÁöÑÁºìÂ≠òÔºàmapÔºâ‰∏≠Ôºõ</li>
</ul>
</li>
</ul>
<h3 id="1351-‰ΩøÁî®Ê≠•È™§">13.5.1 ‰ΩøÁî®Ê≠•È™§</h3>
<ol>
<li>ÂºÄÂêØÂÖ®Â±ÄÁºìÂ≠ò „Äêmybatis-config.xml„Äë</li>
</ol>
<pre><code class="language-xml">&lt;!--ÂºÄÂêØÂÖ®Â±ÄÁºìÂ≠ò--&gt;
&lt;setting name=&quot;cacheEnabled&quot; value=&quot;true&quot;/&gt;
</code></pre>
<ol start="2">
<li>ÂéªÊØè‰∏™mapper.xml‰∏≠ÈÖçÁΩÆ‰ΩøÁî®‰∫åÁ∫ßÁºìÂ≠òÔºåËøô‰∏™ÈÖçÁΩÆÈùûÂ∏∏ÁÆÄÂçïÔºõ„ÄêxxxMapper.xml„Äë</li>
</ol>
<pre><code class="language-xml">&lt;cache/&gt; Áõ¥Êé•‰ΩøÁî®Ëøô‰∏™ÈúÄË¶ÅÂ∫èÂàóÂåñÁ±ªÔºàorg.apache.ibatis.cache.CacheException: Error serializing object.  Cause: java.io.NotSerializableException: com.SolitudeAlma.pojo.UserÔºâÔºåÂÆûÁé∞SerializableÊé•Âè£
Êàñ
ÂÆòÊñπÁ§∫‰æã=====&gt;Êü•ÁúãÂÆòÊñπÊñáÊ°£
&lt;cache
 eviction=&quot;FIFO&quot;
 flushInterval=&quot;60000&quot;
 size=&quot;512&quot;
 readOnly=&quot;true&quot;/&gt;
Ëøô‰∏™Êõ¥È´òÁ∫ßÁöÑÈÖçÁΩÆÂàõÂª∫‰∫Ü‰∏Ä‰∏™ FIFO ÁºìÂ≠òÔºåÊØèÈöî 60 ÁßíÂà∑Êñ∞ÔºåÊúÄÂ§öÂèØ‰ª•Â≠òÂÇ®ÁªìÊûúÂØπË±°ÊàñÂàóË°®ÁöÑ 512 ‰∏™ÂºïÁî®ÔºåËÄå‰∏îËøîÂõûÁöÑÂØπË±°Ë¢´ËÆ§‰∏∫ÊòØÂè™ËØªÁöÑÔºåÂõ†Ê≠§ÂØπÂÆÉ‰ª¨ËøõË°å‰øÆÊîπÂèØËÉΩ‰ºöÂú®‰∏çÂêåÁ∫øÁ®ã‰∏≠ÁöÑË∞ÉÁî®ËÄÖ‰∫ßÁîüÂÜ≤Á™Å„ÄÇ
</code></pre>
<ol start="3">
<li>‰ª£Á†ÅÊµãËØï</li>
</ol>
<ul>
<li>ÊâÄÊúâÁöÑÂÆû‰ΩìÁ±ªÂÖàÂÆûÁé∞Â∫èÂàóÂåñÊé•Âè£</li>
<li>ÊµãËØï‰ª£Á†Å</li>
</ul>
<pre><code class="language-java">@Test
public void testQueryUserById(){
   SqlSession session = MybatisUtils.getSession();
   SqlSession session2 = MybatisUtils.getSession();

   UserMapper mapper = session.getMapper(UserMapper.class);
   UserMapper mapper2 = session2.getMapper(UserMapper.class);

   User user = mapper.queryUserById(1);
   System.out.println(user);
   session.close();

   User user2 = mapper2.queryUserById(1);
   System.out.println(user2);
   System.out.println(user==user2);

   session2.close();
}
</code></pre>
<h3 id="1352-ÁªìËÆ∫">13.5.2 ÁªìËÆ∫</h3>
<ul>
<li>Âè™Ë¶ÅÂºÄÂêØ‰∫Ü‰∫åÁ∫ßÁºìÂ≠òÔºåÊàë‰ª¨Âú®Âêå‰∏Ä‰∏™Mapper‰∏≠ÁöÑÊü•ËØ¢ÔºåÂèØ‰ª•Âú®‰∫åÁ∫ßÁºìÂ≠ò‰∏≠ÊãøÂà∞Êï∞ÊçÆ</li>
<li>Êü•Âá∫ÁöÑÊï∞ÊçÆÈÉΩ‰ºöË¢´ÈªòËÆ§ÂÖàÊîæÂú®‰∏ÄÁ∫ßÁºìÂ≠ò‰∏≠</li>
<li>Âè™Êúâ‰ºöËØùÊèê‰∫§ÊàñËÄÖÂÖ≥Èó≠‰ª•ÂêéÔºå‰∏ÄÁ∫ßÁºìÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÊâç‰ºöËΩ¨Âà∞‰∫åÁ∫ßÁºìÂ≠ò‰∏≠</li>
<li><strong>Âè™ÊúâÊèê‰∫§‰∫ãÂä°ÂêéÊâç‰ºöÂÜôÂÖ•‰∫åÁ∫ßÁºìÂ≠ò</strong></li>
</ul>
<h2 id="136-ÁºìÂ≠òÂéüÁêÜÂõæ">13.6 ÁºìÂ≠òÂéüÁêÜÂõæ</h2>
<figure data-type="image" tabindex="8"><img src="https://cdn.nlark.com/yuque/0/2021/png/22045814/1629430658041-0e543258-e81f-4ce6-b4a3-57ed5290ff19.png#clientId=ubc6f61bf-340b-4&amp;from=paste&amp;height=539&amp;id=u62f54e33&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=805&amp;originWidth=1099&amp;originalType=binary&amp;ratio=1&amp;size=589029&amp;status=done&amp;style=none&amp;taskId=u505ee197-dd0a-4c75-ba0b-c2ef3a911f8&amp;width=736.5" alt="image.png" loading="lazy"></figure>
<h2 id="137-Ëá™ÂÆö‰πâÁºìÂ≠ò-ehcache">13.7 Ëá™ÂÆö‰πâÁºìÂ≠ò-ehcache</h2>
<figure data-type="image" tabindex="9"><img src="https://cdn.nlark.com/yuque/0/2021/png/22045814/1629430893346-29abded6-b62a-4fad-8b8e-04dcf49d2587.png#clientId=ubc6f61bf-340b-4&amp;from=paste&amp;height=102&amp;id=ub19b7622&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=203&amp;originWidth=1475&amp;originalType=binary&amp;ratio=1&amp;size=69519&amp;status=done&amp;style=none&amp;taskId=ucee1adaa-c1a5-497b-a43e-6a5f5c46c28&amp;width=737.5" alt="image.png" loading="lazy"></figure>
<p>Á¨¨‰∏âÊñπÁºìÂ≠òÂÆûÁé∞--EhCache: Êü•ÁúãÁôæÂ∫¶ÁôæÁßë<br>
EhcacheÊòØ‰∏ÄÁßçÂπøÊ≥õ‰ΩøÁî®ÁöÑjavaÂàÜÂ∏ÉÂºèÁºìÂ≠òÔºåÁî®‰∫éÈÄöÁî®ÁºìÂ≠òÔºõ<br>
Ë¶ÅÂú®Â∫îÁî®Á®ãÂ∫è‰∏≠‰ΩøÁî®EhcacheÔºåÈúÄË¶ÅÂºïÂÖ•‰æùËµñÁöÑjarÂåÖ</p>
<pre><code class="language-xml">&lt;!-- https://mvnrepository.com/artifact/org.mybatis.caches/mybatis-ehcache --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.mybatis.caches&lt;/groupId&gt;
    &lt;artifactId&gt;mybatis-ehcache&lt;/artifactId&gt;
    &lt;version&gt;1.2.1&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p>Âú®mapper.xml‰∏≠‰ΩøÁî®ÂØπÂ∫îÁöÑÁºìÂ≠òÂç≥ÂèØ</p>
<pre><code class="language-xml">&lt;!--Ëá™ÂÆö‰πâÁºìÂ≠ò--&gt;
&lt;cache type=&quot;org.mybatis.caches.ehcache.EhcacheCache&quot;/&gt;
</code></pre>
<p>ÁºñÂÜôehcache.xmlÊñá‰ª∂ÔºåÂ¶ÇÊûúÂú®Âä†ËΩΩÊó∂Êú™ÊâæÂà∞/ehcache.xmlËµÑÊ∫êÊàñÂá∫Áé∞ÈóÆÈ¢òÔºåÂàôÂ∞Ü‰ΩøÁî®ÈªòËÆ§ÈÖçÁΩÆ„ÄÇ</p>
<pre><code class="language-xml">&lt;!--sxiÂ§ÑÁàÜÁ∫¢Â∞±ÁÇπfetch external resource ÊàñËÄÖÂéªËÆæÁΩÆlanguage and frameworkÈáåÊ∑ªÂä†igonredÂå∫ÂüüÁöÑuri ÊàñËÄÖÊêúÁ¥¢[Resource registered by this uri is not recognized (Settings | Languages &amp; Frameworks | Schemas and DTDs)]--&gt;
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;ehcache xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
        xsi:noNamespaceSchemaLocation=&quot;http://ehcache.org/ehcache.xsd&quot;
        updateCheck=&quot;false&quot;&gt;
   &lt;!--
      diskStoreÔºö‰∏∫ÁºìÂ≠òË∑ØÂæÑÔºåehcacheÂàÜ‰∏∫ÂÜÖÂ≠òÂíåÁ£ÅÁõò‰∏§Á∫ßÔºåÊ≠§Â±ûÊÄßÂÆö‰πâÁ£ÅÁõòÁöÑÁºìÂ≠ò‰ΩçÁΩÆ„ÄÇÂèÇÊï∞Ëß£ÈáäÂ¶Ç‰∏ãÔºö
      user.home ‚Äì Áî®Êà∑‰∏ªÁõÆÂΩï
      user.dir ‚Äì Áî®Êà∑ÂΩìÂâçÂ∑•‰ΩúÁõÆÂΩï
      java.io.tmpdir ‚Äì ÈªòËÆ§‰∏¥Êó∂Êñá‰ª∂Ë∑ØÂæÑ
    --&gt;
   &lt;diskStore path=&quot;./tmpdir/Tmp_EhCache&quot;/&gt;
   
   &lt;defaultCache
           eternal=&quot;false&quot;
           maxElementsInMemory=&quot;10000&quot;
           overflowToDisk=&quot;false&quot;
           diskPersistent=&quot;false&quot;
           timeToIdleSeconds=&quot;1800&quot;
           timeToLiveSeconds=&quot;259200&quot;
           memoryStoreEvictionPolicy=&quot;LRU&quot;/&gt;

   &lt;cache
           name=&quot;cloud_user&quot;
           eternal=&quot;false&quot;
           maxElementsInMemory=&quot;5000&quot;
           overflowToDisk=&quot;false&quot;
           diskPersistent=&quot;false&quot;
           timeToIdleSeconds=&quot;1800&quot;
           timeToLiveSeconds=&quot;1800&quot;
           memoryStoreEvictionPolicy=&quot;LRU&quot;/&gt;
   &lt;!--
      defaultCacheÔºöÈªòËÆ§ÁºìÂ≠òÁ≠ñÁï•ÔºåÂΩìehcacheÊâæ‰∏çÂà∞ÂÆö‰πâÁöÑÁºìÂ≠òÊó∂ÔºåÂàô‰ΩøÁî®Ëøô‰∏™ÁºìÂ≠òÁ≠ñÁï•„ÄÇÂè™ËÉΩÂÆö‰πâ‰∏Ä‰∏™„ÄÇ
    --&gt;
   &lt;!--
     name:ÁºìÂ≠òÂêçÁß∞„ÄÇ
     maxElementsInMemory:ÁºìÂ≠òÊúÄÂ§ßÊï∞ÁõÆ
     maxElementsOnDiskÔºöÁ°¨ÁõòÊúÄÂ§ßÁºìÂ≠ò‰∏™Êï∞„ÄÇ
     eternal:ÂØπË±°ÊòØÂê¶Ê∞∏‰πÖÊúâÊïàÔºå‰∏Ä‰ΩÜËÆæÁΩÆ‰∫ÜÔºåtimeoutÂ∞Ü‰∏çËµ∑‰ΩúÁî®„ÄÇ
     overflowToDisk:ÊòØÂê¶‰øùÂ≠òÂà∞Á£ÅÁõòÔºåÂΩìÁ≥ªÁªüÂÆïÊú∫Êó∂
     timeToIdleSeconds:ËÆæÁΩÆÂØπË±°Âú®Â§±ÊïàÂâçÁöÑÂÖÅËÆ∏Èó≤ÁΩÆÊó∂Èó¥ÔºàÂçï‰ΩçÔºöÁßíÔºâ„ÄÇ‰ªÖÂΩìeternal=falseÂØπË±°‰∏çÊòØÊ∞∏‰πÖÊúâÊïàÊó∂‰ΩøÁî®ÔºåÂèØÈÄâÂ±ûÊÄßÔºåÈªòËÆ§ÂÄºÊòØ0Ôºå‰πüÂ∞±ÊòØÂèØÈó≤ÁΩÆÊó∂Èó¥Êó†Á©∑Â§ß„ÄÇ
     timeToLiveSeconds:ËÆæÁΩÆÂØπË±°Âú®Â§±ÊïàÂâçÂÖÅËÆ∏Â≠òÊ¥ªÊó∂Èó¥ÔºàÂçï‰ΩçÔºöÁßíÔºâ„ÄÇÊúÄÂ§ßÊó∂Èó¥‰ªã‰∫éÂàõÂª∫Êó∂Èó¥ÂíåÂ§±ÊïàÊó∂Èó¥‰πãÈó¥„ÄÇ‰ªÖÂΩìeternal=falseÂØπË±°‰∏çÊòØÊ∞∏‰πÖÊúâÊïàÊó∂‰ΩøÁî®ÔºåÈªòËÆ§ÊòØ0.Ôºå‰πüÂ∞±ÊòØÂØπË±°Â≠òÊ¥ªÊó∂Èó¥Êó†Á©∑Â§ß„ÄÇ
     diskPersistentÔºöÊòØÂê¶ÁºìÂ≠òËôöÊãüÊú∫ÈáçÂêØÊúüÊï∞ÊçÆ Whether the disk store persists between restarts of the Virtual Machine. The default value is false.
     diskSpoolBufferSizeMBÔºöËøô‰∏™ÂèÇÊï∞ËÆæÁΩÆDiskStoreÔºàÁ£ÅÁõòÁºìÂ≠òÔºâÁöÑÁºìÂ≠òÂå∫Â§ßÂ∞è„ÄÇÈªòËÆ§ÊòØ30MB„ÄÇÊØè‰∏™CacheÈÉΩÂ∫îËØ•ÊúâËá™Â∑±ÁöÑ‰∏Ä‰∏™ÁºìÂÜ≤Âå∫„ÄÇ
     diskExpiryThreadIntervalSecondsÔºöÁ£ÅÁõòÂ§±ÊïàÁ∫øÁ®ãËøêË°åÊó∂Èó¥Èó¥ÈöîÔºåÈªòËÆ§ÊòØ120Áßí„ÄÇ
     memoryStoreEvictionPolicyÔºöÂΩìËææÂà∞maxElementsInMemoryÈôêÂà∂Êó∂ÔºåEhcacheÂ∞Ü‰ºöÊ†πÊçÆÊåáÂÆöÁöÑÁ≠ñÁï•ÂéªÊ∏ÖÁêÜÂÜÖÂ≠ò„ÄÇÈªòËÆ§Á≠ñÁï•ÊòØLRUÔºàÊúÄËøëÊúÄÂ∞ë‰ΩøÁî®Ôºâ„ÄÇ‰Ω†ÂèØ‰ª•ËÆæÁΩÆ‰∏∫FIFOÔºàÂÖàËøõÂÖàÂá∫ÔºâÊàñÊòØLFUÔºàËæÉÂ∞ë‰ΩøÁî®Ôºâ„ÄÇ
     clearOnFlushÔºöÂÜÖÂ≠òÊï∞ÈáèÊúÄÂ§ßÊó∂ÊòØÂê¶Ê∏ÖÈô§„ÄÇ
     memoryStoreEvictionPolicy:ÂèØÈÄâÁ≠ñÁï•ÊúâÔºöLRUÔºàÊúÄËøëÊúÄÂ∞ë‰ΩøÁî®ÔºåÈªòËÆ§Á≠ñÁï•Ôºâ„ÄÅFIFOÔºàÂÖàËøõÂÖàÂá∫Ôºâ„ÄÅLFUÔºàÊúÄÂ∞ëËÆøÈóÆÊ¨°Êï∞Ôºâ„ÄÇ
     FIFOÔºåfirst in first outÔºåËøô‰∏™ÊòØÂ§ßÂÆ∂ÊúÄÁÜüÁöÑÔºåÂÖàËøõÂÖàÂá∫„ÄÇ
     LFUÔºå Less Frequently UsedÔºåÂ∞±ÊòØ‰∏äÈù¢‰æãÂ≠ê‰∏≠‰ΩøÁî®ÁöÑÁ≠ñÁï•ÔºåÁõ¥ÁôΩ‰∏ÄÁÇπÂ∞±ÊòØËÆ≤‰∏ÄÁõ¥‰ª•Êù•ÊúÄÂ∞ëË¢´‰ΩøÁî®ÁöÑ„ÄÇÂ¶Ç‰∏äÈù¢ÊâÄËÆ≤ÔºåÁºìÂ≠òÁöÑÂÖÉÁ¥†Êúâ‰∏Ä‰∏™hitÂ±ûÊÄßÔºåhitÂÄºÊúÄÂ∞èÁöÑÂ∞Ü‰ºöË¢´Ê∏ÖÂá∫ÁºìÂ≠ò„ÄÇ
     LRUÔºåLeast Recently UsedÔºåÊúÄËøëÊúÄÂ∞ë‰ΩøÁî®ÁöÑÔºåÁºìÂ≠òÁöÑÂÖÉÁ¥†Êúâ‰∏Ä‰∏™Êó∂Èó¥Êà≥ÔºåÂΩìÁºìÂ≠òÂÆπÈáèÊª°‰∫ÜÔºåËÄåÂèàÈúÄË¶ÅËÖæÂá∫Âú∞ÊñπÊù•ÁºìÂ≠òÊñ∞ÁöÑÂÖÉÁ¥†ÁöÑÊó∂ÂÄôÔºåÈÇ£‰πàÁé∞ÊúâÁºìÂ≠òÂÖÉÁ¥†‰∏≠Êó∂Èó¥Êà≥Á¶ªÂΩìÂâçÊó∂Èó¥ÊúÄËøúÁöÑÂÖÉÁ¥†Â∞ÜË¢´Ê∏ÖÂá∫ÁºìÂ≠ò„ÄÇ
  --&gt;

&lt;/ehcache&gt;
</code></pre>
<p>ËøêË°åÂêé‰ºöÁàÜÁ∫¢</p>
<blockquote>
<p><a href="https://blog.csdn.net/qq_42262803/article/details/86485140">https://blog.csdn.net/qq_42262803/article/details/86485140</a><br>
<a href="https://blog.csdn.net/theonegis/article/details/45873331">https://blog.csdn.net/theonegis/article/details/45873331</a><br>
<a href="https://blog.csdn.net/langtian08/article/details/82015017">https://blog.csdn.net/langtian08/article/details/82015017</a></p>
</blockquote>
<p>ÂêàÁêÜÁöÑ‰ΩøÁî®ÁºìÂ≠òÔºåÂèØ‰ª•ËÆ©Êàë‰ª¨Á®ãÂ∫èÁöÑÊÄßËÉΩÂ§ßÂ§ßÊèêÂçáÔºÅ</p>
<blockquote>
<p><a href="https://gitee.com/solitudealma/java-study-note">ÈôÑÂ±û‰ª£Á†Å</a><br>
<a href="https://www.bilibili.com/read/cv5702420">ÊâÄÊúâËµÑÊ∫êÊù•Ê∫ê‰∫éÁãÇÁ•ûËØ¥ÁöÑBÁ´ôÊäïÁ®øËßÜÈ¢ë</a></p>
</blockquote>

                                </div>
                            </div>
                            
                                <div class="reward ">
                                    <div class="reward-button ">&yen;
                                        <span class="reward-code "> 
                                            <span class="alipay-code "> <img class="alipay-img "  alt = "support " src="https://img.imgdb.cn/item/602e6284343ca1fbf903142d.jpg"><b>Alipay</b>                                                            </span>
                                        <span class="wechat-code "> <img alt ="support " class="wechat-img " src="https://img.imgdb.cn/item/602e5d8d343ca1fbf900a926.jpg"><b>Wechat</b> </span> </span>
                                    </div>
                                </div>
                                
                        </div>
                        <div class="post-footer">
                            <div class="post-copyright">
                                ‰ΩúËÄÖ:
                                SolitudeAlma<br>Ê∞∏‰πÖÈìæÊé•:
                                    <a href="https://solitudealma.github.io/post/qYIUMWbyl/" title="JavaÂ≠¶‰π†Á¨îËÆ∞‰πãMybatis">
                                        https://solitudealma.github.io/post/qYIUMWbyl/
                                    </a><br> ÂçèËÆÆ: MIT License
                            </div>
                        </div>
                    </article>
                </div>
                <style>
                    .prev:hover {
                        color: #2d96bd;
                        text-decoration: none;
                        text-align: center;
                        transition: color 0.2s ease, border-color 0.2s ease, background 0.2s ease, opacity 0.2s ease;
                    }
                    
                    .next:hover {
                        color: #2d96bd;
                        text-decoration: none;
                        text-align: center;
                        transition: color 0.2s ease, border-color 0.2s ease, background 0.2s ease, opacity 0.2s ease;
                    }
                </style>
                <div class="lite-item nearby-article">
                    
                            
                                <div class="nearby-article-right" style="padding: 10px;">
                                    <a class="next" rel="next" href="https://solitudealma.github.io/post/liiMnTBGw/">
                                        JavaÂ≠¶‰π†Á¨îËÆ∞‰πãHTML5<i class="fa fa-chevron-right"></i>
                                    </a>
                                </div>
                                
                </div>
                <!--Share-->
                <span style="margin-right:15px">
    <i class="post-share"></i>
    <span>&#x5206;&#x4EAB;:</span>
                <a title="QR Á†Å" target="_blank" href="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://solitudealma.github.io/post/qYIUMWbyl/"><i class="fa fa-qrcode"></i></a>
                <a title="QQ" target="_blank" href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://solitudealma.github.io/post/qYIUMWbyl/&sharesource=qzone&title=JavaÂ≠¶‰π†Á¨îËÆ∞‰πãMybatis&pics=https://solitudealma.github.io/images/avatar.png?v=1630301105350&summary="><i class="fa fa-qq"></i></a>
                <a title="Êñ∞Êµ™ÂæÆÂçö" target="_blank" href="https://service.weibo.com/share/share.php?url=https://solitudealma.github.io/post/qYIUMWbyl/&sharesource=weibo&title=JavaÂ≠¶‰π†Á¨îËÆ∞‰πãMybatis + " - " + &pic="https://solitudealma.github.io/images/avatar.png?v=1630301105350"><i class="fa fa-weibo "></i></a>
                </span>
                
                                            
                                                <script type="application/javascript" src="//unpkg.com/valine@latest/dist/Valine.min.js"></script>
<div id="vlaine-comment"></div>
<script type="application/javascript">
    new Valine({
        el: '#vlaine-comment',
        appId: 'CtvJjEF5dpKjM6LcNBxkvvGX-gzGzoHsz',
        appKey: 'k0U3m8TLtYax8UPcxq41eHw2',
        pageSize: 10,
        avatar: 'mp',
        placeholder: 'Êù•ÈÉΩÊù•‰∫ÜÔºå‰∏çÂ¶®ËØÑËÆ∫‰∏Ä‰∏ã',
        visitor: true,
        highlight: true,
        recordIP: true,
    })
</script>
                                                    
            </div>
            <div id="sidebar">
    <ul>
        
            <li class="lite-item">
                <header class="lite-item-header">
                    <h3 class="lite-item-title"><i class="Card Card-hitokoto"></i>&nbsp;&#x4E00;&#x8A00;</h3>
                </header>
                <div class="textwidget">
                    <p>
                        <b id="hitokoto"></b>
                    </p>
                </div>
            </li>
            
                <!--
                <li class="lite-item">
                    <header class="lite-item-header">
                        <h3 class="lite-item-title"><i class="Card Card-tags">&#x6807;&#x7B7E;</i></h3>
                    </header>
                    <div class="textwidget">
                        
                            <a href="" class="tag-cloud-link " style="font-size: 12px;margin: 5px; padding: 2px;">
                                <i class="fa fa-tags" aria-hidden="true"></i>
                            </a>
                            
                    </div>
                </li>-->
                <li class="lite-item">
                    <header class="lite-item-header">
                        <h3 class="lite-item-title"><i class="Card Card-tags">&#x6807;&#x7B7E;</i></h3>
                    </header>
                    <div class="textwidget">
                        <div id='tags' style="height: auto;width: 360;"></div>
                        <script src="https://solitudealma.github.io/media/js/svg3dtagcloud.min.js"></script>
                        <script>
                            $(document).ready(function() {
                                var entries = ([
                                    
                                     {
                                        label: 'üè∑Java',
                                        url: 'https://solitudealma.github.io/tag/java/',
                                        target: '_button'
                                    },
                                    
                                    
                                     {
                                        label: 'üè∑Nodejs',
                                        url: 'https://solitudealma.github.io/tag/Nodejs/',
                                        target: '_button'
                                    },
                                    
                                    
                                     {
                                        label: 'üè∑Ê¨ßÊãâËÆ°Âàí',
                                        url: 'https://solitudealma.github.io/tag/ProjectEuler/',
                                        target: '_button'
                                    },
                                    
                                    
                                     {
                                        label: 'üè∑È¢òËß£',
                                        url: 'https://solitudealma.github.io/tag/answer/',
                                        target: '_button'
                                    },
                                    
                                    
                                     {
                                        label: 'üè∑Diary',
                                        url: 'https://solitudealma.github.io/tag/diary/',
                                        target: '_button'
                                    },
                                    
                                    
                                     {
                                        label: 'üè∑Algorithm',
                                        url: 'https://solitudealma.github.io/tag/algorithm/',
                                        target: '_button'
                                    }
                                    
                                    
                                ]);
                                var settings = {
                                    entries: entries, //Êï∞ÊçÆ
                                    width: 300, //ÂÆΩÂ∫¶
                                    height: 300, //È´òÂ∫¶
                                    radius: '50%',
                                    radiusMin: 50,
                                    bgDraw: false, //ÊòØÂê¶ÊòæÁ§∫ËÉåÊôØ
                                    bgColor: '#fff', //ËÉåÊôØÈ¢úËâ≤
                                    opacityOver: 1.00,
                                    opacityOut: 0.05,
                                    opacitySpeed: 6,
                                    fov: 360,
                                    speed: 0.3, //ÊóãËΩ¨ÁöÑÈÄüÂ∫¶
                                    fontFamily: 'Oswald, Arial, sans-serif',
                                    fontSize: '18', //ÈªòËÆ§Â≠ó‰ΩìÂ§ßÂ∞è
                                    fontColor: '#666', //ÈªòËÆ§Â≠ó‰ΩìÈ¢úËâ≤
                                    fontWeight: 'normal', //bold
                                    fontStyle: 'normal', //italic 
                                    fontStretch: 'normal', //wider, narrower, ultra-condensed, extra-condensed, condensed, semi-condensed, semi-expanded, expanded, extra-expanded, ultra-expanded
                                    fontToUpperCase: true,
                                    tooltipFontFamily: 'Oswald, Arial, sans-serif',
                                    tooltipFontSize: '16',
                                    tooltipFontColor: 'red',
                                    tooltipFontWeight: 'normal', //bold
                                    tooltipFontStyle: 'normal', //italic 
                                    tooltipFontStretch: 'normal', //wider, narrower, ultra-condensed, extra-condensed, condensed, semi-condensed, semi-expanded, expanded, extra-expanded, ultra-expanded
                                    tooltipFontToUpperCase: false,
                                    tooltipTextAnchor: 'left',
                                    tooltipDiffX: 0,
                                    tooltipDiffY: 5

                                };

                                //var svg3DTagCloud = new SVG3DTagCloud( document.getElementById( 'holder'  ), settings );
                                $('#tags').svg3DTagCloud(settings);
                            });
                        </script>
                    </div>
                </li>
                
                    <script src="https://cdn.jsdelivr.net/gh/itjoker233/Gridea-theme-Chic/assets/media/script/APlayer.min.js"></script>
                    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css">
                    <div id="player"></div>
                    
                        <li class="lite-item">
                            <header class="lite-item-header">
                                <h3 class="lite-item-title">
                                    &#x1F3B5;&#x97F3;&#x4E50;
                                </h3>
                            </header>
                            <div class="textwidget">
                                <p>
                                    <div id="playerbox"></div>
                                </p>
                            </div>
                        </li>
                        
                            <script>
                                function LoadPlayer() {
                                    var music_array = [];
                                    
                                    music_array.push({
                                        name: 'Wherever You Go',
                                        url: 'https://blog.yt1209.com/WhereverYouGo.mp3',
                                        artist: 'A Rocket to the Moon',
                                        cover: 'https://p1.music.126.net/ghFwbrRBHXuVGz2kVG3EUw==/2412328511380407.jpg?param=130y130',
                                    });
                                    
                                    music_array.push({
                                        name: 'Gotta Have You',
                                        url: 'https://blog.yt1209.com/Gotta Have You.mp3',
                                        artist: 'The Weepies',
                                        cover: 'https://p2.music.126.net/AXD2wl0N3UooNRL_kPnpGQ==/6650945837329535.jpg?param=130y130',
                                    });
                                    
                                    music_array.push({
                                        name: 'ÊÑõ„Å´„Åß„Åç„Çã„Åì„Å®„ÅØ„Åæ„Å†„ÅÇ„Çã„Åã„ÅÑ',
                                        url: 'https://blog.yt1209.com/ÊÑõ„Å´„Åß„Åç„Çã„Åì„Å®„ÅØ„Åæ„Å†„ÅÇ„Çã„Åã„ÅÑ.mp3',
                                        artist: 'RADWIMPS',
                                        cover: 'https://p2.music.126.net/dRwInA9PpkiKkmNWeUvi0w==/109951164220136544.jpg?param=130y130',
                                    });
                                    
                                    music_array.push({
                                        name: 'ÂºÄÂßãÊáÇ‰∫Ü',
                                        url: 'https://blog.yt1209.com/ÂºÄÂßãÊáÇ‰∫Ü.mp3',
                                        artist: 'Â≠ôÁáïÂßø',
                                        cover: 'https://p2.music.126.net/35P1LoCK43ANZ7Ebngrt4Q==/109951165549829619.jpg?param=130y130',
                                    });
                                    
                                    music_array.push({
                                        name: '„ÇÅ„Åñ„Åõ„Éù„Ç±„É¢„É≥„Éû„Çπ„Çø„Éº',
                                        url: 'https://blog.yt1209.com/„ÇÅ„Åñ„Åõ„Éù„Ç±„É¢„É≥„Éû„Çπ„Çø„Éº.mp3',
                                        artist: 'ÊùæÊú¨Ê¢®È¶ô',
                                        cover: 'https://p1.music.126.net/iAygFRUN_zMX-ObZkjTfOA==/1317214930122446.jpg?param=130y130',
                                    });
                                    
                                    music_array.push({
                                        name: 'Shotgun',
                                        url: 'https://blog.yt1209.com/Shotgun.mp3',
                                        artist: 'Us The Duo',
                                        cover: 'https://p2.music.126.net/owFblNP0hTHbGbtThZk2Ug==/109951164074045609.jpg?param=130y130',
                                    });
                                    
                                    music_array.push({
                                        name: 'FreeLoop',
                                        url: 'https://blog.yt1209.com/FreeLoop.mp3',
                                        artist: 'Daniel Powter',
                                        cover: 'https://p1.music.126.net/grGdswi38xUoYcDBISdKcg==/92358976750445.jpg?param=130y130',
                                    });
                                    
                                    music_array.push({
                                        name: 'Everglow',
                                        url: 'https://blog.yt1209.com/Everglow.mp3',
                                        artist: 'Coldplay,Gwyneth Paltrow',
                                        cover: 'https://p1.music.126.net/tnaTZ9ZokTL7w0kDa73iVA==/3297435376989078.jpg?param=130y130',
                                    });
                                    
                                    
                                    const ap = new APlayer({
                                        container: document.getElementById('playerbox'),
                                        audio: music_array
                                    });
                                    
                                }
                                LoadPlayer();
                            </script>
                            
                                
                                    
                                        
                                                
                                                    <li class="lite-item">
                                                        <header class="lite-item-header">
                                                            <h3 class="lite-item-title">&#x1F468;&#x200D;&#x1F4BB;&#x53CB;&#x94FE;</h3>
                                                        </header>
                                                        <div class="textwidget">
                                                            
                                                                
                                                                    <p onclick="javascript:top.location='https://blog.itjoker.cn'"><span class="link_a"><a href="https://blog.itjoker.cn" alt="ITJoker ">ITJoker -ITJoker&#39;s Blog</a></span></p>

                                                                    
                                                                    <p onclick="javascript:top.location='https://layne666.cn'"><span class="link_a"><a href="https://layne666.cn" alt="Layne666 - Blog ">Layne666 - Blog -‰∏çÂ§öËØ¥‰∫ÜÔºåËØ∏‰ΩçÔºåÊãîÂâëÂêßÔºÅ</a></span></p>

                                                                    
                                                                    <p onclick="javascript:top.location='http://noechou.cn'"><span class="link_a"><a href="http://noechou.cn" alt="noechou ">noechou -life is beautiful</a></span></p>

                                                                    
                                                                    <p onclick="javascript:top.location='https://blog.skywalkerch.cn/'"><span class="link_a"><a href="https://blog.skywalkerch.cn/" alt="Skywalkerch ‚Äì skywalkerchÁöÑÂçöÂÆ¢ ">Skywalkerch ‚Äì skywalkerchÁöÑÂçöÂÆ¢ -Êù•Ëá™ÂÆáÂÆôÂè¶‰∏ÄÁ´ØÁöÑÂ§©Ë°åËÄÖ</a></span></p>

                                                                    
                                                                    <p onclick="javascript:top.location='https://www.summerfire.cn'"><span class="link_a"><a href="https://www.summerfire.cn" alt="Â§èÊó•Ëê§ÁÅ´ ">Â§èÊó•Ëê§ÁÅ´ -‰∏™‰∫∫Â≠¶‰π†Á¨îËÆ∞ÔºåÂ¶ÇÊûúËÉΩÂ∏ÆÂà∞‰Ω†Ôºå‰∏çËÉúËç£Âπ∏„ÄÇ</a></span></p>

                                                                    
                                                                    <p onclick="javascript:top.location='https://www.scery.com'"><span class="link_a"><a href="https://www.scery.com" alt="Anthony&#39;s Blog ">Anthony&#39;s Blog -As you look around</a></span></p>

                                                                    
                                                                    <p onclick="javascript:top.location='https://naiquoy.com'"><span class="link_a"><a href="https://naiquoy.com" alt="Marshall&#39;s Blog ">Marshall&#39;s Blog -</a></span></p>

                                                                    
                                                                        
                                                        </div>
                                                    </li>
    </ul>
</div>
        </div>

</body>
<footer id="foot">
    <a class="back-to-top" href="#"><i class="Card Card-top" ></i><span class="back-to-top-text">0%</span></a>
    <div class="copyright">
        Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
            
                <div style="width:300px;margin:0 auto; padding:0px 0;">
                    <a target="_blank" href="https://www.beian.gov.cn/portal/registerSystemInfo?recordcode=20063723" style="display:inline-block;text-decoration:none;height:20px;line-height:20px;">
                        <img src="https://yanxuan.nosdn.127.net/b610ced5ac6a0e25cf6edf5606c69775.png" style="float:left;">
                        <p id="icpinfo" style="float:left;height:20px;line-height:20px;margin: 0px 0px 0px 5px;">
                            Á≤§ICPÂ§á20063723Âè∑
                        </p>
                    </a>
                </div>
                
                    

                        <div style="font-size:12px">
                            
                                        Â∑≤ÁªèÂª∫Á´ô <b id='build_time'></b>
                        </div>
                        <script src="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io/CDN/js/time.min.js"></script>
                        <script>
                            buildTime = '2021-2-12'
                            setInterval(show_date_time, 1000, buildTime);
                        </script>
                        
                            <a href="https://blog.itjoker.cn">
                                Theme - Card
                            </a>&nbsp;|&nbsp; &#x7248;&#x6743;&#x6240;&#x6709; &copy;
                            <script>
                                var date = new Date();
                                data2 = new Date(buildTime.replace(/-/g, "/"));
                                nowYear = date.getFullYear().toString()
                                buildYear = data2.getFullYear().toString();
                                if (buildYear == nowYear) {
                                    document.write('<span class="my-face">' + nowYear + '</span>');
                                } else {
                                    document.write(buildYear + '-<span class="my-face">' + nowYear + '</span>');
                                }
                            </script>

                            <a href="https://solitudealma.github.io">
                                SolitudeAlma
                            </a>&nbsp;|&nbsp;Powered by
                            <a href="https://coding.net" target="_blank">
                                Coding.net
                            </a>
    </div>
    <script>
        let back2TopText = document.querySelector('.back-to-top-text')
        window.addEventListener('scroll', function(e) {
            let percent = document.scrollingElement.scrollTop / (document.scrollingElement.scrollHeight - document.scrollingElement.clientHeight) * 100;
            if (back2TopText) {
                back2TopText.textContent = Math.floor(percent).toString() + '%';
            }
        });
        var titleTime;
        document.addEventListener("visibilitychange", function() {
            document.hidden ? (document.title = "\uD83D\uDE25" + OriginTitile, clearTimeout(titleTime)) : (document.title = "\uD83D\uDE1D" + OriginTitile, titleTime = setTimeout(function() {
                document.title = OriginTitile
            }, 2E3))
        });
        var OriginTitile = document.title;
        
        App.hitokoto();
        
        
        App.weather();
        
        var themeIcon = document.getElementById("themeIcon");
        const currentTheme = window.localStorage.getItem('theme');
        if (currentTheme == 'dark') {
            themeIcon.classList.remove('Card-moon');
            themeIcon.classList.add('Card-sun');
            imgList = document.getElementsByTagName('img');
            for (let i = 0; i < imgList.length; i++) {
                imgList[i].style.cssText = mediaCssText;
            }
            document.documentElement.style.cssText = cssText;
            document.getElementsByClassName('card-bg')[0].style.cssText = mediaCssText;
        } else {
            themeIcon.classList.remove('Card-sun');
            themeIcon.classList.add('Card-moon');
            imgList = document.getElementsByTagName('img');
            for (let i = 0; i < imgList.length; i++) {
                imgList[i].style.cssText = '';
            }
            document.documentElement.style.cssText = '';
            document.getElementsByClassName('card-bg')[0].style.cssText = '';
        }
        App.clearLog();
        App.outputlog();
        var logo = '%cSolitudeAlma\'%cBlog';
        console.info(
            logo,
            'color: #ffffff; background: #000000; padding:5px 10px 5px 10px;font-size:40px;border-radius:12px 0 0 12px;', 'color: #000000; background: #FE9A00; padding:5px 10px;font-size:40px;border-radius:0 12px 12px 0;'
        );
        $('img').attr('data-fancybox', 'images');
    </script>
</footer>
    <script>
        renderMathInElement(document.body, {
            delimiters: [{
                left: "$$",
                right: "$$",
                display: true
            }, {
                left: "$",
                right: "$",
                display: false
            }]
        });
    </script>

</html>