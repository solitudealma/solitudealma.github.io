<!DOCTYPE html>
<html id="bg">

<head>
    <meta charset="utf-8" />
<!--
    * @Theme Card
    * @Author admin@itjoker.cn
    * @Link https://blog.itjoker.cn
-->

<title>
    SolitudeAlma
</title>
<!--[if lt IE 9]><script src="//cdn.bootcss.com/html5shiv/r29/html5.js"></script><![endif]-->
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
<meta http-equiv="x-dns-prefetch-control" content="on">
<link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
<meta name="author" content="SolitudeAlma">
<meta name="description" content="éƒ½æ‡‚ä¸€ç‚¹ï¼Œä¸æ˜¯å¾ˆæ‡‚çš„å°æä»”">
<meta name="keywords" content="algorithm">
<meta name="gridea-theme" content="Card">
<meta name="spider" content="https://nmsl.sbjxw.ç½‘å€">
<meta name="UpdateTime" content="1630301105350">
<script src="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io/CDN/js/jquery@3.4.1.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io/CDN/js/Card/prism.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@1.0.36/CDN/css/Card/prism.min.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/contrib/auto-render.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>
<!--<script src="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@1.0.36/CDN/js/Card/script.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@1.0.36/CDN/css/Card/main.min.css" />-->
<script src="https://solitudealma.github.io/media/js/script.js"></script>
<link rel="stylesheet" href="https://solitudealma.github.io/media/css/main.min.css" />
<link rel="stylesheet" href="https://solitudealma.github.io/styles/main.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@1.0.36/CDN/css/Card/iconfont.css" />
<!--link rel="stylesheet" type="text/css" href="//at.alicdn.com/t/font_410989_wuhl0k5ojvf.css" /-->
<link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@1.0.36/CDN/js/love.min.js"></script>
<script src="https://cdn1.lncld.net/static/js/av-min-1.5.0.js"></script>
<script>
    $().ready(
        function() {
            var themeIcon = document.getElementById("themeIcon");
            var currentTheme = window.localStorage.getItem('theme');
            if (currentTheme == 'dark') {
                document.getElementsByTagName('html')[0].classList.add('theme-dark');
                document.getElementsByTagName('html')[0].removeAttribute('id');
                themeIcon.classList.remove('Card-moon');
                themeIcon.classList.add('Card-sun');
            } else {
                document.getElementsByTagName('html')[0].classList.remove('theme-dark');
                document.getElementsByTagName('html')[0].setAttribute('id', 'bg');
                themeIcon.classList.remove('Card-sun');
                themeIcon.classList.add('Card-moon');
            }
        }
    )
</script>

    <script src="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io/CDN/js/hit-kounter-lc-0.3.0.js"></script>
    
        
            <script>
                (function() {
                    var bp = document.createElement('script');
                    var curProtocol = window.location.protocol.split(':')[0];
                    if (curProtocol === 'https') {
                        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
                    } else {
                        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
                    }
                    var s = document.getElementsByTagName("script")[0];
                    s.parentNode.insertBefore(bp, s);
                })();
            </script>
            
                    <style>
                        .Card-certify {
                            color: #0091e4 !important;
                        }
                        
                        #foot {
                            color: #666666;
                        }
                        
                        #menu-item:hover {
                            border-bottom: 1px solid rgba(0, 0, 0, 0.5);
                            border-bottom-color: rgba(0, 0, 0, .6);
                        }
                        
                        .gray {
                            -webkit-filter: grayscale(100%);
                            /* webkit */
                            -moz-filter: grayscale(100%);
                            /*firefox*/
                            -ms-filter: grayscale(100%);
                            /*ie9*/
                            -o-filter: grayscale(100%);
                            /*opera*/
                            filter: grayscale(100%);
                            filter: progid: DXImageTransform.Microsoft.BasicImage(grayscale=1);
                            filter: gray;
                            /*ie9- */
                        }
                        
                        .lite-item,
                        #header {
                            opacity: 1;
                        }
                        
                        .lite-item {
                            background-color: #fafafa;
                        }
                        
                        #btnStyle:hover {
                            transition: all .3s ease;
                            /*color: #fff;*/
                            /*background-color: #6b6b6b;*/
                            background-color: #eaeaea;
                            /*#0092ee*/
                            /*linear-gradient( rgb(138, 160, 255) 30%, rgb(90, 140, 250) 70%);*/
                        }
                        
                        #btnStyle {
                            /*background-color: #efefef;*/
                            font-size: 14px;
                            transition: all .3s ease;
                        }
                        
                        .link_a:hover {
                            margin-top: 10px;
                            margin-bottom: 10px;
                            color: #fff;
                            border-left: 8px solid #6b6b6b;
                            padding: 5px;
                            transition: all .3s ease;
                        }
                        
                        html {
                            width: 100%;
                            height: 100%;
                            background-attachment: fixed;
                            background-repeat: no-repeat;
                        }
                    </style>
</head>

<body>
    <header id="header">

    <div id="pc-menu">
        <a id="menu-bar" class="Card Card-menu"></a>
        <a id="menu-title" href="https://solitudealma.github.io">
            SolitudeAlma
        </a>
        <nav id="menu-main" class="menu-main">
            <ul>
                <li id="menu-item" class="menu-item">
                    <div id="tp-weather-widget"></div>
                </li>
                
                    <li id="menu-item" class="menu-item">
                        <a href="/">
                            ğŸˆHome
                        </a>
                    </li>
                    
                    <li id="menu-item" class="menu-item">
                        <a href="/archives">
                            ğŸ“šArchives
                        </a>
                    </li>
                    
                    <li id="menu-item" class="menu-item">
                        <a href="/posts">
                            ğŸ“ƒArticle
                        </a>
                    </li>
                    
                    <li id="menu-item" class="menu-item">
                        <a href="/tags">
                            ğŸ·Tags
                        </a>
                    </li>
                    
                    <li id="menu-item" class="menu-item">
                        <a href="/friends">
                            ğŸ‘©â€ğŸ’»Friends
                        </a>
                    </li>
                    
                    <li id="menu-item" class="menu-item">
                        <a href="/post/about">
                            ğŸ§œâ€â™‚ï¸About
                        </a>
                    </li>
                    
            </ul>
        </nav>
        <form id="gridea-search-form" class="searchform" data-update="1630301105350" action="/search/index.html">
            <i class="Card Card-search"></i>
            <input id="s" class="search-input" autocomplete="off" spellcheck="false" name="q" autofocus="true" placeholder="Search...">
        </form>
    </div>
    <div id="mobile-menu">
        <form id="gridea-search-form" class="mobile-searchform" data-update="1630301105350" action="/search/index.html">
            <i class="Card Card-search"></i>
            <input id="s" class="search-input" autocomplete="off" spellcheck="false" name="q" autofocus="true" placeholder="Search...">
        </form>
        <nav class="menu">
            <ul style="list-style: none;">
                
                    <li class="page_item page-item-2">
                        <a href="/">
                            ğŸˆHome
                        </a>
                    </li>
                    
                    <li class="page_item page-item-2">
                        <a href="/archives">
                            ğŸ“šArchives
                        </a>
                    </li>
                    
                    <li class="page_item page-item-2">
                        <a href="/posts">
                            ğŸ“ƒArticle
                        </a>
                    </li>
                    
                    <li class="page_item page-item-2">
                        <a href="/tags">
                            ğŸ·Tags
                        </a>
                    </li>
                    
                    <li class="page_item page-item-2">
                        <a href="/friends">
                            ğŸ‘©â€ğŸ’»Friends
                        </a>
                    </li>
                    
                    <li class="page_item page-item-2">
                        <a href="/post/about">
                            ğŸ§œâ€â™‚ï¸About
                        </a>
                    </li>
                    
            </ul>
        </nav>
    </div>
    <a id="theme-btn" class="theme-btn" onclick="App.changeTheme()"><i id="themeIcon" class="Card Card-moon"></i></a>
</header>
        <div id="main">
            <div id="main-part">
                <div class="lite-item">
                    <article class="post post-type real-post">
                        <header class="post-type-header">
                            
                                <div class="thumbnail-link" style="background-image: url('https://solitudealma.github.io/post-images/qYIUMWbyl.jpg')"></div>
                                
                                        <div class="thumbnail-shadow">
                                            <h1 class="post-title">
                                                Javaå­¦ä¹ ç¬”è®°ä¹‹Mybatis
                                            </h1>
                                            <div class="post-info">
                                                <span class="post-category"><i class="Card Card-novel"></i>
                                        
                                            <span onclick="javascript:top.location='https://solitudealma.github.io/tag/java/'">Java</span>
                                                
                                                    </span>
                                                    <span class="post-view">
                                                    
                                                        &nbsp;â€¢&nbsp;
                                                    <span id="/post/qYIUMWbyl/" class="leancloud_visitors" data-flag-title="Javaå­¦ä¹ ç¬”è®°ä¹‹Mybatis">
                                                <i class="Card Card-view"></i>&nbsp;é˜…è¯»é‡&nbsp;
                                                <i class="leancloud-visitors-count">0</i>
                                            </span>

                                                    
                                                            </span>&nbsp;â€¢&nbsp;

                                                            <span class="post-readtime">é˜…è¯»æ—¶é—´:
                                            96.7åˆ†</span>
                                                            <span class="post-edit"></span></div>
                                        </div>
                                        <div class="post-relative">
                                            <img alt="SolitudeAlma" src="https://solitudealma.github.io/images/avatar.png?v=1630301105350" srcset="https://solitudealma.github.io/images/avatar.png?v=1630301105350" class="avatar avatar-100 photo" width="100" height="100">
                                            <span class="post-type-author"><a href="https://solitudealma.github.io" title="ç”±SolitudeAlmaå‘å¸ƒ" rel="author">SolitudeAlma<i class="Card Card-certify"></i></a></span>
                                            <span class="post-publish"><i class="fa fa-calendar" aria-hidden="true"></i>&nbsp;2021-08-29</span>
                                        </div>
                        </header>
                        <div class="post-main post-type-main">
                            <div class="post-content">
                                <div class="post-content-real">
                                    <h1 id="1-mybatis">1. Mybatis</h1>
<h2 id="11-mybatisä»‹ç»">1.1 MyBatisä»‹ç»</h2>
<figure data-type="image" tabindex="1"><img src="https://cdn.nlark.com/yuque/0/2021/png/22045814/1628863180929-d30089cb-644d-49fc-b399-dc2b1c626305.png#clientId=u2d9c7733-e67d-4&amp;from=paste&amp;height=173&amp;id=u43146585&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=128&amp;originWidth=423&amp;originalType=binary&amp;ratio=1&amp;size=24041&amp;status=done&amp;style=none&amp;taskId=ue894ae1f-41c0-4e5b-96fb-bacfd354f57&amp;width=571.5" alt="image.png" loading="lazy"></figure>
<ul>
<li>MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„<strong>æŒä¹…å±‚æ¡†æ¶</strong></li>
<li>MyBatis é¿å…äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç å’Œæ‰‹åŠ¨è®¾ç½®å‚æ•°ä»¥åŠè·å–ç»“æœé›†çš„è¿‡ç¨‹</li>
<li>MyBatis å¯ä»¥ä½¿ç”¨ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸç”Ÿä¿¡æ¯ï¼Œå°†æ¥å£å’Œ Java çš„ å®ä½“ç±» ã€Plain Old Java Objects,æ™®é€šçš„è€å¼Javaå¯¹è±¡ã€‘æ˜ å°„æˆæ•°æ®åº“ä¸­çš„è®°å½•ã€‚</li>
<li>MyBatis æœ¬æ˜¯apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®ibatis, 2010å¹´è¿™ä¸ªé¡¹ç›®ç”±apache è¿ç§»åˆ°äº†google codeï¼Œå¹¶ä¸”æ”¹åä¸ºMyBatis ã€‚</li>
<li>2013å¹´11æœˆè¿ç§»åˆ°<strong>Github</strong> .</li>
<li>Mybatiså®˜æ–¹æ–‡æ¡£ : http://www.mybatis.org/mybatis-3/zh/index.html</li>
<li>GitHub : https://github.com/mybatis/mybatis-3</li>
</ul>
<p>å¦‚ä½•è·å–Mybatis</p>
<ul>
<li>mavenä»“åº“</li>
</ul>
<pre><code class="language-xml">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
    &lt;artifactId&gt;mybatis&lt;/artifactId&gt;
    &lt;version&gt;3.5.7&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<ul>
<li>Githubï¼š<a href="https://github.com/mybatis/mybatis-3/releases">https://github.com/mybatis/mybatis-3/releases</a></li>
<li>ä¸­æ–‡æ–‡æ¡£ï¼š<a href="http://www.mybatis.org/mybatis-3/zh/index.html">http://www.mybatis.org/mybatis-3/zh/index.html</a></li>
</ul>
<h2 id="12-æŒä¹…åŒ–">1.2 æŒä¹…åŒ–</h2>
<p><strong>æŒä¹…åŒ–æ˜¯å°†ç¨‹åºæ•°æ®åœ¨æŒä¹…çŠ¶æ€å’Œç¬æ—¶çŠ¶æ€é—´è½¬æ¢çš„æœºåˆ¶ã€‚</strong></p>
<ul>
<li>å³æŠŠæ•°æ®ï¼ˆå¦‚å†…å­˜ä¸­çš„å¯¹è±¡ï¼‰ä¿å­˜åˆ°å¯æ°¸ä¹…ä¿å­˜çš„å­˜å‚¨è®¾å¤‡ä¸­ï¼ˆå¦‚ç£ç›˜ï¼‰ã€‚æŒä¹…åŒ–çš„ä¸»è¦åº”ç”¨æ˜¯å°†å†…å­˜ä¸­çš„å¯¹è±¡å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œæˆ–è€…å­˜å‚¨åœ¨ç£ç›˜æ–‡ä»¶ä¸­ã€XMLæ•°æ®æ–‡ä»¶ä¸­ç­‰ç­‰ã€‚</li>
<li>JDBCå°±æ˜¯ä¸€ç§æŒä¹…åŒ–æœºåˆ¶ã€‚æ–‡ä»¶IOä¹Ÿæ˜¯ä¸€ç§æŒä¹…åŒ–æœºåˆ¶ã€‚</li>
<li>åœ¨ç”Ÿæ´»ä¸­ : å°†é²œè‚‰å†·è—ï¼Œåƒçš„æ—¶å€™å†è§£å†»çš„æ–¹æ³•ä¹Ÿæ˜¯ã€‚å°†æ°´æœåšæˆç½å¤´çš„æ–¹æ³•ä¹Ÿæ˜¯ã€‚</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦æŒä¹…åŒ–æœåŠ¡å‘¢ï¼Ÿé‚£æ˜¯ç”±äºå†…å­˜æœ¬èº«çš„ç¼ºé™·å¼•èµ·çš„</strong></p>
<ul>
<li>å†…å­˜æ–­ç”µåæ•°æ®ä¼šä¸¢å¤±ï¼Œä½†æœ‰ä¸€äº›å¯¹è±¡æ˜¯æ— è®ºå¦‚ä½•éƒ½ä¸èƒ½ä¸¢å¤±çš„ï¼Œæ¯”å¦‚é“¶è¡Œè´¦å·ç­‰ï¼Œé—æ†¾çš„æ˜¯ï¼Œäººä»¬è¿˜æ— æ³•ä¿è¯å†…å­˜æ°¸ä¸æ‰ç”µã€‚</li>
<li>å†…å­˜è¿‡äºæ˜‚è´µï¼Œä¸ç¡¬ç›˜ã€å…‰ç›˜ç­‰å¤–å­˜ç›¸æ¯”ï¼Œå†…å­˜çš„ä»·æ ¼è¦é«˜2~3ä¸ªæ•°é‡çº§ï¼Œè€Œä¸”ç»´æŒæˆæœ¬ä¹Ÿé«˜ï¼Œè‡³å°‘éœ€è¦ä¸€ç›´ä¾›ç”µå§ã€‚æ‰€ä»¥å³ä½¿å¯¹è±¡ä¸éœ€è¦æ°¸ä¹…ä¿å­˜ï¼Œä¹Ÿä¼šå› ä¸ºå†…å­˜çš„å®¹é‡é™åˆ¶ä¸èƒ½ä¸€ç›´å‘†åœ¨å†…å­˜ä¸­ï¼Œéœ€è¦æŒä¹…åŒ–æ¥ç¼“å­˜åˆ°å¤–å­˜ã€‚</li>
</ul>
<h2 id="13-æŒä¹…å±‚">1.3 æŒä¹…å±‚</h2>
<p><strong>ä»€ä¹ˆæ˜¯æŒä¹…å±‚ï¼Ÿ</strong></p>
<ul>
<li>å®ŒæˆæŒä¹…åŒ–å·¥ä½œçš„ä»£ç å—ã€‚ ----&gt;  daoå±‚ ã€DAO (Data Access Object)  æ•°æ®è®¿é—®å¯¹è±¡ã€‘</li>
<li>å¤§å¤šæ•°æƒ…å†µä¸‹ç‰¹åˆ«æ˜¯ä¼ä¸šçº§åº”ç”¨ï¼Œæ•°æ®æŒä¹…åŒ–å¾€å¾€ä¹Ÿå°±æ„å‘³ç€å°†å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åˆ°ç£ç›˜ä¸ŠåŠ ä»¥å›ºåŒ–ï¼Œè€ŒæŒä¹…åŒ–çš„å®ç°è¿‡ç¨‹åˆ™å¤§å¤šé€šè¿‡å„ç§<strong>å…³ç³»æ•°æ®åº“</strong>æ¥å®Œæˆã€‚</li>
<li>ä¸è¿‡è¿™é‡Œæœ‰ä¸€ä¸ªå­—éœ€è¦ç‰¹åˆ«å¼ºè°ƒï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„â€œå±‚â€ã€‚å¯¹äºåº”ç”¨ç³»ç»Ÿè€Œè¨€ï¼Œæ•°æ®æŒä¹…åŠŸèƒ½å¤§å¤šæ˜¯å¿…ä¸å¯å°‘çš„ç»„æˆéƒ¨åˆ†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬çš„ç³»ç»Ÿä¸­ï¼Œå·²ç»å¤©ç„¶çš„å…·å¤‡äº†â€œæŒä¹…å±‚â€æ¦‚å¿µï¼Ÿä¹Ÿè®¸æ˜¯ï¼Œä½†ä¹Ÿè®¸å®é™…æƒ…å†µå¹¶éå¦‚æ­¤ã€‚ä¹‹æ‰€ä»¥è¦ç‹¬ç«‹å‡ºä¸€ä¸ªâ€œæŒä¹…å±‚â€çš„æ¦‚å¿µ,è€Œä¸æ˜¯â€œæŒä¹…æ¨¡å—â€ï¼Œâ€œæŒä¹…å•å…ƒâ€ï¼Œä¹Ÿå°±æ„å‘³ç€ï¼Œæˆ‘ä»¬çš„ç³»ç»Ÿæ¶æ„ä¸­ï¼Œåº”è¯¥æœ‰ä¸€ä¸ªç›¸å¯¹ç‹¬ç«‹çš„é€»è¾‘å±‚é¢ï¼Œä¸“æ³¨äºæ•°æ®æŒä¹…åŒ–é€»è¾‘çš„å®ç°.</li>
<li>ä¸ç³»ç»Ÿå…¶ä»–éƒ¨åˆ†ç›¸å¯¹è€Œè¨€ï¼Œè¿™ä¸ªå±‚é¢åº”è¯¥å…·æœ‰ä¸€ä¸ªè¾ƒä¸ºæ¸…æ™°å’Œä¸¥æ ¼çš„é€»è¾‘è¾¹ç•Œã€‚ã€è¯´ç™½äº†å°±æ˜¯ç”¨æ¥æ“ä½œæ•°æ®åº“å­˜åœ¨çš„ï¼ã€‘</li>
</ul>
<h2 id="14-ä¸ºä»€ä¹ˆéœ€è¦mybatis">1.4 ä¸ºä»€ä¹ˆéœ€è¦Mybatis</h2>
<ul>
<li>Mybatiså°±æ˜¯å¸®åŠ©ç¨‹åºçŒ¿å°†æ•°æ®å­˜å…¥æ•°æ®åº“ä¸­ , å’Œä»æ•°æ®åº“ä¸­å–æ•°æ® .</li>
<li>ä¼ ç»Ÿçš„jdbcæ“ä½œ , æœ‰å¾ˆå¤šé‡å¤ä»£ç å— .æ¯”å¦‚ : æ•°æ®å–å‡ºæ—¶çš„å°è£… , æ•°æ®åº“çš„å»ºç«‹è¿æ¥ç­‰ç­‰... , é€šè¿‡æ¡†æ¶å¯ä»¥å‡å°‘é‡å¤ä»£ç ,æé«˜å¼€å‘æ•ˆç‡ .</li>
<li>MyBatis æ˜¯ä¸€ä¸ªåŠè‡ªåŠ¨åŒ–çš„<strong>ORMæ¡†æ¶ (Object Relationship Mapping) --&gt;å¯¹è±¡å…³ç³»æ˜ å°„</strong></li>
<li>æ‰€æœ‰çš„äº‹æƒ…ï¼Œä¸ç”¨Mybatisä¾æ—§å¯ä»¥åšåˆ°ï¼Œåªæ˜¯ç”¨äº†å®ƒï¼Œæ‰€æœ‰å®ç°ä¼šæ›´åŠ ç®€å•ï¼<strong>æŠ€æœ¯æ²¡æœ‰é«˜ä½ä¹‹åˆ†ï¼Œåªæœ‰ä½¿ç”¨è¿™ä¸ªæŠ€æœ¯çš„äººæœ‰é«˜ä½ä¹‹åˆ«</strong></li>
<li>MyBatisçš„ä¼˜ç‚¹
<ul>
<li>ç®€å•æ˜“å­¦ï¼šæœ¬èº«å°±å¾ˆå°ä¸”ç®€å•ã€‚æ²¡æœ‰ä»»ä½•ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œæœ€ç®€å•å®‰è£…åªè¦ä¸¤ä¸ªjaræ–‡ä»¶+é…ç½®å‡ ä¸ªsqlæ˜ å°„æ–‡ä»¶å°±å¯ä»¥äº†ï¼Œæ˜“äºå­¦ä¹ ï¼Œæ˜“äºä½¿ç”¨ï¼Œé€šè¿‡æ–‡æ¡£å’Œæºä»£ç ï¼Œå¯ä»¥æ¯”è¾ƒå®Œå…¨çš„æŒæ¡å®ƒçš„è®¾è®¡æ€è·¯å’Œå®ç°ã€‚</li>
<li>çµæ´»ï¼šmybatisä¸ä¼šå¯¹åº”ç”¨ç¨‹åºæˆ–è€…æ•°æ®åº“çš„ç°æœ‰è®¾è®¡å¼ºåŠ ä»»ä½•å½±å“ã€‚sqlå†™åœ¨xmlé‡Œï¼Œä¾¿äºç»Ÿä¸€ç®¡ç†å’Œä¼˜åŒ–ã€‚é€šè¿‡sqlè¯­å¥å¯ä»¥æ»¡è¶³æ“ä½œæ•°æ®åº“çš„æ‰€æœ‰éœ€æ±‚ã€‚</li>
<li>è§£é™¤sqlä¸ç¨‹åºä»£ç çš„è€¦åˆï¼šé€šè¿‡æä¾›DAOå±‚ï¼Œå°†ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®è®¿é—®é€»è¾‘åˆ†ç¦»ï¼Œä½¿ç³»ç»Ÿçš„è®¾è®¡æ›´æ¸…æ™°ï¼Œæ›´æ˜“ç»´æŠ¤ï¼Œæ›´æ˜“å•å…ƒæµ‹è¯•ã€‚sqlå’Œä»£ç çš„åˆ†ç¦»ï¼Œæé«˜äº†å¯ç»´æŠ¤æ€§ã€‚</li>
<li>æä¾›xmlæ ‡ç­¾ï¼Œæ”¯æŒç¼–å†™åŠ¨æ€sqlã€‚</li>
<li>.......</li>
</ul>
</li>
<li>æœ€é‡è¦çš„ä¸€ç‚¹ï¼Œä½¿ç”¨çš„äººå¤šï¼å…¬å¸éœ€è¦ï¼</li>
</ul>
<h1 id="2-ç¬¬ä¸€ä¸ªmybatisç¨‹åº">2. ç¬¬ä¸€ä¸ªMybatisç¨‹åº</h1>
<p><strong>æ€è·¯æµç¨‹ï¼šæ­å»ºç¯å¢ƒ--&gt;å¯¼å…¥Mybatis---&gt;ç¼–å†™ä»£ç ---&gt;æµ‹è¯•</strong></p>
<h2 id="21-æ­å»ºç¯å¢ƒ">2.1 æ­å»ºç¯å¢ƒ</h2>
<p>æ­å»ºæ•°æ®åº“</p>
<pre><code class="language-sql">CREATE DATABASE `mybatis` CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;

USE `mybatis`;

DROP TABLE IF EXISTS `user`;

CREATE TABLE `user` (
`id` INT(20) NOT NULL,
`name` VARCHAR(30) DEFAULT NULL,
`pwd` VARCHAR(30) DEFAULT NULL,
PRIMARY KEY (`id`)
) ENGINE=INNODB DEFAULT CHARSET=utf8mb4;

INSERT INTO `user`(`id`,`name`,`pwd`) VALUES (1,'SolitudeAlma','123456'),(2,'å¼ ä¸‰','abcdef'),(3,'æå››','987654');
</code></pre>
<p>æ–°å»ºé¡¹ç›®</p>
<ol>
<li>æ–°å»ºä¸€ä¸ªæ™®é€šçš„mavené¡¹ç›®ï¼ˆæ— æ¨¡æ¿ï¼‰</li>
<li>åˆ é™¤srcç›®å½•ï¼Œè®©å·¥ç¨‹å˜ä¸ºä¸€ä¸ªçˆ¶å·¥ç¨‹</li>
<li>å¯¼å…¥ä¾èµ–</li>
</ol>
<pre><code class="language-xml">&lt;!--å¯¼å…¥ä¾èµ–--&gt;
&lt;dependencies&gt;
  &lt;!--Mybatis--&gt;
  &lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
    &lt;artifactId&gt;mybatis&lt;/artifactId&gt;
    &lt;version&gt;3.5.7&lt;/version&gt;
  &lt;/dependency&gt;
  &lt;!--mysqlé©±åŠ¨--&gt;
  &lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;mysql&lt;/groupId&gt;
    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
    &lt;version&gt;8.0.24&lt;/version&gt;
  &lt;/dependency&gt;
  &lt;!--junitï¼Œæµ‹è¯•ç”¨--&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;junit&lt;/groupId&gt;
    &lt;artifactId&gt;junit&lt;/artifactId&gt;
    &lt;version&gt;4.13.2&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
  &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>
<h2 id="22-åˆ›å»ºä¸€ä¸ªæ¨¡å—">2.2 åˆ›å»ºä¸€ä¸ªæ¨¡å—</h2>
<p>è¿™æ ·å­é¡¹ç›®å°±ä¸éœ€è¦é‡å¤æ·»åŠ ä¾èµ–</p>
<ol>
<li>ç¼–å†™MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶</li>
</ol>
<p>æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE configuration
        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;
&lt;!--configurationæ ¸å¿ƒé…ç½®æ–‡ä»¶--&gt;
&lt;configuration&gt;
    &lt;environments default=&quot;development&quot;&gt;
        &lt;environment id=&quot;development&quot;&gt;
            &lt;transactionManager type=&quot;JDBC&quot;/&gt;
            &lt;dataSource type=&quot;POOLED&quot;&gt;
                &lt;property name=&quot;driver&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt;
                &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/mybatis?useSSL=true&amp;amp;useUnicode=true&amp;amp;characterEncoding=UTF-8&amp;amp;&quot;/&gt;
                &lt;property name=&quot;username&quot; value=&quot;${username}&quot;/&gt;
                &lt;property name=&quot;password&quot; value=&quot;${password}&quot;/&gt;
            &lt;/dataSource&gt;
        &lt;/environment&gt;
    &lt;/environments&gt;
&lt;/configuration&gt;
</code></pre>
<ol start="2">
<li>ç¼–å†™MyBatiså·¥å…·ç±»</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.utils;

import org.apache.ibatis.io.Resources;
import org.apache.ibatis.session.SqlSession;
import org.apache.ibatis.session.SqlSessionFactory;
import org.apache.ibatis.session.SqlSessionFactoryBuilder;

import javax.annotation.Resource;
import java.io.IOException;
import java.io.InputStream;

/**
 * sqlSessionFactory ---&gt; sqlSession
 * @author SolitudeAlma
 * @date 2021/8/13
 */
public class MybatisUtils {
    private static SqlSessionFactory sqlSessionFactory;
    static {
        try {
            //è·å–sqlSessionFactoryå¯¹è±¡
            String resource = &quot;mybatis-config.xml&quot;;
            InputStream inputStream = Resources.getResourceAsStream(resource);
            sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    /**
     * æ—¢ç„¶æœ‰äº† SqlSessionFactoryï¼Œé¡¾åæ€ä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸­è·å¾— SqlSession çš„å®ä¾‹ã€‚SqlSession æä¾›äº†åœ¨æ•°æ®åº“æ‰§è¡Œ SQL
     * å‘½ä»¤æ‰€éœ€çš„æ‰€æœ‰æ–¹æ³•ã€‚ä½ å¯ä»¥é€šè¿‡ SqlSession å®ä¾‹æ¥ç›´æ¥æ‰§è¡Œå·²æ˜ å°„çš„SQLè¯­å¥ã€‚ sqlSessionç›¸å½“äºjdbcä¸­çš„
     * prepareStatementå¯¹è±¡
     * @return SqlSessionFactory
     */
    public static SqlSession getSqlSession() {
        return sqlSessionFactory.openSession();
    }
}
</code></pre>
<h2 id="23-ç¼–å†™ä»£ç ">2.3 ç¼–å†™ä»£ç </h2>
<ul>
<li>å®ä½“ç±»</li>
</ul>
<pre><code class="language-java">package com.SolitudeAlma.pojo;

/**
 * @author SolitudeAlma
 * @date 2021/8/14
 * @description å®ä½“ç±»
 */
public class User {
    private int id;
    private String name;
    private String pwd;

    public User(int id, String name, String pwd) {
        this.id = id;
        this.name = name;
        this.pwd = pwd;
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getPwd() {
        return pwd;
    }

    public void setPwd(String pwd) {
        this.pwd = pwd;
    }

    @Override
    public String toString() {
        return &quot;User{&quot; +
                &quot;id=&quot; + id +
                &quot;, name='&quot; + name + '\'' +
                &quot;, pwd='&quot; + pwd + '\'' +
                '}';
    }
}
</code></pre>
<ul>
<li>Daoæ¥å£</li>
</ul>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.User;

import java.util.List;

/**
 * @author SolitudeAlma
 * @date 2021/8/14
 */
public interface UserDao {
    /**
     * æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯
     * @return User
     */
    List&lt;User&gt; getUserList();
}
</code></pre>
<ul>
<li>æ¥å£å®ç°ç±»</li>
</ul>
<p>ç”¨xmlä»£æ›¿UserDaoImplå®ç°ç±»</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;!--namespaceç»‘å®šä¸€ä¸ªå¯¹åº”çš„Dao/Mapperæ¥å£ï¼ˆä»¥åæ”¹ä¸ºMapperï¼‰--&gt;
&lt;mapper namespace=&quot;com.SolitudeAlma.dao.UserDao&quot;&gt;
    &lt;!--idå¯¹åº”æ¥å£æ–¹æ³•å--&gt;
    &lt;select id=&quot;getUserList&quot; resultType=&quot;com.SolitudeAlma.pojo.User&quot;&gt;
        select * from user;
    &lt;/select&gt;
&lt;/mapper&gt;
</code></pre>
<h2 id="24-æµ‹è¯•">2.4 æµ‹è¯•</h2>
<p>æ³¨æ„ç‚¹ï¼šorg.apache.ibatis.binding.BindingException: Type interface com.SolitudeAlma.dao.UserDao is not known to the MapperRegistry.</p>
<p>MapperRegistryæ˜¯ä»€ä¹ˆï¼Ÿ<br>
æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œmapperâ€‹</p>
<pre><code class="language-xml">&lt;!--æ¯ä¸€ä¸ªMapper.xmléƒ½éœ€è¦åœ¨Mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ--&gt;
&lt;mappers&gt;
    &lt;mapper resource=&quot;com/SolitudeAlma/dao/UserMapper.xml&quot;/&gt;
&lt;/mappers&gt;
</code></pre>
<p>Could not find resource com/SolitudeAlma/dao/UserMapper.xml<br>
JavaWebä¸­æåˆ°è¿‡ï¼Œé¡¹ç›®æ„å»ºæ—¶ï¼Œjavaç›®å½•ä¸‹çš„éjavaæ–‡ä»¶ä¸ä¼šè¢«ç”Ÿæˆåˆ°targetç›®å½•ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨çˆ¶é¡¹ç›®çš„pom.xmlä¸­buildæ ‡ç­¾ä¸‹åŠ å…¥rusourceæ ‡ç­¾ï¼ŒæŠŠæˆ‘ä»¬çš„xmlç­‰é…ç½®æ–‡ä»¶ä¹Ÿç”Ÿæˆåˆ°target</p>
<pre><code class="language-xml">&lt;!--åœ¨buildä¸­é…ç½®resources,æ¥é˜²æ­¢æˆ‘ä»¬èµ„æºå¯¼å‡ºå¤±è´¥çš„é—®é¢˜--&gt;
&lt;build&gt;
  &lt;resources&gt;
    &lt;resource&gt;
      &lt;directory&gt;src/main/resources&lt;/directory&gt;
      &lt;includes&gt;
        &lt;include&gt;**/*.properties&lt;/include&gt;
        &lt;include&gt;**/*.xml&lt;/include&gt;
      &lt;/includes&gt;
      &lt;filtering&gt;false&lt;/filtering&gt;
    &lt;/resource&gt;
    &lt;resource&gt;
      &lt;directory&gt;src/main/java&lt;/directory&gt;
      &lt;includes&gt;
        &lt;include&gt;**/*.properties&lt;/include&gt;
        &lt;include&gt;**/*.xml&lt;/include&gt;
      &lt;/includes&gt;
      &lt;filtering&gt;false&lt;/filtering&gt;
    &lt;/resource&gt;
  &lt;/resources&gt;
&lt;/build&gt;
</code></pre>
<ul>
<li>junitæµ‹è¯•</li>
</ul>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.User;
import com.SolitudeAlma.utils.MybatisUtils;
import org.apache.ibatis.session.SqlSession;
import org.junit.Test;

import java.util.List;

/**
 * junitæµ‹è¯•ç±»
 * @author SolitudeAlma
 * @date 2021/8/14
 */
public class UserDaoTest {
    @Test
    public void test() {

        //è·å–SqlSessionå¯¹è±¡
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        //æ–¹å¼ä¸€:getMapper
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        List&lt;User&gt; userList = mapper.getUserList();

        //æ–¹å¼äºŒ:ä¸æ¨èä½¿ç”¨
        //List&lt;User&gt; userList = sqlSession.selectList(&quot;com.SolitudeAlma.dao.UserDao.getUserList&quot;);
        for (User user : userList) {
            System.out.println(user);
        }
        //å…³é—­SqlSession
        sqlSession.close();
    }
}
</code></pre>
<p>å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼š</p>
<ol>
<li>é…ç½®æ–‡ä»¶æ²¡æœ‰æ³¨å†Œ</li>
<li>ç»‘å®šæ¥å£é”™è¯¯</li>
<li>æ–¹æ³•åä¸å¯¹</li>
<li>è¿”å›ç±»å‹ä¸å¯¹</li>
<li>mavenå¯¼å‡ºèµ„æº</li>
</ol>
<blockquote>
<p>namespace</p>
</blockquote>
<ol>
<li>å°†ä¸Šé¢æ¡ˆä¾‹ä¸­çš„UserDaoæ¥å£æ”¹åä¸ºUserMapperï¼›</li>
<li>å°†UserMapper.xmlä¸­çš„namespaceæ”¹ä¸ºä¸ºUserDaoçš„è·¯å¾„ .</li>
<li>å†æ¬¡æµ‹è¯•</li>
</ol>
<p><strong>ç»“è®ºï¼š</strong><br>
é…ç½®æ–‡ä»¶ä¸­namespaceä¸­çš„åç§°ä¸ºå¯¹åº”Mapperæ¥å£æˆ–è€…Daoæ¥å£çš„å®Œæ•´åŒ…å,å¿…é¡»ä¸€è‡´ï¼</p>
<h1 id="3-crudæ“ä½œ">3. CRUDæ“ä½œ</h1>
<h2 id="31-select">3.1 SELECT</h2>
<ul>
<li>selectæ ‡ç­¾æ˜¯mybatisä¸­æœ€å¸¸ç”¨çš„æ ‡ç­¾ä¹‹ä¸€</li>
<li>selectè¯­å¥æœ‰å¾ˆå¤šå±æ€§å¯ä»¥è¯¦ç»†é…ç½®æ¯ä¸€æ¡SQLè¯­å¥
<ul>
<li>SQLè¯­å¥è¿”å›å€¼ç±»å‹ã€‚ã€å®Œæ•´çš„ç±»åæˆ–è€…åˆ«åã€‘</li>
<li>ä¼ å…¥SQLè¯­å¥çš„å‚æ•°ç±»å‹ ã€‚ã€ä¸‡èƒ½çš„Mapï¼Œå¯ä»¥å¤šå°è¯•ä½¿ç”¨ã€‘</li>
<li>å‘½åç©ºé—´ä¸­å”¯ä¸€çš„æ ‡è¯†ç¬¦</li>
<li>æ¥å£ä¸­çš„æ–¹æ³•åä¸æ˜ å°„æ–‡ä»¶ä¸­çš„SQLè¯­å¥ID ä¸€ä¸€å¯¹åº”</li>
<li>idï¼šnamespaceå¯¹åº”æ¥å£çš„æ–¹æ³•å</li>
<li>parameterTypeï¼šå‚æ•°ç±»å‹</li>
<li>resultTypeï¼šSQLè¯­å¥è¿”å›ç»“æœçš„ç±»å‹</li>
</ul>
</li>
</ul>
<p><strong>éœ€æ±‚ï¼šæ ¹æ®idæŸ¥è¯¢ç”¨æˆ·</strong></p>
<ol>
<li>åœ¨UserDaoä¸­æ·»åŠ å¯¹åº”æ–¹æ³•</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.User;

import java.util.List;

/**
 * @author SolitudeAlma
 * @date 2021/8/14
 */
public interface UserDao {
    /**
     * æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯
     * @return List ç”¨æˆ·ä¿¡æ¯é›†åˆ
     */
    List&lt;User&gt; getUserList();

    /**
     * æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯
     * @param id ç”¨æˆ·å”¯ä¸€æ ‡è¯†
     * @return User å•ä¸ªç”¨æˆ·çš„ä¿¡æ¯
     */
    User getUserById(int id);
}

</code></pre>
<ol start="2">
<li>åœ¨UserMapper.xmlä¸­æ·»åŠ Selectè¯­å¥</li>
</ol>
<pre><code class="language-xml">&lt;select id=&quot;getUserById&quot; resultType=&quot;com.SolitudeAlma.pojo.User&quot; parameterType=&quot;int&quot;&gt;
  select * from user where id = #{id};
&lt;/select&gt;
</code></pre>
<ol start="3">
<li>æµ‹è¯•ç±»ä¸­æµ‹è¯•</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.User;
import com.SolitudeAlma.utils.MybatisUtils;
import org.apache.ibatis.session.SqlSession;
import org.junit.Test;

import java.util.List;

/**
 * junitæµ‹è¯•ç±»
 * @author SolitudeAlma
 * @date 2021/8/14
 */
public class UserDaoTest {
    @Test
    public void test() {

        //è·å–SqlSessionå¯¹è±¡
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        //æ–¹å¼ä¸€:getMapper
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        List&lt;User&gt; userList = mapper.getUserList();

        //æ–¹å¼äºŒ:ä¸æ¨èä½¿ç”¨
        //List&lt;User&gt; userList = sqlSession.selectList(&quot;com.SolitudeAlma.dao.UserDao.getUserList&quot;);
        for (User user : userList) {
            System.out.println(user);
        }
        //å…³é—­SqlSession
        sqlSession.close();
    }

    @Test
    public  void getUserById() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        User userInfo = mapper.getUserById(1);
        System.out.println(userInfo);
        sqlSession.close();
    }
}

</code></pre>
<h2 id="32-insert">3.2 INSERT</h2>
<p>ä¸€èˆ¬ä½¿ç”¨insertæ ‡ç­¾è¿›è¡Œæ’å…¥æ“ä½œï¼Œå®ƒçš„é…ç½®å’Œselectæ ‡ç­¾å·®ä¸å¤šï¼<br>
<strong>éœ€æ±‚ï¼šç»™æ•°æ®åº“å¢åŠ ä¸€ä¸ªç”¨æˆ·</strong></p>
<ol>
<li>åœ¨UserDaoæ¥å£ä¸­æ·»åŠ å¯¹åº”çš„æ–¹æ³•</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.User;

import java.util.List;

/**
 * @author SolitudeAlma
 * @date 2021/8/14
 */
public interface UserDao {
    /**
     * æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯
     * @return List ç”¨æˆ·ä¿¡æ¯é›†åˆ
     */
    List&lt;User&gt; getUserList();

    /**
     * æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯
     * @param id ç”¨æˆ·å”¯ä¸€æ ‡è¯†
     * @return User å•ä¸ªç”¨æˆ·çš„ä¿¡æ¯
     */
    User getUserById(int id);

    /**
     * æ’å…¥ä¸€ä¸ªç”¨æˆ·ä¿¡æ¯
     * @param user ç”¨æˆ·ä¿¡æ¯ç±»
     * @return SQLæŸ¥è¯¢ç»“æœï¼ŒæˆåŠŸå½±å“å‡ æ¡æ•°æ®
     */
    int insertOne(User user);   
}
</code></pre>
<ol start="2">
<li>åœ¨UserMapper.xmlä¸­æ·»åŠ insertè¯­å¥</li>
</ol>
<pre><code class="language-xml">&lt;!--å¯¹è±¡ä¸­çš„å±æ€§å¯ä»¥ç›´æ¥å–å‡ºæ¥--&gt;
&lt;insert id=&quot;insertOne&quot; parameterType=&quot;com.SolitudeAlma.pojo.User&quot; &gt;
  insert into user (id, name, pwd) values (#{id}, #{name}, #{pwd});
&lt;/insert&gt;
</code></pre>
<p>3.æµ‹è¯•</p>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.User;
import com.SolitudeAlma.utils.MybatisUtils;
import org.apache.ibatis.session.SqlSession;
import org.junit.Test;

import java.util.List;

/**
 * junitæµ‹è¯•ç±»
 * @author SolitudeAlma
 * @date 2021/8/14
 */
public class UserDaoTest {
    @Test
    public void test() {

        //è·å–SqlSessionå¯¹è±¡
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        //æ–¹å¼ä¸€:getMapper
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        List&lt;User&gt; userList = mapper.getUserList();

        //æ–¹å¼äºŒ:ä¸æ¨èä½¿ç”¨
        //List&lt;User&gt; userList = sqlSession.selectList(&quot;com.SolitudeAlma.dao.UserDao.getUserList&quot;);
        for (User user : userList) {
            System.out.println(user);
        }
        //å…³é—­SqlSession
        sqlSession.close();
    }

    @Test
    public  void getUserById() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        User userInfo = mapper.getUserById(1);
        System.out.println(userInfo);
        sqlSession.close();
    }

    @Test
    public  void insertOne() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        int result = mapper.insertOne(new User(4, &quot;å°æ˜&quot;, &quot;1212&quot;));
        System.out.println(result);
        //å¦‚æœä¸åŠ ä¸Šè¿™å¥æäº¤äº‹åŠ¡ï¼Œæˆ‘ä»¬ä¼šå‘ç°è™½ç„¶è¾“å‡ºäº†1ï¼Œä½†æ˜¯è¿˜æ˜¯æ²¡æœ‰æ’å…¥æˆåŠŸï¼Œé‚£æ˜¯å› ä¸ºæˆ‘ä»¬çš„å·¥
        //å…·ç±»ä¸­çš„openSessionæ–¹æ³•æ²¡æœ‰ä¼ å‚æ•°ï¼Œé»˜è®¤æ‰‹åŠ¨æäº¤äº‹åŠ¡ï¼Œè€Œmysqlæ˜¯è‡ªåŠ¨æäº¤äº‹åŠ¡çš„ï¼Œæ‰€ä»¥æˆ‘
       	//åªè¦è®¾ç½®å‚æ•°ä¸ºtrueå°±è¡Œäº†ï¼Œfalseå’Œä¸ä¼ å‚éƒ½æ˜¯æ‰‹åŠ¨æäº¤ã€‚è¿™æ ·ç›¸å¯¹æ¯”è¾ƒå®‰å…¨
        sqlSession.commit();
        sqlSession.close();
    }
}
</code></pre>
<p><strong>æ³¨æ„ç‚¹ï¼šå¢ã€åˆ ã€æ”¹æ“ä½œéœ€è¦æäº¤äº‹åŠ¡ï¼</strong></p>
<h2 id="33-update">3.3 UPDATE</h2>
<p>ä¸€èˆ¬ä½¿ç”¨updateæ ‡ç­¾è¿›è¡Œæ›´æ–°æ“ä½œï¼Œå®ƒçš„é…ç½®å’Œselectæ ‡ç­¾å·®ä¸å¤šï¼<br>
<strong>éœ€æ±‚ï¼šä¿®æ”¹ç”¨æˆ·çš„ä¿¡æ¯</strong></p>
<ol>
<li>åŒç†ï¼Œç¼–å†™æ¥å£æ–¹æ³•</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.User;

import java.util.List;

/**
 * @author SolitudeAlma
 * @date 2021/8/14
 */
public interface UserDao {
    /**
     * æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯
     * @return List ç”¨æˆ·ä¿¡æ¯é›†åˆ
     */
    List&lt;User&gt; getUserList();

    /**
     * æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯
     * @param id ç”¨æˆ·å”¯ä¸€æ ‡è¯†
     * @return User å•ä¸ªç”¨æˆ·çš„ä¿¡æ¯
     */
    User getUserById(int id);

    /**
     * æ’å…¥ä¸€ä¸ªç”¨æˆ·ä¿¡æ¯
     * @param user ç”¨æˆ·ä¿¡æ¯ç±»
     * @return SQLæŸ¥è¯¢ç»“æœï¼ŒæˆåŠŸå½±å“å‡ æ¡æ•°æ®
     */
    int insertOne(User user);

    /**
     * ä¿®æ”¹ä¸€ä¸ªç”¨æˆ·çš„ä¿¡æ¯
     * @param user ç”¨æˆ·ä¿¡æ¯ç±»
     * @return SQLæŸ¥è¯¢ç»“æœï¼ŒæˆåŠŸå½±å“å‡ æ¡æ•°æ®
     */
    int updateOne(User user);
}
</code></pre>
<ol start="2">
<li>ç¼–å†™å¯¹åº”çš„é…ç½®æ–‡ä»¶SQL</li>
</ol>
<pre><code class="language-xml">&lt;update id=&quot;updateOne&quot; parameterType=&quot;com.SolitudeAlma.pojo.User&quot;&gt;
  update user set name = #{name}, pwd = #{pwd} where id = #{id};
&lt;/update&gt;
</code></pre>
<ol start="3">
<li>æµ‹è¯•</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.User;
import com.SolitudeAlma.utils.MybatisUtils;
import org.apache.ibatis.session.SqlSession;
import org.junit.Test;

import java.util.List;

/**
 * junitæµ‹è¯•ç±»
 * @author SolitudeAlma
 * @date 2021/8/14
 */
public class UserDaoTest {
    @Test
    public void test() {

        //è·å–SqlSessionå¯¹è±¡
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        //æ–¹å¼ä¸€:getMapper
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        List&lt;User&gt; userList = mapper.getUserList();

        //æ–¹å¼äºŒ:ä¸æ¨èä½¿ç”¨
        //List&lt;User&gt; userList = sqlSession.selectList(&quot;com.SolitudeAlma.dao.UserDao.getUserList&quot;);
        for (User user : userList) {
            System.out.println(user);
        }
        //å…³é—­SqlSession
        sqlSession.close();
    }

    @Test
    public  void getUserById() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        User userInfo = mapper.getUserById(1);
        System.out.println(userInfo);
        sqlSession.close();
    }

    @Test
    public  void insertOne() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        int result = mapper.insertOne(new User(4, &quot;å°æ˜&quot;, &quot;1212&quot;));
        System.out.println(result);
        sqlSession.commit();
        sqlSession.close();
    }

    @Test
    public  void updateOne() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        int result = mapper.updateOne(new User(4, &quot;åºŸç‰©&quot;, &quot;12121&quot;));
        System.out.println(result);
        sqlSession.commit();
        sqlSession.close();
    }
}
</code></pre>
<h2 id="34-delete">3.4 DELETE</h2>
<p>ä¸€èˆ¬ä½¿ç”¨deleteæ ‡ç­¾è¿›è¡Œåˆ é™¤æ“ä½œï¼Œå®ƒçš„é…ç½®å’Œselectæ ‡ç­¾å·®ä¸å¤šï¼<br>
<strong>éœ€æ±‚ï¼šæ ¹æ®idåˆ é™¤ä¸€ä¸ªç”¨æˆ·</strong></p>
<ol>
<li>åŒç†ï¼Œç¼–å†™æ¥å£æ–¹æ³•</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.User;

import java.util.List;

/**
 * @author SolitudeAlma
 * @date 2021/8/14
 */
public interface UserDao {
    /**
     * æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯
     * @return List ç”¨æˆ·ä¿¡æ¯é›†åˆ
     */
    List&lt;User&gt; getUserList();

    /**
     * æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯
     * @param id ç”¨æˆ·å”¯ä¸€æ ‡è¯†
     * @return User å•ä¸ªç”¨æˆ·çš„ä¿¡æ¯
     */
    User getUserById(int id);

    /**
     * æ’å…¥ä¸€ä¸ªç”¨æˆ·ä¿¡æ¯
     * @param user ç”¨æˆ·ä¿¡æ¯ç±»
     * @return SQLæŸ¥è¯¢ç»“æœï¼ŒæˆåŠŸå½±å“å‡ æ¡æ•°æ®
     */
    int insertOne(User user);

    /**
     * ä¿®æ”¹ä¸€ä¸ªç”¨æˆ·çš„ä¿¡æ¯
     * @param user ç”¨æˆ·ä¿¡æ¯ç±»
     * @return SQLæŸ¥è¯¢ç»“æœï¼ŒæˆåŠŸå½±å“å‡ æ¡æ•°æ®
     */
    int updateOne(User user);

    /**
     * åˆ é™¤ä¸€ä¸ªç”¨æˆ·çš„ä¿¡æ¯
     * @param id ç”¨æˆ·å”¯ä¸€æ ‡è¯†
     * @return SQLæŸ¥è¯¢ç»“æœï¼ŒæˆåŠŸå½±å“å‡ æ¡æ•°æ®
     */
    int deleteById(int id);
}
</code></pre>
<ol start="2">
<li>ç¼–å†™å¯¹åº”çš„é…ç½®æ–‡ä»¶SQL</li>
</ol>
<pre><code class="language-xml">&lt;delete id=&quot;deleteById&quot; parameterType=&quot;int&quot;&gt;
  delete from user where id = #{id};
&lt;/delete&gt;
</code></pre>
<ol start="3">
<li>æµ‹è¯•</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.User;
import com.SolitudeAlma.utils.MybatisUtils;
import org.apache.ibatis.session.SqlSession;
import org.junit.Test;

import java.util.List;

/**
 * junitæµ‹è¯•ç±»
 * @author SolitudeAlma
 * @date 2021/8/14
 */
public class UserDaoTest {
    @Test
    public void test() {

        //è·å–SqlSessionå¯¹è±¡
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        //æ–¹å¼ä¸€:getMapper
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        List&lt;User&gt; userList = mapper.getUserList();

        //æ–¹å¼äºŒ:ä¸æ¨èä½¿ç”¨
        //List&lt;User&gt; userList = sqlSession.selectList(&quot;com.SolitudeAlma.dao.UserDao.getUserList&quot;);
        for (User user : userList) {
            System.out.println(user);
        }
        //å…³é—­SqlSession
        sqlSession.close();
    }

    @Test
    public  void getUserById() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        User userInfo = mapper.getUserById(1);
        System.out.println(userInfo);
        sqlSession.close();
    }

    @Test
    public  void insertOne() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        int result = mapper.insertOne(new User(4, &quot;å°æ˜&quot;, &quot;1212&quot;));
        System.out.println(result);
        sqlSession.commit();
        sqlSession.close();
    }

    @Test
    public  void updateOne() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        int result = mapper.updateOne(new User(4, &quot;åºŸç‰©&quot;, &quot;12121&quot;));
        System.out.println(result);
        sqlSession.commit();
        sqlSession.close();
    }

    @Test
    public  void deleteOne() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        int result = mapper.deleteById(4);
        System.out.println(result);
        sqlSession.commit();
        sqlSession.close();
    }
}
</code></pre>
<p><strong>å°ç»“ï¼š</strong></p>
<ul>
<li>æ‰€æœ‰çš„å¢åˆ æ”¹æ“ä½œéƒ½éœ€è¦æäº¤äº‹åŠ¡ï¼ï¼ˆé»˜è®¤æ‰‹åŠ¨æäº¤ï¼‰</li>
<li>æ¥å£æ‰€æœ‰çš„æ™®é€šå‚æ•°ï¼Œå°½é‡éƒ½å†™ä¸Š@Paramå‚æ•°ï¼Œå°¤å…¶æ˜¯å¤šä¸ªå‚æ•°æ—¶ï¼Œå¿…é¡»å†™ä¸Šï¼</li>
<li>æœ‰æ—¶å€™æ ¹æ®ä¸šåŠ¡çš„éœ€æ±‚ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨mapä¼ é€’å‚æ•°ï¼</li>
<li>ä¸ºäº†è§„èŒƒæ“ä½œï¼Œåœ¨SQLçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å°½é‡å°†Parameterå‚æ•°å’ŒresultTypeéƒ½å†™ä¸Šï¼</li>
</ul>
<h2 id="35-like">3.5 LIKE</h2>
<p><strong>æ¨¡ç³ŠæŸ¥è¯¢likeè¯­å¥è¯¥æ€ä¹ˆå†™?</strong><br>
ç¬¬1ç§ï¼šåœ¨Javaä»£ç ä¸­æ·»åŠ sqlé€šé…ç¬¦ã€‚</p>
<pre><code class="language-java">string wildcardname = &quot;%smi%&quot;;
List&lt;name&gt; names = mapper.selectlike(wildcardname);

&lt;select id=&quot;selectlike&quot;&gt;
select * from foo where bar like #{value}
&lt;/select&gt;
</code></pre>
<p>ç¬¬2ç§ï¼šåœ¨sqlè¯­å¥ä¸­æ‹¼æ¥é€šé…ç¬¦ï¼Œä¼šå¼•èµ·sqlæ³¨å…¥</p>
<pre><code class="language-java">string wildcardname = &quot;smi&quot;;
List&lt;name&gt; names = mapper.selectlike(wildcardname);

&lt;select id=&quot;selectlike&quot;&gt;
    select * from foo where bar like &quot;%&quot;${value}&quot;%&quot;
&lt;/select&gt;
</code></pre>
<p>åœ¨mybatisé…ç½®æ–‡ä»¶ä¸­ï¼š</p>
<ol>
<li>${}:è¡¨ç¤ºæ‹¼æ¥sqlä¸²ï¼Œå°†æ¥æ”¶åˆ°å‚æ•°çš„å†…å®¹ä¸åŠ ä»»ä½•ä¿®é¥°æ‹¼æ¥åœ¨sqlä¸­ï¼Œå¯èƒ½å¼•å‘sqlæ³¨å…¥ã€‚</li>
<li>#{ }æ˜¯é¢„ç¼–è¯‘å¤„ç†ï¼ŒMyBatisåœ¨å¤„ç†#{ }æ—¶ï¼Œå®ƒä¼šå°†sqlä¸­çš„#{ }æ›¿æ¢ä¸ºï¼Ÿï¼Œç„¶åè°ƒç”¨PreparedStatementçš„setæ–¹æ³•æ¥èµ‹å€¼ï¼Œä¼ å…¥å­—ç¬¦ä¸²åï¼Œä¼šåœ¨å€¼ä¸¤è¾¹åŠ ä¸Šå•å¼•å·ï¼Œä½¿ç”¨å ä½ç¬¦çš„æ–¹å¼æé«˜æ•ˆç‡ï¼Œå¯ä»¥é˜²æ­¢sqlæ³¨å…¥ã€‚</li>
</ol>
<p>ä¸æ¨èä½¿ç”¨${}ï¼Œèƒ½ç”¨#{}å°±ç”¨#{}ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨MySQLå‡½æ•°concatè¿æ¥å­—ç¬¦ä¸²ã€‚<br>
å›ºå®šçš„å€¼å¯ä»¥ç”¨${}ï¼Œå› ä¸ºæœ¬æ¥å°±æ˜¯æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œä½†åŠ¨æ€çš„ä¸èƒ½</p>
<blockquote>
<p><a href="https://www.cnblogs.com/xiao-lin-unit/p/13644004.html">https://www.cnblogs.com/xiao-lin-unit/p/13644004.html</a><br>
<a href="https://blog.csdn.net/Mr_Qiao93/article/details/109168291">https://blog.csdn.net/Mr_Qiao93/article/details/109168291</a><br>
<a href="https://blog.csdn.net/weixin_42452395/article/details/113869915">https://blog.csdn.net/weixin_42452395/article/details/113869915</a></p>
</blockquote>
<h2 id="36-å…¶ä»–">3.6 å…¶ä»–</h2>
<p>sqlè¯­å¥éœ€è¦çš„å‚æ•°å¾ˆå¤šæ—¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨mapè€Œä¸æ˜¯ç”¨ç±»ã€‚<br>
mapå¯ä»¥éšæ„å®šä¹‰keyçš„åå­—ï¼Œçµæ´»æ€§é«˜ï¼Œè€Œç±»éœ€è¦å®šä¹‰å±æ€§ï¼Œsetã€getæ–¹æ³•ç­‰ï¼Œä¿®æ”¹åå­—å¾—ä¿®æ”¹å±æ€§åï¼Œéº»çƒ¦</p>
<p>å¤§è‡´ç”¨æ³•ï¼š</p>
<pre><code class="language-java">/**
* æ’å…¥è¿‡ä¸ªç”¨æˆ·ä¿¡æ¯
* @param map ç”¨æˆ·ä¿¡æ¯é›†åˆ
* @return SQLæŸ¥è¯¢ç»“æœï¼ŒæˆåŠŸå½±å“å‡ æ¡æ•°æ®
*/
int insertMany(Map&lt;String, Object&gt; map);
</code></pre>
<pre><code class="language-xml">&lt;!--å¯¹è±¡ä¸­çš„å±æ€§å¯ä»¥ç›´æ¥å–å‡ºæ¥ ä¼ é€’mapä¸­çš„key--&gt;
&lt;insert id=&quot;insertMany&quot; parameterType=&quot;map&quot; &gt;
  insert into user (id, name, pwd) values (#{userId}, #{userName}, #{password});
&lt;/insert&gt;
</code></pre>
<pre><code class="language-java">@Test
public  void insertMany() {
    SqlSession sqlSession = MybatisUtils.getSqlSession();
    UserDao mapper = sqlSession.getMapper(UserDao.class);
    Map &lt;String, Object&gt; map = new HashMap&lt;&gt;();
    map.put(&quot;userId&quot;, 5);
    map.put(&quot;userName&quot;, &quot;å°çº¢&quot;);
    map.put(&quot;password&quot;, &quot;23333&quot;);
    int result = mapper.insertMany(map);
    System.out.println(result);
    sqlSession.commit();
    sqlSession.close();
}
</code></pre>
<h1 id="4-é…ç½®è§£æ">4. é…ç½®è§£æ</h1>
<h2 id="41-æ ¸å¿ƒé…ç½®æ–‡ä»¶">4.1 æ ¸å¿ƒé…ç½®æ–‡ä»¶</h2>
<ul>
<li>mybatis-config.xml ç³»ç»Ÿæ ¸å¿ƒé…ç½®æ–‡ä»¶</li>
<li>MyBatis çš„é…ç½®æ–‡ä»¶åŒ…å«äº†ä¼šæ·±æ·±å½±å“ MyBatis è¡Œä¸ºçš„è®¾ç½®å’Œå±æ€§ä¿¡æ¯ã€‚</li>
<li>èƒ½é…ç½®çš„å†…å®¹å¦‚ä¸‹ï¼š</li>
</ul>
<pre><code class="language-java">configurationï¼ˆé…ç½®ï¼‰
propertiesï¼ˆå±æ€§ï¼‰
settingsï¼ˆè®¾ç½®ï¼‰
typeAliasesï¼ˆç±»å‹åˆ«åï¼‰
typeHandlersï¼ˆç±»å‹å¤„ç†å™¨ï¼‰
objectFactoryï¼ˆå¯¹è±¡å·¥å‚ï¼‰
pluginsï¼ˆæ’ä»¶ï¼‰
environmentsï¼ˆç¯å¢ƒé…ç½®ï¼‰
environmentï¼ˆç¯å¢ƒå˜é‡ï¼‰
transactionManagerï¼ˆäº‹åŠ¡ç®¡ç†å™¨ï¼‰
dataSourceï¼ˆæ•°æ®æºï¼‰
databaseIdProviderï¼ˆæ•°æ®åº“å‚å•†æ ‡è¯†ï¼‰
mappersï¼ˆæ˜ å°„å™¨ï¼‰
&lt;!-- æ³¨æ„å…ƒç´ èŠ‚ç‚¹çš„é¡ºåºï¼é¡ºåºä¸å¯¹ä¼šæŠ¥é”™ --&gt;
</code></pre>
<p>å¯ä»¥é˜…è¯» mybatis-config.xml ä¸Šé¢çš„dtdçš„å¤´æ–‡ä»¶</p>
<h2 id="42-environment">4.2 environment</h2>
<pre><code class="language-xml">&lt;environments default=&quot;development&quot;&gt;
  &lt;environment id=&quot;development&quot;&gt;
    &lt;transactionManager type=&quot;JDBC&quot;&gt;
      &lt;property name=&quot;...&quot; value=&quot;...&quot;/&gt;
    &lt;/transactionManager&gt;
    &lt;dataSource type=&quot;POOLED&quot;&gt;
      &lt;property name=&quot;driver&quot; value=&quot;${driver}&quot;/&gt;
      &lt;property name=&quot;url&quot; value=&quot;${url}&quot;/&gt;
      &lt;property name=&quot;username&quot; value=&quot;${username}&quot;/&gt;
      &lt;property name=&quot;password&quot; value=&quot;${password}&quot;/&gt;
    &lt;/dataSource&gt;
  &lt;/environment&gt;
&lt;/environments&gt;
</code></pre>
<ul>
<li>é…ç½®MyBatisçš„å¤šå¥—è¿è¡Œç¯å¢ƒï¼Œå°†SQLæ˜ å°„åˆ°å¤šä¸ªä¸åŒçš„æ•°æ®åº“ä¸Šï¼Œå¿…é¡»æŒ‡å®šå…¶ä¸­ä¸€ä¸ªä¸ºé»˜è®¤è¿è¡Œç¯å¢ƒï¼ˆé€šè¿‡defaultæŒ‡å®šï¼‰</li>
<li>å­å…ƒç´ èŠ‚ç‚¹ï¼š<strong>environment</strong>
<ul>
<li>dataSource å…ƒç´ ä½¿ç”¨æ ‡å‡†çš„ JDBC æ•°æ®æºæ¥å£æ¥é…ç½® JDBC è¿æ¥å¯¹è±¡çš„èµ„æºã€‚</li>
<li>æ•°æ®æºæ˜¯å¿…é¡»é…ç½®çš„ã€‚</li>
<li>æœ‰ä¸‰ç§å†…å»ºçš„æ•°æ®æºç±»å‹ type=&quot;[UNPOOLED|POOLED|JNDI]&quot;â€‹</li>
<li><strong>UNPOOLED</strong>ï¼šè¿™ç§æ•°æ®æºçš„å®ç°åªæ˜¯æ¯æ¬¡è¢«è¯·æ±‚æ—¶æ‰“å¼€å’Œå…³é—­è¿æ¥ã€‚</li>
<li><strong>POOLED</strong>ï¼šè¿™ç§æ•°æ®æºçš„å®ç°åˆ©ç”¨â€œæ± â€çš„æ¦‚å¿µå°† JDBC è¿æ¥å¯¹è±¡ç»„ç»‡èµ·æ¥ , è¿™æ˜¯ä¸€ç§ä½¿å¾—å¹¶å‘ Web åº”ç”¨å¿«é€Ÿå“åº”è¯·æ±‚çš„æµè¡Œå¤„ç†æ–¹å¼ã€‚</li>
<li><strong>JNDI</strong>ï¼šè¿™ä¸ªæ•°æ®æºçš„å®ç°æ˜¯ä¸ºäº†èƒ½åœ¨å¦‚ Spring æˆ–åº”ç”¨æœåŠ¡å™¨è¿™ç±»å®¹å™¨ä¸­ä½¿ç”¨ï¼Œå®¹å™¨å¯ä»¥é›†ä¸­æˆ–åœ¨å¤–éƒ¨é…ç½®æ•°æ®æºï¼Œç„¶åæ”¾ç½®ä¸€ä¸ª JNDI ä¸Šä¸‹æ–‡çš„å¼•ç”¨ã€‚</li>
<li>æ•°æ®æºä¹Ÿæœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹çš„å®ç°ï¼Œæ¯”å¦‚dbcpï¼Œc3p0ï¼Œdruidç­‰ç­‰....</li>
<li>è¯¦æƒ…ï¼šæŸ¥çœ‹å®˜æ–¹æ–‡æ¡£</li>
<li>è¿™ä¸¤ç§äº‹åŠ¡ç®¡ç†å™¨ç±»å‹éƒ½ä¸éœ€è¦è®¾ç½®ä»»ä½•å±æ€§ã€‚</li>
<li>å…·ä½“çš„ä¸€å¥—ç¯å¢ƒï¼Œé€šè¿‡è®¾ç½®idè¿›è¡ŒåŒºåˆ«ï¼Œidä¿è¯å”¯ä¸€ï¼</li>
<li>å­å…ƒç´ èŠ‚ç‚¹ï¼štransactionManager - [ äº‹åŠ¡ç®¡ç†å™¨ ]</li>
</ul>
</li>
</ul>
<pre><code class="language-xml">&lt;!-- è¯­æ³• --&gt;
&lt;transactionManager type=&quot;[ JDBC | MANAGED ]&quot;/&gt;
</code></pre>
<ul>
<li>å­å…ƒç´ èŠ‚ç‚¹ï¼š<strong>æ•°æ®æºï¼ˆdataSourceï¼‰</strong></li>
</ul>
<h2 id="43-properties">4.3 properties</h2>
<p>æ•°æ®åº“è¿™äº›å±æ€§éƒ½æ˜¯å¯å¤–éƒ¨é…ç½®ä¸”å¯åŠ¨æ€æ›¿æ¢çš„ï¼Œæ—¢å¯ä»¥åœ¨å…¸å‹çš„ Java å±æ€§æ–‡ä»¶ä¸­é…ç½®ï¼Œäº¦å¯é€šè¿‡ properties å…ƒç´ çš„å­å…ƒç´ æ¥ä¼ é€’ã€‚å…·ä½“çœ‹å®˜æ–¹æ–‡æ¡£</p>
<p>æˆ‘ä»¬æ¥ä¼˜åŒ–é…ç½®æ–‡ä»¶</p>
<p>ç¬¬ä¸€æ­¥ ; åœ¨èµ„æºç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªdb.properties</p>
<pre><code class="language-properties">driver=com.mysql.cj.jdbc.Driver
url=jdbc:mysql://localhost:3306/mybatis?useSSL=true&amp;useUnicode=true&amp;characterEncoding=UTF-8
user=root
password=xxx
</code></pre>
<p>ç¬¬äºŒæ­¥ : å°†æ–‡ä»¶å¯¼å…¥properties é…ç½®æ–‡ä»¶</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE configuration
        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;
&lt;!--configurationæ ¸å¿ƒé…ç½®æ–‡ä»¶--&gt;
&lt;configuration&gt;
    &lt;!--å¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥å†…åµŒpropertiesæ ‡ç­¾é…ç½®ä¸€äº›ä¿¡æ¯ï¼Œä½†å¦‚æœæœ‰ç›¸åŒçš„å±æ€§ï¼Œé‚£ä¹ˆä¼˜å…ˆä½¿ç”¨å¤–éƒ¨çš„--&gt;
    &lt;!--&lt;properties resource=&quot;db.properties&quot;/&gt;--&gt;
    &lt;properties resource=&quot;db.properties&quot;&gt;
        &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;
        &lt;property name=&quot;password&quot; value=&quot;xxx&quot;/&gt;
    &lt;/properties&gt;
    &lt;environments default=&quot;development&quot;&gt;
        &lt;environment id=&quot;development&quot;&gt;
            &lt;transactionManager type=&quot;JDBC&quot;/&gt;
            &lt;dataSource type=&quot;POOLED&quot;&gt;
                &lt;property name=&quot;driver&quot; value=&quot;${driver}&quot;/&gt;
                &lt;property name=&quot;url&quot; value=&quot;${url}&quot;/&gt;
                &lt;property name=&quot;username&quot; value=&quot;${username}&quot;/&gt;
                &lt;property name=&quot;password&quot; value=&quot;${password}&quot;/&gt;
            &lt;/dataSource&gt;
        &lt;/environment&gt;
    &lt;/environments&gt;
    &lt;!--æ¯ä¸€ä¸ªMapper.xmléƒ½éœ€è¦åœ¨Mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ--&gt;
    &lt;mappers&gt;
        &lt;mapper resource=&quot;com/SolitudeAlma/dao/UserMapper.xml&quot;/&gt;
    &lt;/mappers&gt;
&lt;/configuration&gt;
</code></pre>
<p>æ³¨æ„ï¼šä¸¥æ ¼æŒ‰ç…§æ ‡ç­¾é¡ºåºæ¥å†™<br>
æ›´å¤šæ“ä½œï¼Œå¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£</p>
<ul>
<li>é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§é—®é¢˜ï¼ˆç›¸åŒå±æ€§ä¼˜å…ˆä½¿ç”¨å¤–éƒ¨é…ç½®ï¼‰</li>
<li>æ–°ç‰¹æ€§ï¼šä½¿ç”¨å ä½ç¬¦</li>
</ul>
<h2 id="44-typealiases">4.4 typeAliases</h2>
<p>ç±»å‹åˆ«åæ˜¯ä¸º Java ç±»å‹è®¾ç½®ä¸€ä¸ªçŸ­çš„åå­—ã€‚å®ƒåªå’Œ XML é…ç½®æœ‰å…³ï¼Œå­˜åœ¨çš„æ„ä¹‰ä»…åœ¨äºç”¨æ¥å‡å°‘ç±»å®Œå…¨é™å®šåçš„å†—ä½™ã€‚</p>
<pre><code class="language-xml">&lt;!--ä¸ºå®ä½“ç±»é…ç½®åˆ«å,æ³¨æ„é¡ºåº--&gt;
&lt;typeAliases&gt;
  &lt;typeAlias type=&quot;com.SolitudeAlma.pojo.User&quot; alias=&quot;User&quot;/&gt;
&lt;/typeAliases&gt;
</code></pre>
<p>å½“è¿™æ ·é…ç½®æ—¶ï¼ŒUserå¯ä»¥ç”¨åœ¨ä»»ä½•ä½¿ç”¨com.SolitudeAlma.pojo.Userçš„åœ°æ–¹ã€‚</p>
<p>ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªåŒ…åï¼ŒMyBatis ä¼šåœ¨åŒ…åä¸‹é¢æœç´¢éœ€è¦çš„ Java Beanï¼Œæ¯”å¦‚:</p>
<pre><code class="language-xml">&lt;typeAliases&gt;
  &lt;!--ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æ—¶mapperä¸­å°±ç”¨å°å†™ï¼Œä»¥ä¾¿åŒºåˆ†ä½¿ç”¨çš„åˆ«åæ–¹æ³•--&gt;
  &lt;package name=&quot;com.SolitudeAlma.pojo&quot;/&gt;
&lt;/typeAliases&gt;
</code></pre>
<p>æ¯ä¸€ä¸ªåœ¨com.SolitudeAlma.pojoåŒ…ä¸­çš„ Java Beanï¼Œåœ¨æ²¡æœ‰æ³¨è§£çš„æƒ…å†µä¸‹ï¼Œä¼šä½¿ç”¨ Bean çš„é¦–å­—æ¯å°å†™çš„éé™å®šç±»åæ¥ä½œä¸ºå®ƒçš„åˆ«åã€‚<br>
å¤§å°å†™éƒ½å¯ä»¥è¯†åˆ«ï¼Œä½†æ˜¯ç”¨å°å†™çš„è¯å°±çŸ¥é“ä½ æ˜¯ç”¨äº†æ‰«æåŒ…è¿™ä¸ªæ–¹æ³•<br>
è‹¥æœ‰æ³¨è§£ï¼Œåˆ™åˆ«åä¸ºå…¶æ³¨è§£å€¼ã€‚è§ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<pre><code class="language-java">@Alias(&quot;user&quot;)
public class User {
  ...
}
</code></pre>
<p>å®ä½“ç±»æ¯”è¾ƒå°‘çš„æ—¶å€™ç”¨ç¬¬ä¸€é’Ÿæ–¹æ³•ï¼Œæ¯”è¾ƒå¤šçš„æ—¶å€™ç›´æ¥æ‰«æåŒ…<br>
ç¬¬ä¸€ç§æ–¹æ³•å¯ä»¥è‡ªå®šä¹‰åˆ«åï¼Œç¬¬äºŒç§ä¸è¡Œï¼Œä½†å¯ä»¥ç”¨æ³¨è§£å®ç°è‡ªå®šä¹‰â€‹</p>
<p>å»å®˜ç½‘æŸ¥çœ‹ä¸€ä¸‹Mybatisé»˜è®¤çš„ä¸€äº›ç±»å‹åˆ«åï¼ˆåŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨ç±»å‹ç­‰ç­‰ï¼‰</p>
<h2 id="45-setting">4.5 setting</h2>
<ul>
<li>è®¾ç½®ï¼ˆsettingsï¼‰ç›¸å…³ =&gt; æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£ï¼ˆéœ€è¦è®°ä½ä¸‹é¢ä¸‰ä¸ªï¼‰
<ul>
<li>æ‡’åŠ è½½</li>
<li>æ—¥å¿—å®ç°</li>
<li>ç¼“å­˜å¼€å¯å…³é—­</li>
</ul>
</li>
<li>ä¸€ä¸ªé…ç½®å®Œæ•´çš„ settings å…ƒç´ çš„ç¤ºä¾‹å¦‚ä¸‹ï¼š</li>
</ul>
<pre><code class="language-xml">&lt;settings&gt;
  &lt;setting name=&quot;cacheEnabled&quot; value=&quot;true&quot;/&gt;
  &lt;setting name=&quot;lazyLoadingEnabled&quot; value=&quot;true&quot;/&gt;
  &lt;setting name=&quot;multipleResultSetsEnabled&quot; value=&quot;true&quot;/&gt;
  &lt;setting name=&quot;useColumnLabel&quot; value=&quot;true&quot;/&gt;
  &lt;setting name=&quot;useGeneratedKeys&quot; value=&quot;false&quot;/&gt;
  &lt;setting name=&quot;autoMappingBehavior&quot; value=&quot;PARTIAL&quot;/&gt;
  &lt;setting name=&quot;autoMappingUnknownColumnBehavior&quot; value=&quot;WARNING&quot;/&gt;
  &lt;setting name=&quot;defaultExecutorType&quot; value=&quot;SIMPLE&quot;/&gt;
  &lt;setting name=&quot;defaultStatementTimeout&quot; value=&quot;25&quot;/&gt;
  &lt;setting name=&quot;defaultFetchSize&quot; value=&quot;100&quot;/&gt;
  &lt;setting name=&quot;safeRowBoundsEnabled&quot; value=&quot;false&quot;/&gt;
  &lt;setting name=&quot;mapUnderscoreToCamelCase&quot; value=&quot;false&quot;/&gt;
  &lt;setting name=&quot;localCacheScope&quot; value=&quot;SESSION&quot;/&gt;
  &lt;setting name=&quot;jdbcTypeForNull&quot; value=&quot;OTHER&quot;/&gt;
  &lt;setting name=&quot;lazyLoadTriggerMethods&quot; value=&quot;equals,clone,hashCode,toString&quot;/&gt;
&lt;/settings&gt;
</code></pre>
<h2 id="46-mappers">4.6 mappers</h2>
<p><strong>mappers</strong></p>
<ul>
<li>æ˜ å°„å™¨ : å®šä¹‰æ˜ å°„SQLè¯­å¥æ–‡ä»¶</li>
<li>æ—¢ç„¶ MyBatis çš„è¡Œä¸ºå…¶ä»–å…ƒç´ å·²ç»é…ç½®å®Œäº†ï¼Œæˆ‘ä»¬ç°åœ¨å°±è¦å®šä¹‰ SQL æ˜ å°„è¯­å¥äº†ã€‚ä½†æ˜¯é¦–å…ˆæˆ‘ä»¬éœ€è¦å‘Šè¯‰ MyBatis åˆ°å“ªé‡Œå»æ‰¾åˆ°è¿™äº›è¯­å¥ã€‚Java åœ¨è‡ªåŠ¨æŸ¥æ‰¾è¿™æ–¹é¢æ²¡æœ‰æä¾›ä¸€ä¸ªå¾ˆå¥½çš„æ–¹æ³•ï¼Œæ‰€ä»¥æœ€ä½³çš„æ–¹å¼æ˜¯å‘Šè¯‰ MyBatis åˆ°å“ªé‡Œå»æ‰¾æ˜ å°„æ–‡ä»¶ã€‚ä½ å¯ä»¥ä½¿ç”¨ç›¸å¯¹äºç±»è·¯å¾„çš„èµ„æºå¼•ç”¨ï¼Œ æˆ–å®Œå…¨é™å®šèµ„æºå®šä½ç¬¦ï¼ˆåŒ…æ‹¬ file:/// çš„ URLï¼‰ï¼Œæˆ–ç±»åå’ŒåŒ…åç­‰ã€‚æ˜ å°„å™¨æ˜¯MyBatisä¸­æœ€æ ¸å¿ƒçš„ç»„ä»¶ä¹‹ä¸€ï¼Œåœ¨MyBatis 3ä¹‹å‰ï¼Œåªæ”¯æŒxmlæ˜ å°„å™¨ï¼Œå³ï¼šæ‰€æœ‰çš„SQLè¯­å¥éƒ½å¿…é¡»åœ¨xmlæ–‡ä»¶ä¸­é…ç½®ã€‚è€Œä»MyBatis 3å¼€å§‹ï¼Œè¿˜æ”¯æŒæ¥å£æ˜ å°„å™¨ï¼Œè¿™ç§æ˜ å°„å™¨æ–¹å¼å…è®¸ä»¥Javaä»£ç çš„æ–¹å¼æ³¨è§£å®šä¹‰SQLè¯­å¥ï¼Œéå¸¸ç®€æ´ã€‚</li>
</ul>
<p><strong>å¼•å…¥èµ„æºæ–¹å¼</strong></p>
<pre><code class="language-xml">&lt;!-- ä½¿ç”¨ç›¸å¯¹äºç±»è·¯å¾„çš„èµ„æºå¼•ç”¨ --&gt;
&lt;mappers&gt;
 &lt;mapper resource=&quot;com/SolitudeAlma/dao/UserMapper.xml&quot;/&gt;
&lt;/mappers&gt;
</code></pre>
<pre><code class="language-xml">&lt;!-- ä½¿ç”¨å®Œå…¨é™å®šèµ„æºå®šä½ç¬¦ï¼ˆURLï¼‰ç›´æ¥passï¼ï¼ï¼ï¼ --&gt;
&lt;mappers&gt;
 &lt;mapper url=&quot;file:///var/mappers/AuthorMapper.xml&quot;/&gt;
&lt;/mappers&gt;
</code></pre>
<pre><code class="language-xml">&lt;!--
ä½¿ç”¨æ˜ å°„å™¨æ¥å£å®ç°ç±»çš„å®Œå…¨é™å®šç±»å
éœ€è¦é…ç½®æ–‡ä»¶åç§°å’Œæ¥å£åç§°ä¸€è‡´ï¼Œå¹¶ä¸”ä½äºåŒä¸€ç›®å½•(åŒ…)ä¸‹
--&gt;
&lt;mappers&gt;
 &lt;mapper class=&quot;com.SolitudeAlma.dao.UserDao&quot;/&gt;
&lt;/mappers&gt;
</code></pre>
<pre><code class="language-xml">&lt;!--
å°†åŒ…å†…çš„æ˜ å°„å™¨æ¥å£å®ç°å…¨éƒ¨æ³¨å†Œä¸ºæ˜ å°„å™¨
ä½†æ˜¯éœ€è¦é…ç½®æ–‡ä»¶åç§°å’Œæ¥å£åç§°ä¸€è‡´ï¼Œå¹¶ä¸”ä½äºåŒä¸€ç›®å½•ä¸‹
--&gt;
&lt;mappers&gt;
 &lt;package name=&quot;com.SolitudeAlma.dao&quot;/&gt;
&lt;/mappers&gt;
</code></pre>
<p><strong>Mapperé…ç½®æ–‡ä»¶</strong></p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
       PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
       &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;mapper namespace=&quot;com.kuang.mapper.UserMapper&quot;&gt;
   
&lt;/mapper&gt;
</code></pre>
<ul>
<li>namespaceä¸­æ–‡æ„æ€ï¼šå‘½åç©ºé—´ï¼Œä½œç”¨å¦‚ä¸‹ï¼š
<ul>
<li>namespaceçš„å‘½åå¿…é¡»è·ŸæŸä¸ªæ¥å£åŒå</li>
<li>æ¥å£ä¸­çš„æ–¹æ³•ä¸æ˜ å°„æ–‡ä»¶ä¸­sqlè¯­å¥idåº”è¯¥ä¸€ä¸€å¯¹åº”</li>
</ul>
<ol>
<li>namespaceå’Œå­å…ƒç´ çš„idè”åˆä¿è¯å”¯ä¸€  , åŒºåˆ«ä¸åŒçš„mapper</li>
<li>ç»‘å®šDAOæ¥å£</li>
<li>namespaceå‘½åè§„åˆ™ : åŒ…å+ç±»å</li>
</ol>
</li>
</ul>
<p>MyBatis çš„çœŸæ­£å¼ºå¤§åœ¨äºå®ƒçš„æ˜ å°„è¯­å¥ï¼Œè¿™æ˜¯å®ƒçš„é­”åŠ›æ‰€åœ¨ã€‚ç”±äºå®ƒçš„å¼‚å¸¸å¼ºå¤§ï¼Œæ˜ å°„å™¨çš„ XML æ–‡ä»¶å°±æ˜¾å¾—ç›¸å¯¹ç®€å•ã€‚å¦‚æœæ‹¿å®ƒè·Ÿå…·æœ‰ç›¸åŒåŠŸèƒ½çš„ JDBC ä»£ç è¿›è¡Œå¯¹æ¯”ï¼Œä½ ä¼šç«‹å³å‘ç°çœæ‰äº†å°†è¿‘ 95% çš„ä»£ç ã€‚MyBatis ä¸ºèšç„¦äº SQL è€Œæ„å»ºï¼Œä»¥å°½å¯èƒ½åœ°ä¸ºä½ å‡å°‘éº»çƒ¦ã€‚</p>
<h2 id="47-å…¶ä»–é…ç½®">4.7 å…¶ä»–é…ç½®</h2>
<p><strong>typeHandlersç±»å‹å¤„ç†å™¨</strong></p>
<ul>
<li>æ— è®ºæ˜¯ MyBatis åœ¨é¢„å¤„ç†è¯­å¥ï¼ˆPreparedStatementï¼‰ä¸­è®¾ç½®ä¸€ä¸ªå‚æ•°æ—¶ï¼Œè¿˜æ˜¯ä»ç»“æœé›†ä¸­å–å‡ºä¸€ä¸ªå€¼æ—¶ï¼Œ éƒ½ä¼šç”¨ç±»å‹å¤„ç†å™¨å°†è·å–çš„å€¼ä»¥åˆé€‚çš„æ–¹å¼è½¬æ¢æˆ Java ç±»å‹ã€‚</li>
<li>ä½ å¯ä»¥é‡å†™ç±»å‹å¤„ç†å™¨æˆ–åˆ›å»ºä½ è‡ªå·±çš„ç±»å‹å¤„ç†å™¨æ¥å¤„ç†ä¸æ”¯æŒçš„æˆ–éæ ‡å‡†çš„ç±»å‹ã€‚ã€äº†è§£å³å¯ã€‘</li>
</ul>
<p><strong>objectFactoryå¯¹è±¡å·¥å‚</strong></p>
<ul>
<li>MyBatis æ¯æ¬¡åˆ›å»ºç»“æœå¯¹è±¡çš„æ–°å®ä¾‹æ—¶ï¼Œå®ƒéƒ½ä¼šä½¿ç”¨ä¸€ä¸ªå¯¹è±¡å·¥å‚ï¼ˆObjectFactoryï¼‰å®ä¾‹æ¥å®Œæˆã€‚</li>
<li>é»˜è®¤çš„å¯¹è±¡å·¥å‚éœ€è¦åšçš„ä»…ä»…æ˜¯å®ä¾‹åŒ–ç›®æ ‡ç±»ï¼Œè¦ä¹ˆé€šè¿‡é»˜è®¤æ„é€ æ–¹æ³•ï¼Œè¦ä¹ˆåœ¨å‚æ•°æ˜ å°„å­˜åœ¨çš„æ—¶å€™é€šè¿‡æœ‰å‚æ„é€ æ–¹æ³•æ¥å®ä¾‹åŒ–ã€‚</li>
<li>å¦‚æœæƒ³è¦†ç›–å¯¹è±¡å·¥å‚çš„é»˜è®¤è¡Œä¸ºï¼Œåˆ™å¯ä»¥é€šè¿‡åˆ›å»ºè‡ªå·±çš„å¯¹è±¡å·¥å‚æ¥å®ç°ã€‚ã€äº†è§£å³å¯ã€‘</li>
</ul>
<p><strong>pluginsæ’ä»¶</strong></p>
<ul>
<li>mybatis-generator-core</li>
<li>mybatis-plus</li>
<li>é€šç”¨mapper</li>
</ul>
<h2 id="48-ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ">4.8 ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ</h2>
<p><strong>ä½œç”¨åŸŸï¼ˆScopeï¼‰å’Œç”Ÿå‘½å‘¨æœŸ</strong><br>
ç†è§£æˆ‘ä»¬ç›®å‰å·²ç»è®¨è®ºè¿‡çš„ä¸åŒä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸç±»æ˜¯è‡³å…³é‡è¦çš„ï¼Œå› ä¸ºé”™è¯¯çš„ä½¿ç”¨ä¼šå¯¼è‡´éå¸¸ä¸¥é‡çš„å¹¶å‘é—®é¢˜ã€‚<br>
æˆ‘ä»¬å¯ä»¥å…ˆç”»ä¸€ä¸ªæµç¨‹å›¾ï¼Œåˆ†æä¸€ä¸‹Mybatisçš„æ‰§è¡Œè¿‡ç¨‹ï¼<br>
<img src="https://cdn.nlark.com/yuque/0/2021/png/22045814/1629032135660-fba597e4-c9bd-4d57-b06b-cd2d8027dde2.png#clientId=u84d9e174-9337-4&amp;from=paste&amp;height=513&amp;id=ub1daef10&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=649&amp;originWidth=1004&amp;originalType=binary&amp;ratio=1&amp;size=58406&amp;status=done&amp;style=none&amp;taskId=ud56bcb6f-8b9f-4af3-b531-0d5fb70b10d&amp;width=794" alt="image.png" loading="lazy"></p>
<p><strong>ä½œç”¨åŸŸç†è§£</strong></p>
<ul>
<li>SqlSessionFactoryBuilder çš„ä½œç”¨åœ¨äºåˆ›å»º SqlSessionFactoryï¼Œåˆ›å»ºæˆåŠŸåï¼ŒSqlSessionFactoryBuilder å°±å¤±å»äº†ä½œç”¨ï¼Œæ‰€ä»¥å®ƒåªèƒ½å­˜åœ¨äºåˆ›å»º SqlSessionFactory çš„æ–¹æ³•ä¸­ï¼Œè€Œä¸è¦è®©å…¶é•¿æœŸå­˜åœ¨ã€‚å› æ­¤ <strong>SqlSessionFactoryBuilder å®ä¾‹çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯æ–¹æ³•ä½œç”¨åŸŸ</strong>ï¼ˆä¹Ÿå°±æ˜¯å±€éƒ¨æ–¹æ³•å˜é‡ï¼‰ã€‚</li>
<li>SqlSessionFactory å¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªæ•°æ®åº“è¿æ¥æ± ï¼Œå®ƒçš„ä½œç”¨æ˜¯åˆ›å»º SqlSession æ¥å£å¯¹è±¡ã€‚å› ä¸º MyBatis çš„æœ¬è´¨å°±æ˜¯ Java å¯¹æ•°æ®åº“çš„æ“ä½œï¼Œæ‰€ä»¥ SqlSessionFactory çš„ç”Ÿå‘½å‘¨æœŸå­˜åœ¨äºæ•´ä¸ª MyBatis çš„åº”ç”¨ä¹‹ä¸­ï¼Œæ‰€ä»¥ä¸€æ—¦åˆ›å»ºäº† SqlSessionFactoryï¼Œå°±è¦é•¿æœŸä¿å­˜å®ƒï¼Œç›´è‡³ä¸å†ä½¿ç”¨ MyBatis åº”ç”¨ï¼Œæ‰€ä»¥å¯ä»¥è®¤ä¸º SqlSessionFactory çš„ç”Ÿå‘½å‘¨æœŸå°±ç­‰åŒäº MyBatis çš„åº”ç”¨å‘¨æœŸã€‚</li>
<li>ç”±äº SqlSessionFactory æ˜¯ä¸€ä¸ªå¯¹æ•°æ®åº“çš„è¿æ¥æ± ï¼Œæ‰€ä»¥å®ƒå æ®ç€æ•°æ®åº“çš„è¿æ¥èµ„æºã€‚å¦‚æœåˆ›å»ºå¤šä¸ª SqlSessionFactoryï¼Œé‚£ä¹ˆå°±å­˜åœ¨å¤šä¸ªæ•°æ®åº“è¿æ¥æ± ï¼Œè¿™æ ·ä¸åˆ©äºå¯¹æ•°æ®åº“èµ„æºçš„æ§åˆ¶ï¼Œä¹Ÿä¼šå¯¼è‡´æ•°æ®åº“è¿æ¥èµ„æºè¢«æ¶ˆè€—å…‰ï¼Œå‡ºç°ç³»ç»Ÿå®•æœºç­‰æƒ…å†µï¼Œæ‰€ä»¥å°½é‡é¿å…å‘ç”Ÿè¿™æ ·çš„æƒ…å†µã€‚</li>
<li>å› æ­¤åœ¨ä¸€èˆ¬çš„åº”ç”¨ä¸­æˆ‘ä»¬å¾€å¾€å¸Œæœ› SqlSessionFactory ä½œä¸ºä¸€ä¸ªå•ä¾‹ï¼Œè®©å®ƒåœ¨åº”ç”¨ä¸­è¢«å…±äº«ã€‚æ‰€ä»¥è¯´ <strong>SqlSessionFactory çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯åº”ç”¨ä½œç”¨åŸŸã€‚</strong></li>
<li>å¦‚æœè¯´ SqlSessionFactory ç›¸å½“äºæ•°æ®åº“è¿æ¥æ± ï¼Œé‚£ä¹ˆ SqlSession å°±ç›¸å½“äºä¸€ä¸ªæ•°æ®åº“è¿æ¥ï¼ˆConnection å¯¹è±¡ï¼‰ï¼Œä½ å¯ä»¥åœ¨ä¸€ä¸ªäº‹åŠ¡é‡Œé¢æ‰§è¡Œå¤šæ¡ SQLï¼Œç„¶åé€šè¿‡å®ƒçš„ commitã€rollback ç­‰æ–¹æ³•ï¼Œæäº¤æˆ–è€…å›æ»šäº‹åŠ¡ã€‚æ‰€ä»¥å®ƒåº”è¯¥å­˜æ´»åœ¨ä¸€ä¸ªä¸šåŠ¡è¯·æ±‚ä¸­ï¼Œå¤„ç†å®Œæ•´ä¸ªè¯·æ±‚åï¼Œåº”è¯¥å…³é—­è¿™æ¡è¿æ¥ï¼Œè®©å®ƒå½’è¿˜ç»™ SqlSessionFactoryï¼Œå¦åˆ™æ•°æ®åº“èµ„æºå°±å¾ˆå¿«è¢«è€—è´¹ç²¾å…‰ï¼Œç³»ç»Ÿå°±ä¼šç˜«ç—ªï¼Œæ‰€ä»¥ç”¨ try...catch...finally... è¯­å¥æ¥ä¿è¯å…¶æ­£ç¡®å…³é—­ã€‚</li>
<li><strong>æ‰€ä»¥ SqlSession çš„æœ€ä½³çš„ä½œç”¨åŸŸæ˜¯è¯·æ±‚æˆ–æ–¹æ³•ä½œç”¨åŸŸã€‚</strong></li>
</ul>
<figure data-type="image" tabindex="2"><img src="https://cdn.nlark.com/yuque/0/2021/png/22045814/1629032623297-835f7dcf-0443-453a-9766-6488795612ab.png#clientId=u84d9e174-9337-4&amp;from=paste&amp;height=512&amp;id=u1eeb14da&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=722&amp;originWidth=973&amp;originalType=binary&amp;ratio=1&amp;size=211987&amp;status=done&amp;style=none&amp;taskId=ub86097f7-0f53-49a9-9439-c656d144eee&amp;width=690.5" alt="image.png" loading="lazy"></figure>
<h1 id="5-resultmap">5. ResultMap</h1>
<h2 id="51-æŸ¥è¯¢ä¸ºnull">5.1 æŸ¥è¯¢ä¸ºnull</h2>
<p><strong>è¦è§£å†³çš„é—®é¢˜ï¼šå±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´</strong><br>
ç¯å¢ƒï¼šæ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œå°†ä¹‹å‰çš„é¡¹ç›®æ‹·è´è¿‡æ¥<br>
1ã€æŸ¥çœ‹ä¹‹å‰çš„æ•°æ®åº“çš„å­—æ®µå<br>
<a href="https://cdn.nlark.com/yuque/0/2021/png/22045814/1629033277051-1fd3c7d6-c5bc-4124-99d9-51f54fafa848.png#clientId=u84d9e174-9337-4&amp;from=paste&amp;height=115&amp;id=u44171385&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=230&amp;originWidth=1080&amp;originalType=binary&amp;ratio=1&amp;size=17772&amp;status=done&amp;style=none&amp;taskId=ua4d6bca7-8114-4c0b-b4a4-033da22f03a&amp;width=540">image.png</a></p>
<p>2ã€Javaä¸­çš„å®ä½“ç±»è®¾è®¡</p>
<pre><code class="language-java">package com.SolitudeAlma.pojo;

import org.apache.ibatis.type.Alias;

/**
 * @author SolitudeAlma
 * @date 2021/8/15
 * @description å®ä½“ç±»
 */
@Alias(&quot;user&quot;)
public class User {
    private int id;
    private String name;
    private String password;

    public User() {
    }

    public User(int id, String name, String password) {
        this.id = id;
        this.name = name;
        this.password = password;
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    @Override
    public String toString() {
        return &quot;User{&quot; +
                &quot;id=&quot; + id +
                &quot;, name='&quot; + name + '\'' +
                &quot;, password='&quot; + password + '\'' +
                '}';
    }
}
</code></pre>
<p>3ã€æ¥å£</p>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.User;

import java.util.List;

/**
 * @author SolitudeAlma
 * @date 2021/8/15
 */
public interface UserDao {

    /**
     * æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯
     * @param id ç”¨æˆ·å”¯ä¸€æ ‡è¯†
     * @return User å•ä¸ªç”¨æˆ·çš„ä¿¡æ¯
     */
    User getUserById(int id);
}
</code></pre>
<p>4ã€mapperæ˜ å°„æ–‡ä»¶</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;!--namespaceç»‘å®šä¸€ä¸ªå¯¹åº”çš„Dao/Mapperæ¥å£ï¼ˆä»¥åæ”¹ä¸ºMapperï¼‰--&gt;
&lt;mapper namespace=&quot;com.SolitudeAlma.dao.UserDao&quot;&gt;
    &lt;select id=&quot;getUserById&quot; resultType=&quot;user&quot; parameterType=&quot;int&quot;&gt;
        select * from user where id = #{id};
    &lt;/select&gt;

&lt;/mapper&gt;
</code></pre>
<p>5ã€æµ‹è¯•</p>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.User;
import com.SolitudeAlma.utils.MybatisUtils;
import org.apache.ibatis.session.SqlSession;
import org.junit.Test;

import java.util.List;

/**
 * junitæµ‹è¯•ç±»
 * @author SolitudeAlma
 * @date 2021/8/15
 */
public class UserDaoTest {

    @Test
    public void getUserById() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        User userInfo = mapper.getUserById(1);
        System.out.println(userInfo);
        sqlSession.close();
    }
}
</code></pre>
<p><strong>ç»“æœ:</strong></p>
<ul>
<li>User{id=1, name='SolitudeAlma', password='null'}</li>
<li>æŸ¥è¯¢å‡ºæ¥å‘ç° password ä¸ºç©º . è¯´æ˜å‡ºç°äº†é—®é¢˜ï¼</li>
</ul>
<p><strong>åˆ†æï¼š</strong></p>
<ul>
<li>select * from user where id = #{id} å¯ä»¥çœ‹åšselect  id,name,pwd  from user where id = #{id}</li>
<li>mybatisä¼šæ ¹æ®è¿™äº›æŸ¥è¯¢çš„åˆ—å(ä¼šå°†åˆ—åè½¬åŒ–ä¸ºå°å†™,æ•°æ®åº“ä¸åŒºåˆ†å¤§å°å†™) , å»å¯¹åº”çš„å®ä½“ç±»ä¸­æŸ¥æ‰¾ç›¸åº”åˆ—åçš„setæ–¹æ³•è®¾å€¼ , ç”±äºæ‰¾ä¸åˆ°setPwd() , æ‰€ä»¥passwordè¿”å›null ; ã€è‡ªåŠ¨æ˜ å°„ã€‘</li>
</ul>
<h3 id="511-è§£å†³æ–¹æ¡ˆ">5.1.1 è§£å†³æ–¹æ¡ˆ</h3>
<p>æ–¹æ¡ˆä¸€ï¼šä¸ºåˆ—åæŒ‡å®šåˆ«å , åˆ«åå’Œjavaå®ä½“ç±»çš„å±æ€§åä¸€è‡´ã€‚</p>
<pre><code class="language-xml">&lt;select id=&quot;selectUserById&quot; resultType=&quot;User&quot;&gt;
  select id , name , pwd as password from user where id = #{id}
&lt;/select&gt;
</code></pre>
<p>æ–¹æ¡ˆäºŒï¼šä½¿ç”¨ç»“æœé›†æ˜ å°„-&gt;ResultMap ã€æ¨èã€‘</p>
<pre><code class="language-xml">&lt;!--å…¶å®åªéœ€è¦åŠ ä¸Šè¦æ˜ å°„çš„å­—æ®µå°±è¡Œäº†--&gt;
&lt;resultMap id=&quot;UserMap&quot; type=&quot;User&quot;&gt;
   &lt;!-- idä¸ºä¸»é”® --&gt;
   &lt;id column=&quot;id&quot; property=&quot;id&quot;/&gt;
   &lt;!-- columnæ˜¯æ•°æ®åº“è¡¨çš„åˆ—å , propertyæ˜¯å¯¹åº”å®ä½“ç±»çš„å±æ€§å --&gt;
   &lt;result column=&quot;name&quot; property=&quot;name&quot;/&gt;
   &lt;result column=&quot;pwd&quot; property=&quot;password&quot;/&gt;
&lt;/resultMap&gt;

&lt;select id=&quot;selectUserById&quot; resultMap=&quot;UserMap&quot;&gt;
  select id , name , pwd from user where id = #{id}
&lt;/select&gt;
</code></pre>
<h2 id="52-resultmap">5.2 resultMap</h2>
<p><strong>è‡ªåŠ¨æ˜ å°„</strong></p>
<ul>
<li>resultMapå…ƒç´ æ˜¯ MyBatis ä¸­æœ€é‡è¦æœ€å¼ºå¤§çš„å…ƒç´ ã€‚å®ƒå¯ä»¥è®©ä½ ä» 90% çš„ JDBC ResultSets æ•°æ®æå–ä»£ç ä¸­è§£æ”¾å‡ºæ¥ã€‚</li>
<li>å®é™…ä¸Šï¼Œåœ¨ä¸ºä¸€äº›æ¯”å¦‚è¿æ¥çš„å¤æ‚è¯­å¥ç¼–å†™æ˜ å°„ä»£ç çš„æ—¶å€™ï¼Œä¸€ä»½resultMapèƒ½å¤Ÿä»£æ›¿å®ç°åŒç­‰åŠŸèƒ½çš„é•¿è¾¾æ•°åƒè¡Œçš„ä»£ç ã€‚</li>
<li>ResultMap çš„è®¾è®¡æ€æƒ³æ˜¯ï¼Œå¯¹äºç®€å•çš„è¯­å¥æ ¹æœ¬ä¸éœ€è¦é…ç½®æ˜¾å¼çš„ç»“æœæ˜ å°„ï¼Œè€Œå¯¹äºå¤æ‚ä¸€ç‚¹çš„è¯­å¥åªéœ€è¦æè¿°å®ƒä»¬çš„å…³ç³»å°±è¡Œäº†ã€‚</li>
</ul>
<p>ä½ å·²ç»è§è¿‡ç®€å•æ˜ å°„è¯­å¥çš„ç¤ºä¾‹äº†ï¼Œä½†å¹¶æ²¡æœ‰æ˜¾å¼æŒ‡å®šresultMapã€‚æ¯”å¦‚ï¼š</p>
<pre><code class="language-xml">&lt;select id=&quot;selectUserById&quot; resultType=&quot;map&quot;&gt;
select id , name , pwd
  from user
  where id = #{id}
&lt;/select&gt;
</code></pre>
<p>ä¸Šè¿°è¯­å¥åªæ˜¯ç®€å•åœ°å°†æ‰€æœ‰çš„åˆ—æ˜ å°„åˆ°HashMapçš„é”®ä¸Šï¼Œè¿™ç”±resultTypeå±æ€§æŒ‡å®šã€‚è™½ç„¶åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½å¤Ÿç”¨ï¼Œä½†æ˜¯ HashMap ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ¨¡å‹ã€‚ä½ çš„ç¨‹åºæ›´å¯èƒ½ä¼šä½¿ç”¨ JavaBean æˆ– POJOï¼ˆPlain Old Java Objectsï¼Œæ™®é€šè€å¼ Java å¯¹è±¡ï¼‰ä½œä¸ºæ¨¡å‹ã€‚<br>
ResultMapæœ€ä¼˜ç§€çš„åœ°æ–¹åœ¨äºï¼Œè™½ç„¶ä½ å·²ç»å¯¹å®ƒç›¸å½“äº†è§£äº†ï¼Œä½†æ˜¯æ ¹æœ¬å°±ä¸éœ€è¦æ˜¾å¼åœ°ç”¨åˆ°ä»–ä»¬ã€‚</p>
<h3 id="521-æ‰‹åŠ¨æ˜ å°„">5.2.1 æ‰‹åŠ¨æ˜ å°„</h3>
<p>1ã€è¿”å›å€¼ç±»å‹ä¸ºresultMap</p>
<pre><code class="language-xml">&lt;select id=&quot;selectUserById&quot; resultMap=&quot;UserMap&quot;&gt;
  select id , name , pwd from user where id = #{id}
&lt;/select&gt;
</code></pre>
<p>2ã€ç¼–å†™resultMapï¼Œå®ç°æ‰‹åŠ¨æ˜ å°„ï¼</p>
<pre><code class="language-xml">&lt;resultMap id=&quot;UserMap&quot; type=&quot;User&quot;&gt;
   &lt;!-- idä¸ºä¸»é”® --&gt;
   &lt;id column=&quot;id&quot; property=&quot;id&quot;/&gt;
   &lt;!-- columnæ˜¯æ•°æ®åº“è¡¨çš„åˆ—å , propertyæ˜¯å¯¹åº”å®ä½“ç±»çš„å±æ€§å --&gt;
   &lt;result column=&quot;name&quot; property=&quot;name&quot;/&gt;
   &lt;result column=&quot;pwd&quot; property=&quot;password&quot;/&gt;
&lt;/resultMap&gt;
</code></pre>
<p>å¦‚æœä¸–ç•Œæ€»æ˜¯è¿™ä¹ˆç®€å•å°±å¥½äº†ã€‚ä½†æ˜¯è‚¯å®šä¸æ˜¯çš„ï¼Œæ•°æ®åº“ä¸­ï¼Œå­˜åœ¨ä¸€å¯¹å¤šï¼Œå¤šå¯¹ä¸€çš„æƒ…å†µï¼Œæˆ‘ä»¬ä¹‹åä¼šä½¿ç”¨åˆ°ä¸€äº›é«˜çº§çš„ç»“æœé›†æ˜ å°„ï¼Œassociationï¼Œcollectionè¿™äº›ã€‚</p>
<h1 id="6-æ—¥å¿—">6. æ—¥å¿—</h1>
<h2 id="61-æ—¥å¿—å·¥å‚">6.1 æ—¥å¿—å·¥å‚</h2>
<p>æ€è€ƒï¼šåœ¨æµ‹è¯•SQLçš„æ—¶å€™ï¼Œè¦æ˜¯èƒ½å¤Ÿåœ¨æ§åˆ¶å°è¾“å‡º SQL çš„è¯ï¼Œæ˜¯ä¸æ˜¯å°±èƒ½å¤Ÿæœ‰æ›´å¿«çš„æ’é”™æ•ˆç‡ï¼Ÿ<br>
å¦‚æœä¸€ä¸ª æ•°æ®åº“ç›¸å…³çš„æ“ä½œå‡ºç°äº†é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®è¾“å‡ºçš„SQLè¯­å¥å¿«é€Ÿæ’æŸ¥é—®é¢˜ã€‚<br>
å¯¹äºä»¥å¾€çš„å¼€å‘è¿‡ç¨‹ï¼Œæˆ‘ä»¬ä¼šç»å¸¸ä½¿ç”¨åˆ°debugæ¨¡å¼æ¥è°ƒèŠ‚ï¼Œè·Ÿè¸ªæˆ‘ä»¬çš„ä»£ç æ‰§è¡Œè¿‡ç¨‹ã€‚ä½†æ˜¯ç°åœ¨ä½¿ç”¨Mybatisæ˜¯åŸºäºæ¥å£ï¼Œé…ç½®æ–‡ä»¶çš„æºä»£ç æ‰§è¡Œè¿‡ç¨‹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»é€‰æ‹©æ—¥å¿—å·¥å…·æ¥ä½œä¸ºæˆ‘ä»¬å¼€å‘ï¼Œè°ƒèŠ‚ç¨‹åºçš„å·¥å…·ã€‚<br>
Mybatiså†…ç½®çš„æ—¥å¿—å·¥å‚æä¾›æ—¥å¿—åŠŸèƒ½ï¼Œå…·ä½“çš„æ—¥å¿—å®ç°æœ‰ä»¥ä¸‹å‡ ç§å·¥å…·ï¼š</p>
<ul>
<li>SLF4J</li>
<li>LOG4J ã€æŒæ¡ã€‘</li>
<li>LOG4J2</li>
<li>JDK_LOGGING</li>
<li>COMMONS_LOGGING</li>
<li>STDOUT_LOGGING</li>
<li>NO_LOGGING</li>
</ul>
<p>å…·ä½“é€‰æ‹©å“ªä¸ªæ—¥å¿—å®ç°å·¥å…·ç”±MyBatisçš„å†…ç½®æ—¥å¿—å·¥å‚ç¡®å®šã€‚å®ƒä¼šä½¿ç”¨æœ€å…ˆæ‰¾åˆ°çš„ï¼ˆæŒ‰SLF4Jã€Apache Commons Loggingã€Log4j 2ã€Log4jã€JDK loggingåˆ—ä¸¾çš„é¡ºåºæŸ¥æ‰¾ï¼‰ã€‚å¦‚æœä¸€ä¸ªéƒ½æœªæ‰¾åˆ°ï¼Œæ—¥å¿—åŠŸèƒ½å°±ä¼šè¢«ç¦ç”¨ã€‚â€‹</p>
<p><strong>æ ‡å‡†æ—¥å¿—å®ç°</strong><br>
æŒ‡å®š MyBatis åº”è¯¥ä½¿ç”¨å“ªä¸ªæ—¥å¿—è®°å½•å®ç°ã€‚å¦‚æœæ­¤è®¾ç½®ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè‡ªåŠ¨å‘ç°æ—¥å¿—è®°å½•å®ç°ã€‚</p>
<pre><code class="language-xml">&lt;settings&gt;
  &lt;setting name=&quot;logImpl&quot; value=&quot;STDOUT_LOGGING&quot;/&gt;
&lt;/settings&gt;
</code></pre>
<p>æµ‹è¯•ï¼Œå¯ä»¥çœ‹åˆ°æ§åˆ¶å°æœ‰å¤§é‡çš„è¾“å‡ºï¼æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™äº›è¾“å‡ºæ¥åˆ¤æ–­ç¨‹åºåˆ°åº•å“ªé‡Œå‡ºäº†Bug</p>
<h2 id="62-log4j">6.2 Log4j</h2>
<p><strong>ç®€ä»‹ï¼š</strong></p>
<ul>
<li>Log4jæ˜¯Apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®</li>
<li>é€šè¿‡ä½¿ç”¨Log4jï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶æ—¥å¿—ä¿¡æ¯è¾“é€çš„ç›®çš„åœ°ï¼šæ§åˆ¶å°ï¼Œæ–‡æœ¬ï¼ŒGUIç»„ä»¶....</li>
<li>æˆ‘ä»¬ä¹Ÿå¯ä»¥æ§åˆ¶æ¯ä¸€æ¡æ—¥å¿—çš„è¾“å‡ºæ ¼å¼ï¼›</li>
<li>é€šè¿‡å®šä¹‰æ¯ä¸€æ¡æ—¥å¿—ä¿¡æ¯çš„çº§åˆ«ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ›´åŠ ç»†è‡´åœ°æ§åˆ¶æ—¥å¿—çš„ç”Ÿæˆè¿‡ç¨‹ã€‚æœ€ä»¤äººæ„Ÿå…´è¶£çš„å°±æ˜¯ï¼Œè¿™äº›å¯ä»¥é€šè¿‡ä¸€ä¸ªé…ç½®æ–‡ä»¶æ¥çµæ´»åœ°è¿›è¡Œé…ç½®ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹åº”ç”¨çš„ä»£ç ã€‚</li>
</ul>
<p><strong>ä½¿ç”¨æ­¥éª¤ï¼š</strong></p>
<ol>
<li>å¯¼å…¥log4jçš„åŒ…</li>
</ol>
<pre><code class="language-xml">&lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;log4j&lt;/groupId&gt;
    &lt;artifactId&gt;log4j&lt;/artifactId&gt;
    &lt;version&gt;1.2.17&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<ol start="2">
<li>é…ç½®æ–‡ä»¶ç¼–å†™</li>
</ol>
<pre><code class="language-properties">#å°†ç­‰çº§ä¸ºDEBUGçš„æ—¥å¿—ä¿¡æ¯è¾“å‡ºåˆ°consoleå’Œfileè¿™ä¸¤ä¸ªç›®çš„åœ°ï¼Œconsoleå’Œfileçš„å®šä¹‰åœ¨ä¸‹é¢çš„ä»£ç 
log4j.rootLogger=DEBUG,console,file

#æ§åˆ¶å°è¾“å‡ºçš„ç›¸å…³è®¾ç½®
log4j.appender.console = org.apache.log4j.ConsoleAppender
log4j.appender.console.Target = System.out
log4j.appender.console.Threshold=DEBUG
log4j.appender.console.layout = org.apache.log4j.PatternLayout
log4j.appender.console.layout.ConversionPattern=[%c]-%m%n

#æ–‡ä»¶è¾“å‡ºçš„ç›¸å…³è®¾ç½®
log4j.appender.file = org.apache.log4j.RollingFileAppender
log4j.appender.file.File=./log/Mybatis-04.log
log4j.appender.file.MaxFileSize=10mb
log4j.appender.file.Threshold=DEBUG
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=[%p][%d{yy-MM-dd}][%c]%m%n

#æ—¥å¿—è¾“å‡ºçº§åˆ«
log4j.logger.org.mybatis=DEBUG
log4j.logger.java.sql=DEBUG
log4j.logger.java.sql.Statement=DEBUG
log4j.logger.java.sql.ResultSet=DEBUG
log4j.logger.java.sql.PreparedStatement=DEBUG
</code></pre>
<ol start="3">
<li>settingè®¾ç½®æ—¥å¿—å®ç°</li>
</ol>
<pre><code class="language-xml">&lt;settings&gt;
   &lt;setting name=&quot;logImpl&quot; value=&quot;LOG4J&quot;/&gt;
&lt;/settings&gt;
</code></pre>
<ol start="4">
<li>åœ¨ç¨‹åºä¸­ä½¿ç”¨Log4jè¿›è¡Œè¾“å‡ºï¼</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.User;
import com.SolitudeAlma.utils.MybatisUtils;
import org.apache.ibatis.session.SqlSession;
import org.apache.log4j.Logger;
import org.junit.Test;

/**
 * junitæµ‹è¯•ç±»
 * @author SolitudeAlma
 * @date 2021/8/15
 */
public class UserDaoTest {

    //æ³¨æ„å¯¼åŒ…ï¼šorg.apache.log4j.Logger
    static Logger logger = Logger.getLogger(UserDaoTest.class);

    @Test
    public void getUserById() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        User userInfo = mapper.getUserById(1);
        System.out.println(userInfo);
        sqlSession.close();
    }

    @Test
    public void selectUser() {
        logger.info(&quot;infoï¼šè¿›å…¥selectUseræ–¹æ³•&quot;);
        logger.debug(&quot;debugï¼šè¿›å…¥selectUseræ–¹æ³•&quot;);
        logger.error(&quot;error: è¿›å…¥selectUseræ–¹æ³•&quot;);
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        User userInfo = mapper.getUserById(1);
        System.out.println(userInfo);
        sqlSession.close();
    }
}
</code></pre>
<ol start="5">
<li>æµ‹è¯•ï¼Œçœ‹æ§åˆ¶å°è¾“å‡ºï¼</li>
</ol>
<ul>
<li>ä½¿ç”¨Log4j è¾“å‡ºæ—¥å¿—</li>
<li>å¯ä»¥çœ‹åˆ°è¿˜ç”Ÿæˆäº†ä¸€ä¸ªæ—¥å¿—çš„æ–‡ä»¶ ã€éœ€è¦ä¿®æ”¹fileçš„æ—¥å¿—çº§åˆ«ã€‘</li>
</ul>
<p>éœ€è¦å¯¼åŒ…ï¼Œå‚æ•°ä¸ºå½“å‰ç±»çš„classå¯¹è±¡</p>
<blockquote>
<p><a href="https://www.cnblogs.com/xiaobaizhiqian/p/7956690.html">https://www.cnblogs.com/xiaobaizhiqian/p/7956690.html</a><br>
<a href="https://blog.csdn.net/eagleuniversityeye/article/details/80582140">https://blog.csdn.net/eagleuniversityeye/article/details/80582140</a><br>
<a href="https://www.cnblogs.com/wangzhuxing/p/7753420.html">https://www.cnblogs.com/wangzhuxing/p/7753420.html</a></p>
</blockquote>
<h1 id="7-åˆ†é¡µ">7. åˆ†é¡µ</h1>
<p><strong>æ€è€ƒï¼šä¸ºä»€ä¹ˆéœ€è¦åˆ†é¡µï¼Ÿ</strong><br>
åœ¨å­¦ä¹ mybatisç­‰æŒä¹…å±‚æ¡†æ¶çš„æ—¶å€™ï¼Œä¼šç»å¸¸å¯¹æ•°æ®è¿›è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œï¼Œä½¿ç”¨æœ€å¤šçš„æ˜¯å¯¹æ•°æ®åº“è¿›è¡ŒæŸ¥è¯¢æ“ä½œï¼Œå¦‚æœæŸ¥è¯¢å¤§é‡æ•°æ®çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¾€å¾€ä½¿ç”¨åˆ†é¡µè¿›è¡ŒæŸ¥è¯¢ï¼Œä¹Ÿå°±æ˜¯æ¯æ¬¡å¤„ç†å°éƒ¨åˆ†æ•°æ®ï¼Œè¿™æ ·å¯¹æ•°æ®åº“å‹åŠ›å°±åœ¨å¯æ§èŒƒå›´å†…ã€‚</p>
<h2 id="71-ä½¿ç”¨limitå®ç°åˆ†é¡µ">7.1 ä½¿ç”¨Limitå®ç°åˆ†é¡µ</h2>
<pre><code class="language-sql">#è¯­æ³•
SELECT * FROM table LIMIT stratIndexï¼ŒpageSize

SELECT * FROM table LIMIT 5,10; // æ£€ç´¢è®°å½•è¡Œ 6-15  

#ä¸ºäº†æ£€ç´¢ä»æŸä¸€ä¸ªåç§»é‡åˆ°è®°å½•é›†çš„ç»“æŸæ‰€æœ‰çš„è®°å½•è¡Œï¼Œå¯ä»¥æŒ‡å®šç¬¬äºŒä¸ªå‚æ•°ä¸º -1ï¼š   
SELECT * FROM table LIMIT 95,-1; // æ£€ç´¢è®°å½•è¡Œ 96-last.  

#å¦‚æœåªç»™å®šä¸€ä¸ªå‚æ•°ï¼Œå®ƒè¡¨ç¤ºè¿”å›æœ€å¤§çš„è®°å½•è¡Œæ•°ç›®ï¼š   
SELECT * FROM table LIMIT 5; //æ£€ç´¢å‰ 5 ä¸ªè®°å½•è¡Œ  

#æ¢å¥è¯è¯´ï¼ŒLIMIT n ç­‰ä»·äº LIMIT 0,nã€‚ 
</code></pre>
<p><strong>æ­¥éª¤ï¼š</strong></p>
<ol>
<li>ä¿®æ”¹Mapperæ–‡ä»¶</li>
</ol>
<pre><code class="language-xml">&lt;select id=&quot;getUserByLimit&quot; parameterType=&quot;map&quot; resultMap=&quot;UserMap&quot;&gt;
  select * from user limit #{currentPage},#{pageSize};
&lt;/select&gt;
</code></pre>
<ol start="2">
<li>Mapperæ¥å£ï¼Œå‚æ•°ä¸ºmap</li>
</ol>
<pre><code class="language-java">//é€‰æ‹©å…¨éƒ¨ç”¨æˆ·å®ç°åˆ†é¡µ
List&lt;User&gt; selectUser(Map&lt;String,Integer&gt; map);
</code></pre>
<ol start="3">
<li>åœ¨æµ‹è¯•ç±»ä¸­ä¼ å…¥å‚æ•°æµ‹è¯•</li>
</ol>
<ul>
<li>æ¨æ–­ï¼šèµ·å§‹ä½ç½® =  ï¼ˆå½“å‰é¡µé¢ - 1 ï¼‰ * é¡µé¢å¤§å°</li>
</ul>
<pre><code class="language-java">//åˆ†é¡µæŸ¥è¯¢ , ä¸¤ä¸ªå‚æ•°startIndex , pageSize
@Test
public void getUserByLimit() {
    SqlSession sqlSession = MybatisUtils.getSqlSession();
    UserDao mapper = sqlSession.getMapper(UserDao.class);
    int currentPage = 1;
    int pageSize = 2;
    Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();
    map.put(&quot;currentPage&quot;, (currentPage - 1) * pageSize);//ä¸‹æ ‡ä»0å¼€å§‹
    map.put(&quot;pageSize&quot;, pageSize);
    List&lt;User&gt; userList = mapper.getUserByLimit(map);
    for (User user : userList) {
        System.out.println(user);
    }
    sqlSession.close();
}
</code></pre>
<h2 id="72-ä½¿ç”¨rowboundsåˆ†é¡µ">7.2 ä½¿ç”¨RowBoundsåˆ†é¡µ</h2>
<p>æˆ‘ä»¬é™¤äº†ä½¿ç”¨Limitåœ¨SQLå±‚é¢å®ç°åˆ†é¡µï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨RowBoundsåœ¨Javaä»£ç å±‚é¢å®ç°åˆ†é¡µï¼Œå½“ç„¶æ­¤ç§æ–¹å¼ä½œä¸ºäº†è§£å³å¯ã€‚æˆ‘ä»¬æ¥çœ‹ä¸‹å¦‚ä½•å®ç°çš„ï¼<br>
<strong>æ­¥éª¤ï¼š</strong></p>
<ol>
<li>mapperæ¥å£</li>
</ol>
<pre><code class="language-java">/**
* é€šè¿‡Javaç±»å®ç°åˆ†é¡µ
* @return List ç”¨æˆ·ä¿¡æ¯é›†åˆ
*/
List&lt;User&gt; getUserByRowBounds();
</code></pre>
<ol start="2">
<li>mapperæ–‡ä»¶</li>
</ol>
<pre><code class="language-xml">&lt;select id=&quot;getUserByRowBounds&quot; resultType=&quot;user&quot;&gt;
  select * from user
&lt;/select&gt;
</code></pre>
<ol start="3">
<li>æµ‹è¯•ç±»<br>
åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨RowBoundsç±»</li>
</ol>
<pre><code class="language-java">@Test
public void getUserByRowBounds() {
    SqlSession sqlSession = MybatisUtils.getSqlSession();
    int currentPage = 1;
    int pageSize = 2;
    RowBounds rowBounds = new RowBounds(currentPage - 1, pageSize);
    //é€šè¿‡Javaå±‚ä»£ç å®ç°åˆ†é¡µ
    //é€šè¿‡session.**æ–¹æ³•è¿›è¡Œä¼ é€’rowBoundsï¼Œ[æ­¤ç§æ–¹å¼ç°åœ¨å·²ç»ä¸æ¨èä½¿ç”¨äº†]
    List&lt;User&gt; userList = sqlSession.selectList(&quot;com.SolitudeAlma.dao.UserDao.getUserByRowBounds&quot;, null, rowBounds);
    for (User user : userList) {
        System.out.println(user);
    }
    sqlSession.close();
}
</code></pre>
<h2 id="73-pagehelper">7.3 PageHelper</h2>
<figure data-type="image" tabindex="3"><img src="https://cdn.nlark.com/yuque/0/2021/png/22045814/1629127875711-753a1a31-2d3c-45bd-90d5-def577c246ae.png#clientId=u479eed64-76c8-4&amp;from=paste&amp;height=312&amp;id=udc4b7fa6&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=624&amp;originWidth=1244&amp;originalType=binary&amp;ratio=1&amp;size=71223&amp;status=done&amp;style=none&amp;taskId=uc03774e4-b22f-4f2e-ae8a-2818e5cecba&amp;width=622" alt="image.png" loading="lazy"></figure>
<p>äº†è§£å³å¯ï¼Œå¯ä»¥è‡ªå·±å°è¯•ä½¿ç”¨</p>
<p>å®˜æ–¹æ–‡æ¡£ï¼šhttps://pagehelper.github.io/â€‹</p>
<p>åœ¨MyBatisPluä¸­ï¼Œæˆ‘ä»¬ä¹Ÿè®²è§£åˆ°äº†åˆ†é¡µå®ç°ï¼Œæ‰€ä»¥å®ç°æ–¹å¼å¾ˆå¤šï¼Œçœ‹è‡ªå·±çš„ç†è§£åˆç†Ÿç»ƒç¨‹åº¦è¿›è¡ŒæŒæ¡å³å¯</p>
<h1 id="8-ä½¿ç”¨æ³¨è§£å¼€å‘">8. ä½¿ç”¨æ³¨è§£å¼€å‘</h1>
<h2 id="81-é¢å‘æ¥å£ç¼–ç¨‹">8.1 é¢å‘æ¥å£ç¼–ç¨‹</h2>
<p><strong>é¢å‘æ¥å£ç¼–ç¨‹ï¼š</strong></p>
<ul>
<li>å¤§å®¶ä¹‹å‰éƒ½å­¦è¿‡é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œä¹Ÿå­¦ä¹ è¿‡æ¥å£ï¼Œä½†åœ¨çœŸæ­£çš„å¼€å‘ä¸­ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä¼šé€‰æ‹©é¢å‘æ¥å£ç¼–ç¨‹</li>
<li><strong>æ ¹æœ¬åŸå›  :  è§£è€¦ , å¯æ‹“å±• , æé«˜å¤ç”¨ , åˆ†å±‚å¼€å‘ä¸­ , ä¸Šå±‚ä¸ç”¨ç®¡å…·ä½“çš„å®ç° , å¤§å®¶éƒ½éµå®ˆå…±åŒçš„æ ‡å‡† , ä½¿å¾—å¼€å‘å˜å¾—å®¹æ˜“ , è§„èŒƒæ€§æ›´å¥½</strong></li>
<li>åœ¨ä¸€ä¸ªé¢å‘å¯¹è±¡çš„ç³»ç»Ÿä¸­ï¼Œç³»ç»Ÿçš„å„ç§åŠŸèƒ½æ˜¯ç”±è®¸è®¸å¤šå¤šçš„ä¸åŒå¯¹è±¡åä½œå®Œæˆçš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå„ä¸ªå¯¹è±¡å†…éƒ¨æ˜¯å¦‚ä½•å®ç°è‡ªå·±çš„,å¯¹ç³»ç»Ÿè®¾è®¡äººå‘˜æ¥è®²å°±ä¸é‚£ä¹ˆé‡è¦äº†ï¼›</li>
<li>è€Œå„ä¸ªå¯¹è±¡ä¹‹é—´çš„åä½œå…³ç³»åˆ™æˆä¸ºç³»ç»Ÿè®¾è®¡çš„å…³é”®ã€‚å°åˆ°ä¸åŒç±»ä¹‹é—´çš„é€šä¿¡ï¼Œå¤§åˆ°å„æ¨¡å—ä¹‹é—´çš„äº¤äº’ï¼Œåœ¨ç³»ç»Ÿè®¾è®¡ä¹‹åˆéƒ½æ˜¯è¦ç€é‡è€ƒè™‘çš„ï¼Œè¿™ä¹Ÿæ˜¯ç³»ç»Ÿè®¾è®¡çš„ä¸»è¦å·¥ä½œå†…å®¹ã€‚é¢å‘æ¥å£ç¼–ç¨‹å°±æ˜¯æŒ‡æŒ‰ç…§è¿™ç§æ€æƒ³æ¥ç¼–ç¨‹ã€‚</li>
</ul>
<p><strong>å…³äºæ¥å£çš„ç†è§£</strong></p>
<ul>
<li>æ¥å£ä»æ›´æ·±å±‚æ¬¡çš„ç†è§£ï¼Œåº”æ˜¯å®šä¹‰ï¼ˆè§„èŒƒï¼Œçº¦æŸï¼‰ä¸å®ç°ï¼ˆåå®åˆ†ç¦»çš„åŸåˆ™ï¼‰çš„åˆ†ç¦»ã€‚</li>
<li>æ¥å£çš„æœ¬èº«åæ˜ äº†ç³»ç»Ÿè®¾è®¡äººå‘˜å¯¹ç³»ç»Ÿçš„æŠ½è±¡ç†è§£ã€‚</li>
<li>æ¥å£åº”æœ‰ä¸¤ç±»ï¼š
<ul>
<li>ç¬¬ä¸€ç±»æ˜¯å¯¹ä¸€ä¸ªä¸ªä½“çš„æŠ½è±¡ï¼Œå®ƒå¯å¯¹åº”ä¸ºä¸€ä¸ªæŠ½è±¡ä½“(abstract class)ï¼›</li>
<li>ç¬¬äºŒç±»æ˜¯å¯¹ä¸€ä¸ªä¸ªä½“æŸä¸€æ–¹é¢çš„æŠ½è±¡ï¼Œå³å½¢æˆä¸€ä¸ªæŠ½è±¡é¢ï¼ˆinterfaceï¼‰ï¼›</li>
</ul>
</li>
<li>ä¸€ä¸ªä¸ªä½“æœ‰å¯èƒ½æœ‰å¤šä¸ªæŠ½è±¡é¢ã€‚æŠ½è±¡ä½“ä¸æŠ½è±¡é¢æ˜¯æœ‰åŒºåˆ«çš„ã€‚</li>
</ul>
<p><strong>ä¸‰ä¸ªé¢å‘åŒºåˆ«</strong></p>
<ul>
<li>é¢å‘å¯¹è±¡æ˜¯æŒ‡ï¼Œæˆ‘ä»¬è€ƒè™‘é—®é¢˜æ—¶ï¼Œä»¥å¯¹è±¡ä¸ºå•ä½ï¼Œè€ƒè™‘å®ƒçš„å±æ€§åŠæ–¹æ³• .</li>
<li>é¢å‘è¿‡ç¨‹æ˜¯æŒ‡ï¼Œæˆ‘ä»¬è€ƒè™‘é—®é¢˜æ—¶ï¼Œä»¥ä¸€ä¸ªå…·ä½“çš„æµç¨‹ï¼ˆäº‹åŠ¡è¿‡ç¨‹ï¼‰ä¸ºå•ä½ï¼Œè€ƒè™‘å®ƒçš„å®ç° .</li>
<li>æ¥å£è®¾è®¡ä¸éæ¥å£è®¾è®¡æ˜¯é’ˆå¯¹å¤ç”¨æŠ€æœ¯è€Œè¨€çš„ï¼Œä¸é¢å‘å¯¹è±¡ï¼ˆè¿‡ç¨‹ï¼‰ä¸æ˜¯ä¸€ä¸ªé—®é¢˜.æ›´å¤šçš„ä½“ç°å°±æ˜¯å¯¹ç³»ç»Ÿæ•´ä½“çš„æ¶æ„</li>
</ul>
<h2 id="82-åˆ©ç”¨æ³¨è§£å¼€å‘">8.2 åˆ©ç”¨æ³¨è§£å¼€å‘</h2>
<ul>
<li><strong>mybatisæœ€åˆé…ç½®ä¿¡æ¯æ˜¯åŸºäº XML ,æ˜ å°„è¯­å¥(SQL)ä¹Ÿæ˜¯å®šä¹‰åœ¨ XML ä¸­çš„ã€‚è€Œåˆ°MyBatis 3æä¾›äº†æ–°çš„åŸºäºæ³¨è§£çš„é…ç½®ã€‚ä¸å¹¸çš„æ˜¯ï¼ŒJava æ³¨è§£çš„çš„è¡¨è¾¾åŠ›å’Œçµæ´»æ€§ååˆ†æœ‰é™ã€‚æœ€å¼ºå¤§çš„ MyBatis æ˜ å°„å¹¶ä¸èƒ½ç”¨æ³¨è§£æ¥æ„å»º</strong></li>
<li>sql ç±»å‹ä¸»è¦åˆ†æˆ :
<ul>
<li>@select ()</li>
<li>@update ()</li>
<li>@Insert ()</li>
<li>@delete ()</li>
</ul>
</li>
</ul>
<p>**æ³¨æ„ï¼š**åˆ©ç”¨æ³¨è§£å¼€å‘å°±ä¸éœ€è¦mapper.xmlæ˜ å°„æ–‡ä»¶äº† .</p>
<ol>
<li>æˆ‘ä»¬åœ¨æˆ‘ä»¬çš„æ¥å£ä¸­æ·»åŠ æ³¨è§£</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.User;
import org.apache.ibatis.annotations.Select;

import java.util.List;
import java.util.Map;

/**
 * @author SolitudeAlma
 * @date 2021/8/17
 */
public interface UserDao {

    /**
     * è·å–æ‰€ç”¨ç”¨æˆ·ä¿¡æ¯
     * @return List ç”¨æˆ·ä¿¡æ¯é›†åˆ
     */
    @Select(&quot;select id, name, pwd as password from user&quot;)
    List&lt;User&gt; selectAll();
}
</code></pre>
<ol start="2">
<li>åœ¨mybatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å…¥</li>
</ol>
<pre><code class="language-xml">&lt;!--ç»‘å®šæ¥å£--&gt;
&lt;mappers&gt;
  &lt;mapper class=&quot;com.SolitudeAlma.dao.UserDao&quot;/&gt;
&lt;/mappers&gt;
</code></pre>
<ol start="3">
<li>æˆ‘ä»¬å»è¿›è¡Œæµ‹è¯•</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.User;
import com.SolitudeAlma.utils.MybatisUtils;
import org.apache.ibatis.session.SqlSession;
import org.junit.Test;

import java.util.List;

/**
 * junitæµ‹è¯•ç±»
 * @author SolitudeAlma
 * @date 2021/8/16
 */
public class UserDaoTest {

    @Test
    public void selectAll() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        //åº•å±‚ä¸»è¦åº”ç”¨åå°„
        UserDao mapper = sqlSession.getMapper(UserDao.class);
        List&lt;User&gt; userList = mapper.selectAll();
        for (User user : userList) {
            System.out.println(user);
        }
        sqlSession.close();
    }
}
</code></pre>
<ol start="4">
<li>
<p>åˆ©ç”¨DebugæŸ¥çœ‹æœ¬è´¨<br>
<img src="https://cdn.nlark.com/yuque/0/2021/png/22045814/1629173214734-b246f3ca-bb96-41a5-8c12-6dbcf18740d5.png#clientId=ud139b93b-0d14-4&amp;from=paste&amp;height=224&amp;id=ue2615ea0&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=447&amp;originWidth=1098&amp;originalType=binary&amp;ratio=1&amp;size=66517&amp;status=done&amp;style=none&amp;taskId=u44ecb60a-3cc9-4221-88bc-6dce8433463&amp;width=549" alt="image.png" loading="lazy"></p>
</li>
<li>
<p>æœ¬è´¨ä¸Šåˆ©ç”¨äº†jvmçš„åŠ¨æ€ä»£ç†æœºåˆ¶<br>
æœ¬è´¨ï¼šåå°„æœºåˆ¶<br>
åº•å±‚ï¼šåŠ¨æ€ä»£ç†<br>
<img src="https://cdn.nlark.com/yuque/0/2021/png/22045814/1629173252833-289945ca-c59b-46fd-a05a-6f133639298c.png#clientId=ud139b93b-0d14-4&amp;from=paste&amp;height=223&amp;id=u60812ed8&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=446&amp;originWidth=837&amp;originalType=binary&amp;ratio=1&amp;size=109012&amp;status=done&amp;style=none&amp;taskId=u2df55bc4-c8c7-4e94-b093-5e22d3a2253&amp;width=418.5" alt="image.png" loading="lazy"></p>
</li>
<li>
<p>Mybatisè¯¦ç»†çš„æ‰§è¡Œæµç¨‹</p>
</li>
</ol>
<figure data-type="image" tabindex="4"><img src="https://cdn.nlark.com/yuque/0/2021/png/22045814/1629173355601-c1d2700d-936f-4761-af74-1f89bc9873d8.png#clientId=ud139b93b-0d14-4&amp;from=paste&amp;height=984&amp;id=uea18b5aa&amp;margin=%5Bobject%20Object%5D&amp;name=640.png&amp;originHeight=928&amp;originWidth=423&amp;originalType=binary&amp;ratio=1&amp;size=91882&amp;status=done&amp;style=none&amp;taskId=u71133102-b519-4ea5-915a-a327e23dfc1&amp;width=448.5" alt="640.png" loading="lazy"></figure>
<h2 id="83-crud">8.3 CRUD</h2>
<p>æ”¹é€ MybatisUtilså·¥å…·ç±»çš„getSession( ) æ–¹æ³•ï¼Œé‡è½½å®ç°ã€‚</p>
<pre><code class="language-java">/**
* æ—¢ç„¶æœ‰äº† SqlSessionFactoryï¼Œé¡¾åæ€ä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸­è·å¾— SqlSession çš„å®ä¾‹ã€‚SqlSession æä¾›äº†åœ¨æ•°æ®åº“æ‰§è¡Œ SQL
* å‘½ä»¤æ‰€éœ€çš„æ‰€æœ‰æ–¹æ³•ã€‚ä½ å¯ä»¥é€šè¿‡ SqlSession å®ä¾‹æ¥ç›´æ¥æ‰§è¡Œå·²æ˜ å°„çš„SQLè¯­å¥ã€‚ sqlSessionç›¸å½“äºjdbcä¸­çš„
* prepareStatementå¯¹è±¡
* @return SqlSessionFactory
*/
public static SqlSession getSqlSession() {
    return sqlSessionFactory.openSession(true);
}
</code></pre>
<p>ã€æ³¨æ„ã€‘ç¡®ä¿å®ä½“ç±»å’Œæ•°æ®åº“å­—æ®µå¯¹åº”<br>
<strong>æŸ¥è¯¢ï¼š</strong></p>
<ol>
<li>ç¼–å†™æ¥å£æ–¹æ³•æ³¨è§£</li>
</ol>
<pre><code class="language-java">/**
* æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯
* @param id ç”¨æˆ·å”¯ä¸€æ ‡è¯† @Param(&quot;xxx&quot;) æ–¹æ³•å­˜åœ¨å¤šä¸ªå‚æ•°æ—¶å‰é¢å¿…é¡»åŠ ä¸Šè¿™ä¸ªæ³¨è§£ï¼Œä¹Ÿèµ·åˆ°èµ·åˆ«åçš„ä½œç”¨
* @return Userç±» ç”¨æˆ·ä¿¡æ¯ç±»
*/
@Select(&quot;select id, name, pwd as password from user where id=#{id}&quot;)
User selectById(@Param(&quot;id&quot;) int id);
</code></pre>
<ol start="2">
<li>æµ‹è¯•</li>
</ol>
<pre><code class="language-java">@Test
public void selectById() {
    SqlSession sqlSession = MybatisUtils.getSqlSession();
    UserDao mapper = sqlSession.getMapper(UserDao.class);
    User user = mapper.selectById(1);
    System.out.println(user);
    sqlSession.close();
}
</code></pre>
<p><strong>æ–°å¢ï¼š</strong></p>
<ol>
<li>ç¼–å†™æ¥å£æ–¹æ³•æ³¨è§£</li>
</ol>
<pre><code class="language-java">/**
* æ’å…¥ä¸€æ¡ç”¨æˆ·ä¿¡æ¯
* @param user ç”¨æˆ·ä¿¡æ¯ç±»
* @return SQLæŸ¥è¯¢ç»“æœï¼Œå½±å“äº†å‡ è¡Œ
*/
@Insert(&quot;insert into user(`id`, `name`, `pwd`) values(#{id}, #{name}, #{password})&quot;)
int insertOne(User user);
</code></pre>
<ol start="2">
<li>æµ‹è¯•</li>
</ol>
<pre><code class="language-java">@Test
public void insertOne() {
    SqlSession sqlSession = MybatisUtils.getSqlSession();
    UserDao mapper = sqlSession.getMapper(UserDao.class);
    int user = mapper.insertOne(new User(7, &quot;asd&quot;, &quot;asdsa&quot;));
    System.out.println(user);
    sqlSession.close();
}
</code></pre>
<p><strong>ä¿®æ”¹ï¼š</strong></p>
<ol>
<li>ç¼–å†™æ¥å£æ–¹æ³•æ³¨è§£</li>
</ol>
<pre><code class="language-java">/**
* ä¿®æ”¹ä¸€æ¡ç”¨æˆ·ä¿¡æ¯
* @param user ç”¨æˆ·ä¿¡æ¯ç±»
* @return SQLæŸ¥è¯¢ç»“æœï¼Œå½±å“äº†å‡ è¡Œ
*/
@Update(&quot;update user set name = #{name}, pwd = #{password} where id = #{id}&quot;)
int updateOne(User user);
</code></pre>
<ol start="2">
<li>æµ‹è¯•</li>
</ol>
<pre><code class="language-java">@Test
public void updateOne() {
    SqlSession sqlSession = MybatisUtils.getSqlSession();
    UserDao mapper = sqlSession.getMapper(UserDao.class);
    int user = mapper.updateOne(new User(7, &quot;å°ç‹&quot;, &quot;145236&quot;));
    System.out.println(user);
    sqlSession.close();
}
</code></pre>
<p><strong>åˆ é™¤ï¼š</strong></p>
<ol>
<li>ç¼–å†™æ¥å£æ–¹æ³•æ³¨è§£</li>
</ol>
<pre><code class="language-java">/**
* åˆ é™¤ä¸€æ¡ç”¨æˆ·ä¿¡æ¯
* @param id ç”¨æˆ·å”¯ä¸€æ ‡è¯†
* @return SQLæŸ¥è¯¢ç»“æœï¼Œå½±å“äº†å‡ è¡Œ
*/
@Delete(&quot;delete from user where id = #{uid}&quot;)
int deleteOne(@Param(&quot;uid&quot;) int id);
</code></pre>
<ol start="2">
<li>æµ‹è¯•</li>
</ol>
<pre><code class="language-java">@Test
public void deleteOne() {
    SqlSession sqlSession = MybatisUtils.getSqlSession();
    UserDao mapper = sqlSession.getMapper(UserDao.class);
    int user = mapper.deleteOne(7);
    System.out.println(user);
    sqlSession.close();
}
</code></pre>
<p>ã€æ³¨æ„ç‚¹ï¼šå¢åˆ æ”¹ä¸€å®šè®°å¾—å¯¹äº‹åŠ¡çš„å¤„ç†ã€‘â€‹</p>
<p><strong>å…³äº@param</strong><br>
@Paramæ³¨è§£ç”¨äºç»™æ–¹æ³•å‚æ•°èµ·ä¸€ä¸ªåå­—ã€‚ä»¥ä¸‹æ˜¯æ€»ç»“çš„ä½¿ç”¨åŸåˆ™ï¼š</p>
<ul>
<li>åœ¨æ–¹æ³•åªæ¥å—ä¸€ä¸ªå‚æ•°çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä¸ä½¿ç”¨@Paramã€‚</li>
<li>åœ¨æ–¹æ³•æ¥å—å¤šä¸ªå‚æ•°çš„æƒ…å†µä¸‹ï¼Œå»ºè®®ä¸€å®šè¦ä½¿ç”¨@Paramæ³¨è§£ç»™å‚æ•°å‘½åã€‚</li>
<li>å¦‚æœå‚æ•°æ˜¯ JavaBean ï¼Œ åˆ™ä¸èƒ½ä½¿ç”¨@Paramã€‚</li>
<li>ä¸ä½¿ç”¨@Paramæ³¨è§£æ—¶ï¼Œå‚æ•°åªèƒ½æœ‰ä¸€ä¸ªï¼Œå¹¶ä¸”æ˜¯Javabeanã€‚</li>
</ul>
<blockquote>
<p><a href="https://www.cnblogs.com/zhuhui-site/p/10088369.html">https://www.cnblogs.com/zhuhui-site/p/10088369.html</a><br>
<a href="https://blog.csdn.net/sinat_33010325/article/details/84261662">https://blog.csdn.net/sinat_33010325/article/details/84261662</a></p>
</blockquote>
<p><strong>#{}ä¸${}çš„åŒºåˆ«</strong></p>
<ul>
<li>#{} çš„ä½œç”¨ä¸»è¦æ˜¯æ›¿æ¢é¢„ç¼–è¯‘è¯­å¥(PrepareStatement)ä¸­çš„å ä½ç¬¦? ã€æ¨èä½¿ç”¨ã€‘</li>
</ul>
<pre><code class="language-sql">INSERT INTO user (name) VALUES (#{name});
INSERT INTO user (name) VALUES (?);
</code></pre>
<ul>
<li>${} çš„ä½œç”¨æ˜¯ç›´æ¥è¿›è¡Œå­—ç¬¦ä¸²æ›¿æ¢ï¼ˆä¸æ¨èä½¿ç”¨ï¼Œå®¹æ˜“å¼•èµ·SQLæ³¨å…¥ï¼‰</li>
</ul>
<pre><code class="language-sql">INSERT INTO user (name) VALUES ('${name}');
INSERT INTO user (name) VALUES ('kuangshen');
</code></pre>
<p>ä½¿ç”¨æ³¨è§£å’Œé…ç½®æ–‡ä»¶ååŒå¼€å‘ï¼Œæ‰æ˜¯MyBatisçš„æœ€ä½³å®è·µ</p>
<h1 id="9-lombok">9. Lombok</h1>
<blockquote>
<p>Project Lombok is a java library that automatically plugs into your editor and build tools, spicing up your java.<br>
Never write another getter or equals method again, with one annotation your class has a fully featured builder, Automate your logging variables, and much more.</p>
</blockquote>
<ul>
<li>java library</li>
<li>plugs</li>
<li>build tools</li>
<li>with one annotation your class</li>
</ul>
<p>ä½¿ç”¨æ­¥éª¤ï¼š</p>
<ol>
<li>åœ¨ideaå®‰è£…Lombokæ’ä»¶</li>
<li>åœ¨é¡¹ç›®ä¸­å¯¼å…¥Lombokä¾èµ–</li>
</ol>
<pre><code class="language-xml">&lt;!-- https://mvnrepository.com/artifact/org.projectlombok/lombok --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
    &lt;artifactId&gt;lombok&lt;/artifactId&gt;
    &lt;version&gt;1.18.20&lt;/version&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;
</code></pre>
<ol start="3">
<li>æ³¨è§£è¯´æ˜</li>
</ol>
<pre><code class="language-java">@Getter and @Setter
@FieldNameConstants
@ToString
@EqualsAndHashCode
@AllArgsConstructor, @RequiredArgsConstructor and @NoArgsConstructor
@Log, @Log4j, @Log4j2, @Slf4j, @XSlf4j, @CommonsLog, @JBossLog, @Flogger, @CustomLog
@Data
@Builder
@SuperBuilder
@Singular
@Delegate
@Value
@Accessors
@Wither
@With
@SneakyThrows
@val
@var
experimental @var
@UtilityClass
</code></pre>
<pre><code class="language-java">//ç‚¹å¼€å·¦è¾¹çš„structureæŸ¥çœ‹ç±»ç»“æ„
@Dataï¼šæ— å‚æ„é€ ã€getã€setã€toString()ã€hashcode()ã€equals()
@AllArgsConstructor
@NoArgsConstructor
@ToString
@EqualsAndHashCode
@Getter å¯ä»¥æ”¾åœ¨å›ºå®šçš„å­—æ®µæˆ–è€…ç›´æ¥æ”¾åœ¨ç±»ä¸Š
</code></pre>
<h1 id="10-å¤šå¯¹ä¸€å¤„ç†">10. å¤šå¯¹ä¸€å¤„ç†</h1>
<p>å¤šå¯¹ä¸€çš„ç†è§£ï¼š</p>
<ul>
<li>å¤šä¸ªå­¦ç”Ÿå¯¹åº”ä¸€ä¸ªè€å¸ˆ</li>
<li>å¦‚æœå¯¹äºå­¦ç”Ÿè¿™è¾¹ï¼Œå°±æ˜¯ä¸€ä¸ªå¤šå¯¹ä¸€çš„ç°è±¡ï¼Œå³ä»å­¦ç”Ÿè¿™è¾¹å…³è”ä¸€ä¸ªè€å¸ˆï¼</li>
</ul>
<figure data-type="image" tabindex="5"><img src="https://cdn.nlark.com/yuque/0/2021/png/22045814/1629265047172-418c2b65-1792-4cba-8afb-206f25fe326e.png#clientId=ufbc0d8bb-8fc0-4&amp;from=paste&amp;height=483&amp;id=uf4324fe2&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=575&amp;originWidth=642&amp;originalType=binary&amp;ratio=1&amp;size=204230&amp;status=done&amp;style=none&amp;taskId=udebcbd19-0ec1-4758-9f59-6804279f5f7&amp;width=539" alt="image.png" loading="lazy"></figure>
<h2 id="101-æ•°æ®åº“è®¾è®¡">10.1 æ•°æ®åº“è®¾è®¡</h2>
<figure data-type="image" tabindex="6"><img src="https://cdn.nlark.com/yuque/0/2021/png/22045814/1629266284727-184d67a8-683d-46ad-8f39-4fec37c74415.png#clientId=ufbc0d8bb-8fc0-4&amp;from=paste&amp;height=165&amp;id=u7a21238d&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=330&amp;originWidth=635&amp;originalType=binary&amp;ratio=1&amp;size=89181&amp;status=done&amp;style=none&amp;taskId=ue57078c4-a157-4e5d-9efd-18656695493&amp;width=317.5" alt="image.png" loading="lazy"></figure>
<pre><code class="language-sql">CREATE TABLE `teacher` (
  `id` INT(10) NOT NULL,
  `name` VARCHAR(30) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=INNODB DEFAULT CHARSET=utf8mb4;

INSERT INTO teacher(`id`, `name`) VALUES (1, 'SolitudeAlma'); 

CREATE TABLE `student` (
  `id` INT(10) NOT NULL,
  `name` VARCHAR(30) DEFAULT NULL,
  `tid` INT(10) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `fktid` (`tid`),
  CONSTRAINT `fktid` FOREIGN KEY (`tid`) REFERENCES `teacher` (`id`)
) ENGINE=INNODB DEFAULT CHARSET=utf8mb4;
INSERT INTO `student` (`id`, `name`, `tid`) VALUES ('1', 'å°æ˜', '1'); 
INSERT INTO `student` (`id`, `name`, `tid`) VALUES ('2', 'å°çº¢', '1'); 
INSERT INTO `student` (`id`, `name`, `tid`) VALUES ('3', 'å°å¼ ', '1'); 
INSERT INTO `student` (`id`, `name`, `tid`) VALUES ('4', 'å°æ', '1'); 
INSERT INTO `student` (`id`, `name`, `tid`) VALUES ('5', 'å°ç‹', '1');
</code></pre>
<h2 id="102-æ­å»ºæµ‹è¯•ç¯å¢ƒ">10.2 æ­å»ºæµ‹è¯•ç¯å¢ƒ</h2>
<ol>
<li>IDEAå®‰è£…Lombokæ’ä»¶</li>
<li>å¼•å…¥Mavenä¾èµ–</li>
</ol>
<pre><code class="language-xml">&lt;!-- https://mvnrepository.com/artifact/org.projectlombok/lombok --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
    &lt;artifactId&gt;lombok&lt;/artifactId&gt;
    &lt;version&gt;1.18.20&lt;/version&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;
</code></pre>
<ol start="3">
<li>åœ¨ä»£ç ä¸­å¢åŠ æ³¨è§£</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.pojo;

import lombok.Data;

/**
 * @author SolitudeAlma
 * @date 2021/8/18
 */
@Data
public class Teacher {
    private int id;
    private String name;
}


package com.SolitudeAlma.pojo;

import lombok.Data;

/**
 * @author SolitudeAlma
 * @date 2021/8/18
 */
@Data
public class Student {
    private int id;
    private String name;
    private Teacher teacher;
}
</code></pre>
<ol start="4">
<li>ç¼–å†™å®ä½“ç±»å¯¹åº”çš„Mapperæ¥å£ ã€ä¸¤ä¸ªã€‘</li>
</ol>
<ul>
<li><strong>æ— è®ºæœ‰æ²¡æœ‰éœ€æ±‚ï¼Œéƒ½åº”è¯¥å†™ä¸Šï¼Œä»¥å¤‡åæ¥ä¹‹éœ€ï¼</strong></li>
</ul>
<pre><code class="language-java">package com.SolitudeAlma.dao;

/**
 * @author SolitudeAlma
 * @date 2021/8/18
 */
public interface StudentMapper {
}
</code></pre>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.Teacher;
import org.apache.ibatis.annotations.Param;
import org.apache.ibatis.annotations.Select;

/**
 * @author SolitudeAlma
 * @date 2021/8/18
 */
public interface TeacherMapper {

    /**
     * æŸ¥è¯¢å•ä¸ªè€å¸ˆçš„ä¿¡æ¯
     * @param id è€å¸ˆçš„å”¯ä¸€æ ‡è¯†
     * @return Teacher è€å¸ˆä¿¡æ¯ç±»
     */
    @Select(&quot;select * from teacher where id = #{tid}&quot;)
    Teacher getTeacher(@Param(&quot;tid&quot;) int id);
}
</code></pre>
<ol start="5">
<li>ç¼–å†™Mapperæ¥å£å¯¹åº”çš„ mapper.xmlé…ç½®æ–‡ä»¶ ã€ä¸¤ä¸ªã€‘</li>
</ol>
<ul>
<li><strong>æ— è®ºæœ‰æ²¡æœ‰éœ€æ±‚ï¼Œéƒ½åº”è¯¥å†™ä¸Šï¼Œä»¥å¤‡åæ¥ä¹‹éœ€ï¼</strong></li>
</ul>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;mapper namespace=&quot;com.SolitudeAlma.dao.StudentMapper&quot;&gt;

&lt;/mapper&gt;
</code></pre>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;mapper namespace=&quot;com.SolitudeAlma.dao.TeacherMapper&quot;&gt;

&lt;/mapper&gt;
</code></pre>
<ol start="6">
<li>æµ‹è¯•</li>
</ol>
<pre><code class="language-java">import com.SolitudeAlma.dao.TeacherMapper;
import com.SolitudeAlma.pojo.Teacher;
import com.SolitudeAlma.utils.MybatisUtils;
import org.apache.ibatis.session.SqlSession;
import org.junit.Test;

/**
 * @author SolitudeAlma
 * @date 2021/8/18
 */
public class MyTest {
    @Test
    public void selectOne() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        TeacherMapper mapper = sqlSession.getMapper(TeacherMapper.class);
        Teacher teacher = mapper.getTeacher(1);
        System.out.println(teacher.getId() + &quot; &quot; + teacher.getName());
        sqlSession.close();
    }
}
</code></pre>
<h2 id="103-æŒ‰æŸ¥è¯¢åµŒå¥—å¤„ç†">10.3 æŒ‰æŸ¥è¯¢åµŒå¥—å¤„ç†</h2>
<ol>
<li>ç»™StudentMapperæ¥å£å¢åŠ æ–¹æ³•</li>
</ol>
<pre><code class="language-java">/**
* æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿçš„ä¿¡æ¯ï¼Œä»¥åŠå¯¹åº”è€å¸ˆçš„ä¿¡æ¯
* @return List å­¦ç”Ÿä¿¡æ¯é›†åˆ
*/
List&lt;Student&gt; getStudent();
</code></pre>
<ol start="2">
<li>ç¼–å†™å¯¹åº”çš„Mapperæ–‡ä»¶</li>
</ol>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
       PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
       &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;mapper namespace=&quot;com.kuang.mapper.StudentMapper&quot;&gt;
   &lt;!--
   éœ€æ±‚ï¼šè·å–æ‰€æœ‰å­¦ç”ŸåŠå¯¹åº”è€å¸ˆçš„ä¿¡æ¯
   æ€è·¯ï¼š
       1. è·å–æ‰€æœ‰å­¦ç”Ÿçš„ä¿¡æ¯
       2. æ ¹æ®è·å–çš„å­¦ç”Ÿä¿¡æ¯çš„è€å¸ˆID-&gt;è·å–è¯¥è€å¸ˆçš„ä¿¡æ¯
       3. æ€è€ƒé—®é¢˜ï¼Œè¿™æ ·å­¦ç”Ÿçš„ç»“æœé›†ä¸­åº”è¯¥åŒ…å«è€å¸ˆï¼Œè¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Œæ•°æ®åº“ä¸­æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨å…³è”æŸ¥è¯¢ï¼Ÿ
           1. åšä¸€ä¸ªç»“æœé›†æ˜ å°„ï¼šstudentInfo
           2. studentInfoç»“æœé›†çš„ç±»å‹ä¸º Student
           3. å­¦ç”Ÿä¸­è€å¸ˆçš„å±æ€§ä¸ºteacherï¼Œå¯¹åº”æ•°æ®åº“ä¸­ä¸ºtidã€‚
              å¤šä¸ª [1,...ï¼‰å­¦ç”Ÿå…³è”ä¸€ä¸ªè€å¸ˆ=&gt; ä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤š
           4. æŸ¥çœ‹å®˜ç½‘æ‰¾åˆ°ï¼šassociation â€“ ä¸€ä¸ªå¤æ‚ç±»å‹çš„å…³è”ï¼›ä½¿ç”¨å®ƒæ¥å¤„ç†å…³è”æŸ¥è¯¢
   --&gt;
   &lt;select id=&quot;getStudents&quot; resultMap=&quot;studentInfo&quot;&gt;
    select * from student
   &lt;/select&gt;
   &lt;resultMap id=&quot;studentInfo&quot; type=&quot;Student&quot;&gt;
       &lt;id property=&quot;id&quot; column=&quot;id&quot;/&gt;
       &lt;id property=&quot;name&quot; column=&quot;name&quot;/&gt;
       &lt;!--associationå…³è”å±æ€§ propertyç±»çš„å±æ€§å javaTypeå±æ€§ç±»å‹ columnåœ¨å¤šçš„ä¸€æ–¹çš„è¡¨ä¸­çš„åˆ—å--&gt;
       &lt;association property=&quot;teacher&quot;  column=&quot;tid&quot; javaType=&quot;Teacher&quot; select=&quot;getTeacher&quot;/&gt;
   &lt;/resultMap&gt;
   &lt;!--
   è¿™é‡Œä¼ é€’è¿‡æ¥çš„idï¼Œåªæœ‰ä¸€ä¸ªå±æ€§çš„æ—¶å€™ï¼Œä¸‹é¢å¯ä»¥å†™ä»»ä½•å€¼
   associationä¸­columnå¤šå‚æ•°é…ç½®ï¼š
       column=&quot;{key=value,key=value}&quot;
       å…¶å®å°±æ˜¯é”®å€¼å¯¹çš„å½¢å¼ï¼Œkeyæ˜¯ä¼ ç»™ä¸‹ä¸ªsqlçš„å–å€¼åç§°ï¼Œvalueæ˜¯ç‰‡æ®µä¸€ä¸­sqlæŸ¥è¯¢çš„å­—æ®µåã€‚
   --&gt;
   &lt;select id=&quot;getTeacher&quot; resultType=&quot;Teacher&quot;&gt;
      select id, name from teacher where id = #{id}
   &lt;/select&gt;
&lt;/mapper&gt;
</code></pre>
<ol start="3">
<li>ç¼–å†™å®Œæ¯•å»Mybatisé…ç½®æ–‡ä»¶ä¸­ï¼Œæ³¨å†ŒMapperï¼</li>
<li>æ³¨æ„ç‚¹è¯´æ˜ï¼š</li>
</ol>
<pre><code class="language-xml">&lt;resultMap id=&quot;studentInfo&quot; type=&quot;Student&quot;&gt;
   &lt;!--associationå…³è”å±æ€§ propertyç±»çš„å±æ€§å javaTypeå±æ€§ç±»å‹ columnåœ¨å¤šçš„ä¸€æ–¹çš„è¡¨ä¸­çš„åˆ—å--&gt;
   &lt;association property=&quot;teacher&quot;  column=&quot;{id=tid}&quot; javaType=&quot;Teacher&quot; select=&quot;getTeacher&quot;/&gt;
&lt;/resultMap&gt;
&lt;!--
è¿™é‡Œä¼ é€’è¿‡æ¥çš„idï¼Œåªæœ‰ä¸€ä¸ªå±æ€§çš„æ—¶å€™ï¼Œä¸‹é¢å¯ä»¥å†™ä»»ä½•å€¼
associationä¸­columnå¤šå‚æ•°é…ç½®ï¼š
   column=&quot;{key=value,key=value}&quot;
   æ³¨æ„ï¼šåœ¨ä½¿ç”¨å¤åˆä¸»é”®çš„æ—¶å€™ï¼Œä½ å¯ä»¥ä½¿ç”¨ column=&quot;{prop1=col1,prop2=col2}&quot; è¿™æ ·çš„è¯­æ³•æ¥æŒ‡å®šå¤šä¸ªä¼ é€’ç»™åµŒå¥— Select æŸ¥è¯¢è¯­å¥çš„åˆ—åã€‚è¿™ä¼šä½¿å¾— prop1 å’Œ prop2 ä½œä¸ºå‚æ•°å¯¹è±¡ï¼Œè¢«è®¾ç½®ä¸ºå¯¹åº”åµŒå¥— Select è¯­å¥çš„å‚æ•°ã€‚
--&gt;
&lt;select id=&quot;getTeacher&quot; resultType=&quot;teacher&quot;&gt;
  select * from teacher where id = #{id}
&lt;/select&gt;
</code></pre>
<ol start="5">
<li>æµ‹è¯•</li>
</ol>
<pre><code class="language-java">import com.SolitudeAlma.dao.StudentMapper;
import com.SolitudeAlma.dao.TeacherMapper;
import com.SolitudeAlma.pojo.Student;
import com.SolitudeAlma.pojo.Teacher;
import com.SolitudeAlma.utils.MybatisUtils;
import org.apache.ibatis.session.SqlSession;
import org.junit.Test;

import java.util.List;

/**
 * @author SolitudeAlma
 * @date 2021/8/18
 */
public class MyTest {
    @Test
    public void selectOne() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        TeacherMapper mapper = sqlSession.getMapper(TeacherMapper.class);
        Teacher teacher = mapper.getTeacher(1);
        System.out.println(teacher.getId() + &quot; &quot; + teacher.getName());
        sqlSession.close();
    }

    @Test
    public void selectAll() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        StudentMapper mapper = sqlSession.getMapper(StudentMapper.class);
        List&lt;Student&gt; students = mapper.getStudent();
        for (Student student : students) {
            System.out.println(&quot;å­¦ç”Ÿï¼š&quot; + student.getName() + &quot;\t&quot; + &quot;è€å¸ˆï¼š&quot; + student.getTeacher().getName());
        }
        sqlSession.close();
    }
}
</code></pre>
<h2 id="104-æŒ‰ç»“æœåµŒå¥—å¤„ç†">10.4 æŒ‰ç»“æœåµŒå¥—å¤„ç†</h2>
<p>é™¤äº†ä¸Šé¢è¿™ç§æ–¹å¼ï¼Œè¿˜æœ‰å…¶ä»–æ€è·¯å—ï¼Ÿ<br>
æˆ‘ä»¬è¿˜å¯ä»¥æŒ‰ç…§ç»“æœè¿›è¡ŒåµŒå¥—å¤„ç†ï¼›</p>
<ol>
<li>æ¥å£æ–¹æ³•ç¼–å†™</li>
</ol>
<pre><code class="language-java">/**
* æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿçš„ä¿¡æ¯ï¼Œä»¥åŠå¯¹åº”è€å¸ˆçš„ä¿¡æ¯
* @return List å­¦ç”Ÿä¿¡æ¯é›†åˆ
*/
List&lt;Student&gt; getStudent01();
</code></pre>
<ol start="2">
<li>ç¼–å†™å¯¹åº”çš„mapperæ–‡ä»¶</li>
</ol>
<pre><code class="language-xml">&lt;!--
æŒ‰æŸ¥è¯¢ç»“æœåµŒå¥—å¤„ç†
æ€è·¯ï¼š
1. ç›´æ¥æŸ¥è¯¢å‡ºç»“æœï¼Œè¿›è¡Œç»“æœé›†çš„æ˜ å°„
--&gt;
&lt;select id=&quot;getStudent01&quot; resultMap=&quot;studentInfo01&quot;&gt;
  select s.id, s.name, t.name from student as s, teacher as t where s.tid = t.id
&lt;/select&gt;
&lt;resultMap id=&quot;studentInfo01&quot; type=&quot;Student&quot;&gt;
  &lt;id property=&quot;id&quot; column=&quot;id&quot;/&gt;
  &lt;result property=&quot;name&quot; column=&quot;name&quot;/&gt;
  &lt;!--å…³è”å¯¹è±¡property å…³è”å¯¹è±¡åœ¨Studentå®ä½“ç±»ä¸­çš„å±æ€§--&gt;
  &lt;association property=&quot;teacher&quot; javaType=&quot;Teacher&quot;&gt;
    &lt;result property=&quot;name&quot; column=&quot;name&quot;/&gt;
  &lt;/association&gt;
&lt;/resultMap&gt;
</code></pre>
<ol start="3">
<li>å»mybatis-configæ–‡ä»¶ä¸­æ³¨å…¥ã€æ­¤å¤„åº”è¯¥å¤„ç†è¿‡äº†ã€‘</li>
<li>æµ‹è¯•</li>
</ol>
<pre><code class="language-java">@Test
public void selectAll01() {
    SqlSession sqlSession = MybatisUtils.getSqlSession();
    StudentMapper mapper = sqlSession.getMapper(StudentMapper.class);
    List&lt;Student&gt; students = mapper.getStudent01();
    for (Student student : students) {
        System.out.println(&quot;å­¦ç”Ÿï¼š&quot; + student.getName() + &quot;\t&quot; + &quot;è€å¸ˆï¼š&quot; + student.getTeacher().getName());
    }
    sqlSession.close();
}
</code></pre>
<p><strong>å°ç»“ï¼š</strong><br>
æŒ‰ç…§æŸ¥è¯¢è¿›è¡ŒåµŒå¥—å¤„ç†å°±åƒSQLä¸­çš„å­æŸ¥è¯¢<br>
æŒ‰ç…§ç»“æœè¿›è¡ŒåµŒå¥—å¤„ç†å°±åƒSQLä¸­çš„è”è¡¨æŸ¥è¯¢</p>
<h1 id="11-ä¸€å¯¹å¤šå¤„ç†">11. ä¸€å¯¹å¤šå¤„ç†</h1>
<p>ä¸€å¯¹å¤šçš„ç†è§£ï¼š</p>
<ul>
<li>ä¸€ä¸ªè€å¸ˆæ‹¥æœ‰å¤šä¸ªå­¦ç”Ÿ</li>
<li>å¦‚æœå¯¹äºè€å¸ˆè¿™è¾¹ï¼Œå°±æ˜¯ä¸€ä¸ªä¸€å¯¹å¤šçš„ç°è±¡ï¼Œå³ä»ä¸€ä¸ªè€å¸ˆä¸‹é¢æ‹¥æœ‰ä¸€ç¾¤å­¦ç”Ÿï¼ˆé›†åˆï¼‰ï¼</li>
</ul>
<h2 id="111-æ•°æ®åº“è®¾è®¡">11.1 æ•°æ®åº“è®¾è®¡</h2>
<p>ä¸ä¿®æ”¹</p>
<h2 id="112-æ­å»ºæµ‹è¯•ç¯å¢ƒ">11.2 æ­å»ºæµ‹è¯•ç¯å¢ƒ</h2>
<p>æŠŠä¸Šä¸€ä¸ªé¡¹ç›®æ‹·è¿‡æ¥ï¼Œé‡æ–°åˆ›å»ºä¸€ä¸ªmodule</p>
<p>å®ä½“ç±»:</p>
<pre><code class="language-java">package com.SolitudeAlma.pojo;

import lombok.Data;

import java.util.List;

/**
 * @author SolitudeAlma
 * @date 2021/8/18
 */
@Data
public class Teacher {
    private int id;
    private String name;
    private List&lt;Student&gt; studentList;
}
</code></pre>
<pre><code class="language-java">package com.SolitudeAlma.pojo;

import lombok.Data;

/**
 * @author SolitudeAlma
 * @date 2021/8/18
 */
@Data
public class Student {
    private int id;
    private String name;
    private int tid;
}
</code></pre>
<h2 id="113-æŒ‰ç»“æœåµŒå¥—å¤„ç†">11.3 æŒ‰ç»“æœåµŒå¥—å¤„ç†</h2>
<ol>
<li>TeacherMapperæ¥å£ç¼–å†™æ–¹æ³•</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.Teacher;
import lombok.Data;
import org.apache.ibatis.annotations.Param;
import org.apache.ibatis.annotations.Select;

import java.util.List;

/**
 * @author SolitudeAlma
 * @date 2021/8/18
 */
public interface TeacherMapper {
    /**
     * è·å–æŒ‡å®šæ•™å¸ˆä¿¡æ¯çš„åŒæ—¶è·å–å…¶æ•™çš„å­¦ç”Ÿçš„ä¿¡æ¯
     * @param id æ•™å¸ˆå”¯ä¸€æ ‡è¯†
     * @return List ä¿¡æ¯é›†åˆï¼ŒåŒ…æ‹¬æ•™å¸ˆåŠæ‰€æ•™å­¦ç”Ÿä¿¡æ¯
     */
    List&lt;Teacher&gt; getTeacher(@Param(&quot;tid&quot;) int id);
}
</code></pre>
<ol start="2">
<li>ç¼–å†™æ¥å£å¯¹åº”çš„Mapperé…ç½®æ–‡ä»¶</li>
</ol>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;mapper namespace=&quot;com.SolitudeAlma.dao.TeacherMapper&quot;&gt;
    &lt;!--
    æ€è·¯:
        1. ä»å­¦ç”Ÿè¡¨å’Œè€å¸ˆè¡¨ä¸­æŸ¥å‡ºå­¦ç”Ÿidï¼Œå­¦ç”Ÿå§“åï¼Œè€å¸ˆå§“å
        2. å¯¹æŸ¥è¯¢å‡ºæ¥çš„æ“ä½œåšç»“æœé›†æ˜ å°„
            1. é›†åˆçš„è¯ï¼Œä½¿ç”¨collectionï¼
                JavaTypeå’ŒofTypeéƒ½æ˜¯ç”¨æ¥æŒ‡å®šå¯¹è±¡ç±»å‹çš„
                JavaTypeæ˜¯ç”¨æ¥æŒ‡å®špojoä¸­å±æ€§çš„ç±»å‹
                ofTypeæŒ‡å®šçš„æ˜¯æ˜ å°„åˆ°listé›†åˆå±æ€§ä¸­pojoçš„ç±»å‹ã€‚
    --&gt;
    &lt;select id=&quot;getTeacher&quot; resultMap=&quot;teacherInfo&quot;&gt;
        select s.id as sid, s.name as sname, t.id as tid, t.name as tname from student as s, teacher as t where s.tid = t.id and t.id = #{tid};
    &lt;/select&gt;
    &lt;!--
        å¤æ‚çš„å±æ€§éœ€è¦å•ç‹¬å¤„ç†
        å¯¹è±¡ï¼šassociation
        é›†åˆï¼šcollection
    --&gt;
    &lt;resultMap id=&quot;teacherInfo&quot; type=&quot;Teacher&quot;&gt;
        &lt;result property=&quot;id&quot; column=&quot;tid&quot;/&gt;
        &lt;result property=&quot;name&quot; column=&quot;tname&quot;/&gt;
        &lt;collection  property=&quot;studentList&quot; ofType=&quot;Student&quot;&gt;
            &lt;result property=&quot;id&quot; column=&quot;sid&quot;/&gt;
            &lt;result property=&quot;name&quot; column=&quot;sname&quot;/&gt;
            &lt;result property=&quot;tid&quot; column=&quot;tid&quot;/&gt;
        &lt;/collection &gt;
    &lt;/resultMap&gt;
&lt;/mapper&gt;
</code></pre>
<ol start="3">
<li>å°†Mapperæ–‡ä»¶æ³¨å†Œåˆ°MyBatis-configæ–‡ä»¶ä¸­</li>
</ol>
<pre><code class="language-xml">&lt;mappers&gt;
  &lt;mapper resource=&quot;com/SolitudeAlma/dao/StudentMapper.xml&quot;/&gt;
  &lt;mapper resource=&quot;com/SolitudeAlma/dao/TeacherMapper.xml&quot;/&gt;
&lt;/mappers&gt;
</code></pre>
<ol start="4">
<li>æµ‹è¯•</li>
</ol>
<pre><code class="language-java">import com.SolitudeAlma.dao.TeacherMapper;
import com.SolitudeAlma.pojo.Teacher;
import com.SolitudeAlma.utils.MybatisUtils;
import org.apache.ibatis.session.SqlSession;
import org.junit.Test;

import java.util.List;

/**
 * @author SolitudeAlma
 * @date 2021/8/18
 */
public class MyTest {
    @Test
    public void getTeacher() {
        SqlSession sqlSession = MybatisUtils.getSqlSession();
        TeacherMapper mapper = sqlSession.getMapper(TeacherMapper.class);
        List&lt;Teacher&gt; teacherList = mapper.getTeacher(1);
        for (Teacher teacher : teacherList) {
            System.out.println(&quot;teacher: &quot; + teacher.getName());
            teacher.getStudentList().forEach(e -&gt; {
                System.out.println(&quot;student&quot; + e.getId() + &quot;: name: &quot; + e.getName() +  &quot; tid: &quot; + e.getTid());
            });
        }
    }
}
</code></pre>
<h2 id="114-æŒ‰æŸ¥è¯¢åµŒå¥—å¤„ç†">11.4 æŒ‰æŸ¥è¯¢åµŒå¥—å¤„ç†</h2>
<ol>
<li>TeacherMapperæ¥å£ç¼–å†™æ–¹æ³•</li>
</ol>
<pre><code class="language-java">/**
* è·å–æŒ‡å®šæ•™å¸ˆä¿¡æ¯çš„åŒæ—¶è·å–å…¶æ•™çš„å­¦ç”Ÿçš„ä¿¡æ¯
* @param id æ•™å¸ˆå”¯ä¸€æ ‡è¯†
* @return List ä¿¡æ¯é›†åˆï¼ŒåŒ…æ‹¬æ•™å¸ˆåŠæ‰€æ•™å­¦ç”Ÿä¿¡æ¯
*/
List&lt;Teacher&gt; getTeacher01(@Param(&quot;tid&quot;) int id);
</code></pre>
<ol start="2">
<li>ç¼–å†™æ¥å£å¯¹åº”çš„Mapperé…ç½®æ–‡ä»¶</li>
</ol>
<pre><code class="language-xml">&lt;select id=&quot;getTeacher01&quot; resultMap=&quot;teacherInfo01&quot;&gt;
  select id, name from teacher
  where id = #{tid};
&lt;/select&gt;
&lt;resultMap id=&quot;teacherInfo01&quot; type=&quot;Teacher&quot;&gt;
  &lt;result property=&quot;id&quot; column=&quot;id&quot;/&gt;
  &lt;!--columnæ˜¯ä¸€å¯¹å¤šçš„å¤–é”® , å†™çš„æ˜¯ä¸€çš„ä¸»é”®çš„åˆ—å--&gt;
  &lt;collection property=&quot;studentList&quot; javaType=&quot;List&quot; column=&quot;id&quot; ofType=&quot;Student&quot; select=&quot;getStudentByTeacherId&quot;/&gt;
&lt;/resultMap&gt;
&lt;select id=&quot;getStudentByTeacherId&quot; resultType=&quot;Student&quot;&gt;
  select id, name, tid from student
  where tid = #{tid};
&lt;/select&gt;
</code></pre>
<ol start="3">
<li>å°†Mapperæ–‡ä»¶æ³¨å†Œåˆ°MyBatis-configæ–‡ä»¶ä¸­</li>
<li>æµ‹è¯•</li>
</ol>
<pre><code class="language-java">@Test
public void getTeacher01() {
    SqlSession sqlSession = MybatisUtils.getSqlSession();
    TeacherMapper mapper = sqlSession.getMapper(TeacherMapper.class);
    List&lt;Teacher&gt; teacherList = mapper.getTeacher01(1);
    for (Teacher teacher : teacherList) {
        System.out.println(&quot;teacher: name: &quot; + teacher.getName() + &quot; id: &quot; + teacher.getId());
        teacher.getStudentList().forEach(e -&gt; {
            System.out.println(&quot;student&quot; + e.getId() + &quot;: name: &quot; + e.getName() +  &quot; tid: &quot; + e.getTid());
        });
    }
}
</code></pre>
<p><strong>å°ç»“ï¼š</strong></p>
<ol>
<li>å…³è”-association</li>
<li>é›†åˆ-collection</li>
<li>æ‰€ä»¥associationæ˜¯ç”¨äºä¸€å¯¹ä¸€å’Œå¤šå¯¹ä¸€ï¼Œè€Œcollectionæ˜¯ç”¨äºä¸€å¯¹å¤šçš„å…³ç³»</li>
<li>JavaTypeå’ŒofTypeéƒ½æ˜¯ç”¨æ¥æŒ‡å®šå¯¹è±¡ç±»å‹çš„</li>
</ol>
<ul>
<li>JavaTypeæ˜¯ç”¨æ¥æŒ‡å®špojoä¸­å±æ€§çš„ç±»å‹</li>
<li>ofTypeæŒ‡å®šçš„æ˜¯æ˜ å°„åˆ°listé›†åˆå±æ€§ä¸­pojoçš„ç±»å‹ã€‚</li>
</ul>
<p><strong>æ³¨æ„è¯´æ˜ï¼š</strong></p>
<ol>
<li>ä¿è¯SQLçš„å¯è¯»æ€§ï¼Œå°½é‡é€šä¿—æ˜“æ‡‚</li>
<li>æ ¹æ®å®é™…è¦æ±‚ï¼Œå°½é‡ç¼–å†™æ€§èƒ½æ›´é«˜çš„SQLè¯­å¥</li>
<li>æ³¨æ„å±æ€§åå’Œå­—æ®µä¸ä¸€è‡´çš„é—®é¢˜</li>
<li>æ³¨æ„ä¸€å¯¹å¤šå’Œå¤šå¯¹ä¸€ ä¸­ï¼šå­—æ®µå’Œå±æ€§å¯¹åº”çš„é—®é¢˜</li>
<li>å°½é‡ä½¿ç”¨Log4jï¼Œé€šè¿‡æ—¥å¿—æ¥æŸ¥çœ‹è‡ªå·±çš„é”™è¯¯</li>
</ol>
<h1 id="12-åŠ¨æ€sql">12. åŠ¨æ€SQL</h1>
<h2 id="121-ä»‹ç»">12.1 ä»‹ç»</h2>
<p>ä»€ä¹ˆæ˜¯åŠ¨æ€SQLï¼š<strong>åŠ¨æ€SQLæŒ‡çš„æ˜¯æ ¹æ®ä¸åŒçš„æŸ¥è¯¢æ¡ä»¶ , ç”Ÿæˆä¸åŒçš„Sqlè¯­å¥.</strong></p>
<blockquote>
<p>å®˜ç½‘æè¿°ï¼š<br>
MyBatis çš„å¼ºå¤§ç‰¹æ€§ä¹‹ä¸€ä¾¿æ˜¯å®ƒçš„åŠ¨æ€ SQLã€‚å¦‚æœä½ æœ‰ä½¿ç”¨ JDBC æˆ–å…¶å®ƒç±»ä¼¼æ¡†æ¶çš„ç»éªŒï¼Œä½ å°±èƒ½ä½“ä¼šåˆ°æ ¹æ®ä¸åŒæ¡ä»¶æ‹¼æ¥ SQL è¯­å¥çš„ç—›è‹¦ã€‚ä¾‹å¦‚æ‹¼æ¥æ—¶è¦ç¡®ä¿ä¸èƒ½å¿˜è®°æ·»åŠ å¿…è¦çš„ç©ºæ ¼ï¼Œè¿˜è¦æ³¨æ„å»æ‰åˆ—è¡¨æœ€åä¸€ä¸ªåˆ—åçš„é€—å·ã€‚åˆ©ç”¨åŠ¨æ€ SQL è¿™ä¸€ç‰¹æ€§å¯ä»¥å½»åº•æ‘†è„±è¿™ç§ç—›è‹¦ã€‚<br>
è™½ç„¶åœ¨ä»¥å‰ä½¿ç”¨åŠ¨æ€ SQL å¹¶éä¸€ä»¶æ˜“äº‹ï¼Œä½†æ­£æ˜¯ MyBatis æä¾›äº†å¯ä»¥è¢«ç”¨åœ¨ä»»æ„ SQL æ˜ å°„è¯­å¥ä¸­çš„å¼ºå¤§çš„åŠ¨æ€ SQL è¯­è¨€å¾—ä»¥æ”¹è¿›è¿™ç§æƒ…å½¢ã€‚<br>
åŠ¨æ€ SQL å…ƒç´ å’Œ JSTL æˆ–åŸºäºç±»ä¼¼ XML çš„æ–‡æœ¬å¤„ç†å™¨ç›¸ä¼¼ã€‚åœ¨ MyBatis ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œæœ‰å¾ˆå¤šå…ƒç´ éœ€è¦èŠ±æ—¶é—´äº†è§£ã€‚MyBatis 3 å¤§å¤§ç²¾ç®€äº†å…ƒç´ ç§ç±»ï¼Œç°åœ¨åªéœ€å­¦ä¹ åŸæ¥ä¸€åŠçš„å…ƒç´ ä¾¿å¯ã€‚MyBatis é‡‡ç”¨åŠŸèƒ½å¼ºå¤§çš„åŸºäº OGNL çš„è¡¨è¾¾å¼æ¥æ·˜æ±°å…¶å®ƒå¤§éƒ¨åˆ†å…ƒç´ ã€‚</p>
</blockquote>
<hr>
<ul>
<li>if</li>
<li>choose (when, otherwise)</li>
<li>trim (where, set)</li>
<li>foreach</li>
</ul>
<hr>
<p>æˆ‘ä»¬ä¹‹å‰å†™çš„ SQL è¯­å¥éƒ½æ¯”è¾ƒç®€å•ï¼Œå¦‚æœæœ‰æ¯”è¾ƒå¤æ‚çš„ä¸šåŠ¡ï¼Œæˆ‘ä»¬éœ€è¦å†™å¤æ‚çš„ SQL è¯­å¥ï¼Œå¾€å¾€éœ€è¦æ‹¼æ¥ï¼Œè€Œæ‹¼æ¥ SQL ï¼Œç¨å¾®ä¸æ³¨æ„ï¼Œç”±äºå¼•å·ï¼Œç©ºæ ¼ç­‰ç¼ºå¤±å¯èƒ½éƒ½ä¼šå¯¼è‡´é”™è¯¯ã€‚<br>
é‚£ä¹ˆæ€ä¹ˆå»è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿè¿™å°±è¦ä½¿ç”¨ mybatis åŠ¨æ€SQLï¼Œé€šè¿‡ if, choose, when, otherwise, trim, where, set, foreachç­‰æ ‡ç­¾ï¼Œå¯ç»„åˆæˆéå¸¸çµæ´»çš„SQLè¯­å¥ï¼Œä»è€Œåœ¨æé«˜ SQL è¯­å¥çš„å‡†ç¡®æ€§çš„åŒæ—¶ï¼Œä¹Ÿå¤§å¤§æé«˜äº†å¼€å‘äººå‘˜çš„æ•ˆç‡ã€‚</p>
<h2 id="122-æ­å»ºç¯å¢ƒ">12.2 æ­å»ºç¯å¢ƒ</h2>
<p><strong>æ–°å»ºä¸€ä¸ªæ•°æ®åº“è¡¨ï¼šblog</strong><br>
å­—æ®µï¼šidï¼Œtitleï¼Œauthorï¼Œcreate_timeï¼Œviews</p>
<pre><code class="language-sql">CREATE TABLE `blog` (
`id` varchar(50) NOT NULL COMMENT 'åšå®¢id',
`title` varchar(100) NOT NULL COMMENT 'åšå®¢æ ‡é¢˜',
`author` varchar(30) NOT NULL COMMENT 'åšå®¢ä½œè€…',
`create_time` datetime NOT NULL COMMENT 'åˆ›å»ºæ—¶é—´',
`views` int(30) NOT NULL COMMENT 'æµè§ˆé‡'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
</code></pre>
<ol>
<li>
<p>åˆ›å»ºMybatisåŸºç¡€å·¥ç¨‹<br>
<img src="https://cdn.nlark.com/yuque/0/2021/png/22045814/1629355404544-0a21636f-5f2d-40af-9009-85c4e5b9ba8a.png#clientId=u35d2d825-d4a0-4&amp;from=paste&amp;height=161&amp;id=ue903d042&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=322&amp;originWidth=484&amp;originalType=binary&amp;ratio=1&amp;size=24006&amp;status=done&amp;style=none&amp;taskId=ud67e234e-d148-439e-82fe-b8534ea8774&amp;width=242" alt="image.png" loading="lazy"></p>
</li>
<li>
<p>IDutilå·¥å…·ç±»</p>
</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.utils;

import org.junit.Test;

import java.util.UUID;

/**
 * å¦‚æœæƒ³åœ¨étestç›®å½•ä¸‹æµ‹è¯•ï¼ŒæŠŠä¾èµ–çš„ä½œç”¨åŸŸæ”¹ä¸€ä¸‹æˆ–è€…å»æ‰
 * @author SolitudeAlma
 * @date 2021/8/19
 */
public class IDUtils {
    public static String getId() {
        return UUID.randomUUID().toString().replaceAll(&quot;-&quot;, &quot;&quot;);
    }
}
</code></pre>
<ol start="3">
<li>å®ä½“ç±»ç¼–å†™  ã€æ³¨æ„setæ–¹æ³•ä½œç”¨ã€‘</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.pojo;

import lombok.Data;

import java.util.Date;

/**
 * @author SolitudeAlma
 * @date 2021/8/19
 */
@Data
public class Blog {
    private String id;
    private String title;
    private String author;
    private Date createTime;
    private int views;
}
</code></pre>
<ol start="4">
<li>ç¼–å†™Mapperæ¥å£åŠxmlæ–‡ä»¶</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.dao;

/**
 * @author SolitudeAlma
 * @date 2021/8/19
 */
public interface BlogMapper {
}
</code></pre>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;mapper namespace=&quot;com.SolitudeAlma.dao.BlogMapper&quot;&gt;

&lt;/mapper&gt;
</code></pre>
<ol start="5">
<li>mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œä¸‹åˆ’çº¿é©¼å³°è‡ªåŠ¨è½¬æ¢</li>
</ol>
<pre><code class="language-xml">&lt;settings&gt;
  &lt;!--æ˜¯å¦å¼€å¯é©¼å³°å‘½åè‡ªåŠ¨æ˜ å°„ï¼Œå³ä»ç»å…¸æ•°æ®åº“åˆ—å A_COLUMN æ˜ å°„åˆ°ç»å…¸ Java å±æ€§å aColumnã€‚--&gt;
  &lt;setting name=&quot;logImpl&quot; value=&quot;STDOUT_LOGGING&quot;/&gt;
  &lt;setting name=&quot;mapUnderscoreToCamelCase&quot; value=&quot;true&quot;/&gt;
&lt;/settings&gt;
&lt;mappers&gt;
  &lt;mapper resource=&quot;com/SolitudeAlma/dao/BlogMapper.xml&quot;/&gt;
&lt;/mappers&gt;
</code></pre>
<ol start="6">
<li>æ’å…¥åˆå§‹æ•°æ®<br>
ç¼–å†™æ¥å£</li>
</ol>
<pre><code class="language-java">package com.SolitudeAlma.dao;

import com.SolitudeAlma.pojo.Blog;

/**
 * @author SolitudeAlma
 * @date 2021/8/19
 */
public interface BlogMapper {
    /**
     * æ·»åŠ ä¸€ç¯‡æ–‡ç« 
     * @param blog æ–‡ç« ç±»
     * @return SQLæ‰§è¡Œç»“æœï¼Œå½±å“äº†å‡ è¡Œ
     */
    int addArticle(Blog blog);
}
</code></pre>
<p>sqlé…ç½®æ–‡ä»¶</p>
<pre><code class="language-xml">&lt;insert id=&quot;addArticle&quot; parameterType=&quot;Blog&quot;&gt;
  insert into blog(`id`, `title`, `author`, `create_time`, `views`)
  values (#{id}, #{title}, #{author}, #{createTime}, #{views});
&lt;/insert&gt;
</code></pre>
<p>æµ‹è¯•</p>
<pre><code class="language-java">@Test
public void addArticleTest() throws ParseException {
    String strDateFormat = &quot;yyyy-MM-dd HH:mm:ss&quot;;
    SqlSession sqlSession = MybatisUtils.getSqlSession();
    BlogMapper mapper = sqlSession.getMapper(BlogMapper.class);
    SimpleDateFormat dateFormat = new SimpleDateFormat(strDateFormat);

    Blog blog = new Blog();
    blog.setId(IDUtils.getId());
    blog.setTitle(&quot;Mybatiså¦‚æ­¤ç®€å•&quot;);
    blog.setAuthor(&quot;SolitudeAlma&quot;);
    blog.setCreateTime(dateFormat.format(new Date()));
    blog.setViews(23333);
    int result = mapper.addArticle(blog);
    System.out.println(result);

    blog.setId(IDUtils.getId());
    blog.setTitle(&quot;Javaå¦‚æ­¤ç®€å•&quot;);
    blog.setCreateTime(dateFormat.format(new Date()));
    result = mapper.addArticle(blog);
    System.out.println(result);

    blog.setId(IDUtils.getId());
    blog.setTitle(&quot;å¾®æœåŠ¡å¦‚æ­¤ç®€å•&quot;);
    blog.setCreateTime(dateFormat.format(new Date()));
    result = mapper.addArticle(blog);
    System.out.println(result);

    blog.setId(IDUtils.getId());
    blog.setTitle(&quot;Springå¦‚æ­¤ç®€å•&quot;);
    blog.setCreateTime(dateFormat.format(new Date()));
    result = mapper.addArticle(blog);
    System.out.println(result);

    sqlSession.close();
}
</code></pre>
<p>åˆå§‹åŒ–æ•°æ®å®Œæ¯•ï¼</p>
<h2 id="123-if">12.3 IF</h2>
<p><strong>éœ€æ±‚ï¼šæ ¹æ®ä½œè€…åå­—å’Œåšå®¢åå­—æ¥æŸ¥è¯¢åšå®¢ï¼å¦‚æœä½œè€…åå­—ä¸ºç©ºï¼Œé‚£ä¹ˆåªæ ¹æ®åšå®¢åå­—æŸ¥è¯¢ï¼Œåä¹‹ï¼Œåˆ™æ ¹æ®ä½œè€…åæ¥æŸ¥è¯¢</strong></p>
<ol>
<li>ç¼–å†™æ¥å£ç±»</li>
</ol>
<pre><code class="language-java">/**
* æŸ¥è¯¢æ–‡ç« ä¿¡æ¯ï¼Œå¹¶æ ¹æ®ifè¯­å¥è¿›ä¸€æ­¥æŸ¥è¯¢
* @param map æŸ¥è¯¢æ¡ä»¶é›†åˆ
* @return List æ–‡ç« ä¿¡æ¯é›†åˆ
*/
List&lt;Blog&gt; queryArticleIf(Map&lt;String, Object&gt; map);
</code></pre>
<ol start="2">
<li>ç¼–å†™SQLè¯­å¥</li>
</ol>
<pre><code class="language-xml">&lt;!--
éœ€æ±‚1ï¼š
	   æ ¹æ®ä½œè€…åå­—å’Œåšå®¢åå­—æ¥æŸ¥è¯¢åšå®¢ï¼
		 å¦‚æœä½œè€…åå­—ä¸ºç©ºï¼Œé‚£ä¹ˆåªæ ¹æ®åšå®¢åå­—æŸ¥è¯¢ï¼Œåä¹‹ï¼Œåˆ™æ ¹æ®ä½œè€…åæ¥æŸ¥è¯¢
     select * from blog where title = #{title} and author = #{author}
--&gt;
&lt;select id=&quot;queryArticleIf&quot; parameterType=&quot;map&quot; resultType=&quot;Blog&quot;&gt;
  select * from blog where
  &lt;if test=&quot;title != null&quot;&gt;
    title = #{title}
  &lt;/if&gt;
  &lt;if test=&quot;author != null&quot;&gt;
    and author = #{author}
  &lt;/if&gt;
&lt;/select&gt;
</code></pre>
<ol start="3">
<li>æµ‹è¯•</li>
</ol>
<pre><code class="language-java">@Test
public void queryArticleIfTest() {
    SqlSession sqlSession = MybatisUtils.getSqlSession();
    BlogMapper mapper = sqlSession.getMapper(BlogMapper.class);
    Map&lt;String, Object&gt;map = new HashMap&lt;&gt;();
    //map.put(&quot;title&quot;, &quot;Mybatiså¦‚æ­¤ç®€å•&quot;);
    map.put(&quot;author&quot;, &quot;SolitudeAlma&quot;);
    List&lt;Blog&gt; blogs = mapper.queryArticleIf(map);
    for (Blog blog : blogs) {
        System.out.println(blog);
    }
    sqlSession.close();
}
</code></pre>
<p>è¿™æ ·å†™æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœ author ç­‰äº nullï¼Œé‚£ä¹ˆæŸ¥è¯¢è¯­å¥ä¸º select * from user where title=#{title},ä½†æ˜¯å¦‚æœtitleä¸ºç©ºå‘¢ï¼Ÿé‚£ä¹ˆæŸ¥è¯¢è¯­å¥ä¸º select * from user where and author=#{author}ï¼Œè¿™æ˜¯é”™è¯¯çš„ SQL è¯­å¥ï¼Œå¦‚ä½•è§£å†³å‘¢ï¼Ÿè¯·çœ‹ä¸‹é¢çš„ where è¯­å¥ï¼</p>
<h2 id="124-where">12.4 WHERE</h2>
<p>ä¿®æ”¹ä¸Šé¢çš„SQLè¯­å¥ï¼š</p>
<pre><code class="language-xml">&lt;!--
éœ€æ±‚1ï¼š
     æ ¹æ®ä½œè€…åå­—å’Œåšå®¢åå­—æ¥æŸ¥è¯¢åšå®¢ï¼
     å¦‚æœä½œè€…åå­—ä¸ºç©ºï¼Œé‚£ä¹ˆåªæ ¹æ®åšå®¢åå­—æŸ¥è¯¢ï¼Œåä¹‹ï¼Œåˆ™æ ¹æ®ä½œè€…åæ¥æŸ¥è¯¢
     select * from blog where title = #{title} and author = #{author}
--&gt;
&lt;select id=&quot;queryArticleIf&quot; parameterType=&quot;map&quot; resultType=&quot;Blog&quot;&gt;
  &lt;!--select * from blog where--&gt;
  &lt;!--&lt;if test=&quot;title != null&quot;&gt;--&gt;
  &lt;!--    title = #{title}--&gt;
  &lt;!--&lt;/if&gt;--&gt;
  &lt;!--&lt;if test=&quot;author != null&quot;&gt;--&gt;
  &lt;!--    and author = #{author}--&gt;
  &lt;!--&lt;/if&gt;--&gt;
  select * from blog
  &lt;where&gt;
    &lt;if test=&quot;title != null&quot;&gt;
      title = #{title}
    &lt;/if&gt;
    &lt;if test=&quot;author != null&quot;&gt;
      and author = #{author}
    &lt;/if&gt;
  &lt;/where&gt;
&lt;/select&gt;
</code></pre>
<p>è¿™ä¸ªâ€œwhereâ€æ ‡ç­¾ä¼šçŸ¥é“å¦‚æœå®ƒåŒ…å«çš„æ ‡ç­¾ä¸­æœ‰è¿”å›å€¼çš„è¯ï¼Œå®ƒå°±æ’å…¥ä¸€ä¸ªâ€˜whereâ€™ã€‚æ­¤å¤–ï¼Œå¦‚æœæ ‡ç­¾è¿”å›çš„å†…å®¹æ˜¯ä»¥AND æˆ–OR å¼€å¤´çš„ï¼Œåˆ™å®ƒä¼šå‰”é™¤æ‰ã€‚</p>
<h2 id="125-choose-when-otherwise">12.5 choose (when, otherwise)</h2>
<p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¸æƒ³ç”¨åˆ°æ‰€æœ‰çš„æŸ¥è¯¢æ¡ä»¶ï¼Œåªæƒ³é€‰æ‹©å…¶ä¸­çš„ä¸€ä¸ªï¼ŒæŸ¥è¯¢æ¡ä»¶æœ‰ä¸€ä¸ªæ»¡è¶³å³å¯ï¼Œä½¿ç”¨ choose æ ‡ç­¾å¯ä»¥è§£å†³æ­¤ç±»é—®é¢˜ï¼Œç±»ä¼¼äº Java çš„ switch è¯­å¥â€‹</p>
<ol>
<li>ç¼–å†™æ¥å£æ–¹æ³•</li>
</ol>
<pre><code class="language-java">/**
* æŸ¥è¯¢æ–‡ç« ä¿¡æ¯ï¼Œå¹¶æ ¹æ®chooseè¯­å¥è¿›ä¸€æ­¥æŸ¥è¯¢
* @param map æŸ¥è¯¢æ¡ä»¶é›†åˆ
* @return List æ–‡ç« ä¿¡æ¯é›†åˆ
*/
List&lt;Blog&gt; queryBlogChoose(Map&lt;String, Object&gt; map);
</code></pre>
<ol start="2">
<li>sqlé…ç½®æ–‡ä»¶</li>
</ol>
<pre><code class="language-xml">&lt;!--æ ¹æ®æœªæ‹¼æ¥çš„sqlå†³å®šæ˜¯å¦åµŒå¥—ä¸€ä¸ªwhereæ ‡ç­¾--&gt;
&lt;select id=&quot;queryBlogChoose&quot; parameterType=&quot;map&quot; resultType=&quot;Blog&quot;&gt;
  select * from blog
  &lt;where&gt;
    &lt;choose&gt;
      &lt;when test=&quot;title != null&quot;&gt;
        title = #{title}
      &lt;/when&gt;
      &lt;when test=&quot;author != null&quot;&gt;
        and author = #{author}
      &lt;/when&gt;
      &lt;otherwise&gt;
        and views = #{views}
      &lt;/otherwise&gt;
    &lt;/choose&gt;
  &lt;/where&gt;
&lt;/select&gt;
</code></pre>
<ol start="3">
<li>æµ‹è¯•ç±»</li>
</ol>
<pre><code class="language-java">@Test
public void queryBlogChooseTest() {
    SqlSession sqlSession = MybatisUtils.getSqlSession();
    BlogMapper mapper = sqlSession.getMapper(BlogMapper.class);
    Map&lt;String, Object&gt;map = new HashMap&lt;&gt;();
    map.put(&quot;views&quot;, &quot;23333&quot;);
    List&lt;Blog&gt; blogs = mapper.queryBlogChoose(map);
    for (Blog blog : blogs) {
        System.out.println(blog);
    }
    sqlSession.close();
}
</code></pre>
<h2 id="126-set">12.6 set</h2>
<p>åŒç†ï¼Œä¸Šé¢çš„å¯¹äºæŸ¥è¯¢ SQL è¯­å¥åŒ…å« where å…³é”®å­—ï¼Œå¦‚æœåœ¨è¿›è¡Œæ›´æ–°æ“ä½œçš„æ—¶å€™ï¼Œå«æœ‰ set å…³é”®è¯ï¼Œæˆ‘ä»¬æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ<br>
SETå…ƒç´ ä¼šåŠ¨æ€åœ°åœ¨è¡Œé¦–æ’å…¥ SET å…³é”®å­—ï¼Œå¹¶ä¼šåˆ æ‰é¢å¤–çš„é€—å·ï¼ˆè¿™äº›é€—å·æ˜¯åœ¨ä½¿ç”¨æ¡ä»¶è¯­å¥ç»™åˆ—èµ‹å€¼æ—¶å¼•å…¥çš„ï¼‰ã€‚</p>
<ol>
<li>ç¼–å†™æ¥å£æ–¹æ³•</li>
</ol>
<pre><code class="language-java">/**
* ä¿®æ”¹æ–‡ç« ä¿¡æ¯ï¼Œå¹¶æ ¹æ®trimè¯­å¥åŠ¨æ€ä¿®æ”¹
* @param map æŸ¥è¯¢æ¡ä»¶é›†åˆ
* @return SQLæ‰§è¡Œç»“æœï¼Œå½±å“äº†å‡ è¡Œ
*/
int updateArticle(Map&lt;String, Object&gt; map);
</code></pre>
<ol start="2">
<li>sqlé…ç½®æ–‡ä»¶</li>
</ol>
<pre><code class="language-xml">&lt;!--æ³¨æ„setæ˜¯ç”¨çš„é€—å·éš”å¼€--&gt;
&lt;update id=&quot;updateArticle&quot; parameterType=&quot;map&quot; &gt;
  update blog
  &lt;set&gt;
    &lt;if test=&quot;title != null&quot;&gt;
      title=#{title},
    &lt;/if&gt;
    &lt;if test=&quot;author != null&quot;&gt;
      author=#{author}
    &lt;/if&gt;
  &lt;/set&gt;
  where id =#{id}
&lt;/update&gt;
</code></pre>
<ol start="3">
<li>æµ‹è¯•</li>
</ol>
<pre><code class="language-java">@Test
public void updateArticleTest() {
    SqlSession sqlSession = MybatisUtils.getSqlSession();
    BlogMapper mapper = sqlSession.getMapper(BlogMapper.class);
    Map&lt;String, Object&gt;map = new HashMap&lt;&gt;();
    map.put(&quot;id&quot;, &quot;de27dc043af84946b008ff6ce3b866d1&quot;);
    map.put(&quot;title&quot;, &quot;Mybatiså¦‚æ­¤ç®€å•01&quot;);
    int i = mapper.updateArticle(map);
    System.out.println(i);
    sqlSession.close();
}
</code></pre>
<h2 id="127-trim-where-set">12.7 trim (where, set)</h2>
<pre><code class="language-xml">&lt;trim prefix=&quot;WHERE&quot; prefixOverrides=&quot;AND |OR &quot;&gt;
  ...
&lt;/trim&gt;
</code></pre>
<p><em>prefixOverrides</em> å±æ€§ä¼šå¿½ç•¥é€šè¿‡ç®¡é“ç¬¦åˆ†éš”çš„æ–‡æœ¬åºåˆ—ï¼ˆæ³¨æ„æ­¤ä¾‹ä¸­çš„ç©ºæ ¼æ˜¯å¿…è¦çš„ï¼‰ã€‚ä¸Šè¿°ä¾‹å­ä¼šç§»é™¤æ‰€æœ‰ <em>prefixOverrides</em> å±æ€§ä¸­æŒ‡å®šçš„å†…å®¹ï¼Œå¹¶ä¸”æ’å…¥ <em>prefix</em> å±æ€§ä¸­æŒ‡å®šçš„å†…å®¹ã€‚<br>
ç”¨äºåŠ¨æ€æ›´æ–°è¯­å¥çš„ç±»ä¼¼è§£å†³æ–¹æ¡ˆå«åš <em>set</em>ã€‚<em>set</em> å…ƒç´ å¯ä»¥ç”¨äºåŠ¨æ€åŒ…å«éœ€è¦æ›´æ–°çš„åˆ—ï¼Œå¿½ç•¥å…¶å®ƒä¸æ›´æ–°çš„åˆ—ã€‚æ¯”å¦‚ï¼š</p>
<pre><code class="language-xml">&lt;update id=&quot;updateAuthorIfNecessary&quot;&gt;
  update Author
    &lt;set&gt;
      &lt;if test=&quot;username != null&quot;&gt;username=#{username},&lt;/if&gt;
      &lt;if test=&quot;password != null&quot;&gt;password=#{password},&lt;/if&gt;
      &lt;if test=&quot;email != null&quot;&gt;email=#{email},&lt;/if&gt;
      &lt;if test=&quot;bio != null&quot;&gt;bio=#{bio}&lt;/if&gt;
    &lt;/set&gt;
  where id=#{id}
&lt;/update&gt;
</code></pre>
<p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<em>set</em> å…ƒç´ ä¼šåŠ¨æ€åœ°åœ¨è¡Œé¦–æ’å…¥ SET å…³é”®å­—ï¼Œå¹¶ä¼šåˆ æ‰é¢å¤–çš„é€—å·ï¼ˆè¿™äº›é€—å·æ˜¯åœ¨ä½¿ç”¨æ¡ä»¶è¯­å¥ç»™åˆ—èµ‹å€¼æ—¶å¼•å…¥çš„ï¼‰ã€‚<br>
æ¥çœ‹çœ‹ä¸ <em>set</em> å…ƒç´ ç­‰ä»·çš„è‡ªå®šä¹‰ <em>trim</em> å…ƒç´ å§ï¼š</p>
<pre><code class="language-xml">&lt;trim prefix=&quot;SET&quot; suffixOverrides=&quot;,&quot;&gt;
  ...
&lt;/trim&gt;
</code></pre>
<p>æ³¨æ„ï¼Œæˆ‘ä»¬è¦†ç›–äº†åç¼€å€¼è®¾ç½®ï¼Œå¹¶ä¸”è‡ªå®šä¹‰äº†å‰ç¼€å€¼ã€‚â€‹</p>
<p>è¿™éƒ¨åˆ†ç›¸å½“äºæ‰©å±•åŠŸèƒ½ï¼Œéœ€è¦çš„è‡ªå·±å®è·µï¼Œæ‰€ä»¥å°±ç›´æ¥æ¬æ–‡æ¡£äº†</p>
<h2 id="128-sqlç‰‡æ®µ">12.8 SQLç‰‡æ®µ</h2>
<p>æœ‰æ—¶å€™å¯èƒ½æŸä¸ª sql è¯­å¥æˆ‘ä»¬ç”¨çš„ç‰¹åˆ«å¤šï¼Œä¸ºäº†å¢åŠ ä»£ç çš„å¤ç”¨æ€§ï¼Œç®€åŒ–ä»£ç ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™äº›ä»£ç æŠ½å–å‡ºæ¥ï¼Œç„¶åä½¿ç”¨æ—¶ç›´æ¥è°ƒç”¨ã€‚</p>
<p><strong>æå–SQLç‰‡æ®µï¼š</strong></p>
<pre><code class="language-xml">&lt;sql id=&quot;if-title-author&quot;&gt;
  &lt;if test=&quot;title != null&quot;&gt;
    title = #{title}
  &lt;/if&gt;
  &lt;if test=&quot;author != null&quot;&gt;
    and author = #{author}
  &lt;/if&gt;
&lt;/sql&gt;
</code></pre>
<p><strong>å¼•ç”¨SQLç‰‡æ®µï¼š</strong></p>
<pre><code class="language-xml">&lt;select id=&quot;queryArticleIf&quot; parameterType=&quot;map&quot; resultType=&quot;Blog&quot;&gt;
  &lt;!--select * from blog where--&gt;
  &lt;!--&lt;if test=&quot;title != null&quot;&gt;--&gt;
  &lt;!--    title = #{title}--&gt;
  &lt;!--&lt;/if&gt;--&gt;
  &lt;!--&lt;if test=&quot;author != null&quot;&gt;--&gt;
  &lt;!--    and author = #{author}--&gt;
  &lt;!--&lt;/if&gt;--&gt;
  &lt;!--select * from blog--&gt;
  &lt;!--&lt;where&gt;--&gt;
  &lt;!--    &lt;if test=&quot;title != null&quot;&gt;--&gt;
  &lt;!--        title = #{title}--&gt;
  &lt;!--    &lt;/if&gt;--&gt;
  &lt;!--    &lt;if test=&quot;author != null&quot;&gt;--&gt;
  &lt;!--        and author = #{author}--&gt;
  &lt;!--    &lt;/if&gt;--&gt;
  &lt;!--&lt;/where&gt;--&gt;
  select * from blog
  &lt;where&gt;
    &lt;!-- å¼•ç”¨ sql ç‰‡æ®µï¼Œå¦‚æœrefid æŒ‡å®šçš„ä¸åœ¨æœ¬æ–‡ä»¶ä¸­ï¼Œé‚£ä¹ˆéœ€è¦åœ¨å‰é¢åŠ ä¸Š namespace --&gt;
    &lt;include refid=&quot;if-title-author&quot;/&gt;
    &lt;!-- åœ¨è¿™é‡Œè¿˜å¯ä»¥å¼•ç”¨å…¶ä»–çš„ sql ç‰‡æ®µ --&gt;
  &lt;/where&gt;
&lt;/select&gt;
</code></pre>
<p>æ³¨æ„ï¼š<br>
â‘ ã€æœ€å¥½åŸºäºå•è¡¨æ¥å®šä¹‰ sql ç‰‡æ®µï¼Œæé«˜ç‰‡æ®µçš„å¯å¤ç”¨æ€§<br>
â‘¡ã€åœ¨ sql ç‰‡æ®µä¸­ä¸è¦åŒ…æ‹¬ where</p>
<h2 id="129-foreach">12.9 foreach</h2>
<p>å°†æ•°æ®åº“ä¸­å‰ä¸‰ä¸ªæ•°æ®çš„idä¿®æ”¹ä¸º1,2,3ï¼›<br>
éœ€æ±‚ï¼šæˆ‘ä»¬éœ€è¦æŸ¥è¯¢ blog è¡¨ä¸­ id åˆ†åˆ«ä¸º1,2,3çš„åšå®¢ä¿¡æ¯</p>
<ol>
<li>ç¼–å†™æ¥å£</li>
</ol>
<pre><code class="language-java">/**
* æŸ¥è¯¢æ–‡ç« ä¿¡æ¯ï¼Œæ ¹æ®foreachè¯­å¥åŠ¨æ€æŸ¥è¯¢
* @param map æŸ¥è¯¢æ¡ä»¶é›†åˆ
* @return List æ–‡ç« ä¿¡æ¯é›†åˆ
*/
List&lt;Blog&gt; queryBlogForeach(Map&lt;String, Object&gt; map);
</code></pre>
<ol start="2">
<li>ç¼–å†™SQLè¯­å¥</li>
</ol>
<pre><code class="language-xml">&lt;select id=&quot;queryBlogForeach&quot; parameterType=&quot;map&quot; resultType=&quot;blog&quot;&gt;
  select * from blog
  &lt;where&gt;
    &lt;!--
       collection:æŒ‡å®šè¾“å…¥å¯¹è±¡ä¸­çš„é›†åˆå±æ€§
       item:æ¯æ¬¡éå†ç”Ÿæˆçš„å¯¹è±¡
       open:å¼€å§‹éå†æ—¶çš„æ‹¼æ¥å­—ç¬¦ä¸²
       close:ç»“æŸæ—¶æ‹¼æ¥çš„å­—ç¬¦ä¸²
       separator:éå†å¯¹è±¡ä¹‹é—´éœ€è¦æ‹¼æ¥çš„å­—ç¬¦ä¸²
       select * from blog where 1=1 and (id=1 or id=2 or id=3)
     --&gt;
    &lt;foreach collection=&quot;ids&quot;  item=&quot;id&quot; open=&quot;and (&quot; close=&quot;)&quot; separator=&quot;or&quot;&gt;
      id=#{id}
    &lt;/foreach&gt;
  &lt;/where&gt;
&lt;/select&gt;
</code></pre>
<ol start="3">
<li>æµ‹è¯•</li>
</ol>
<pre><code class="language-java">@Test
public void testQueryBlogForeachTest() {
    SqlSession session = MybatisUtils.getSqlSession();
    BlogMapper mapper = session.getMapper(BlogMapper.class);

    Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();
    List&lt;Integer&gt; ids = new ArrayList&lt;&gt;();
    ids.add(1);
    ids.add(2);
    ids.add(3);
    map.put(&quot;ids&quot;,ids);

    List&lt;Blog&gt; blogs = mapper.queryBlogForeach(map);

    System.out.println(blogs);

    session.close();
}
</code></pre>
<p>å°ç»“ï¼šå…¶å®åŠ¨æ€ sql è¯­å¥çš„ç¼–å†™å¾€å¾€å°±æ˜¯ä¸€ä¸ªæ‹¼æ¥çš„é—®é¢˜ï¼Œä¸ºäº†ä¿è¯æ‹¼æ¥å‡†ç¡®ï¼Œæˆ‘ä»¬æœ€å¥½é¦–å…ˆè¦å†™åŸç”Ÿçš„ sql è¯­å¥å‡ºæ¥ï¼Œç„¶ååœ¨é€šè¿‡ mybatis åŠ¨æ€sql å¯¹ç…§ç€æ”¹ï¼Œé˜²æ­¢å‡ºé”™ã€‚å¤šåœ¨å®è·µä¸­ä½¿ç”¨æ‰æ˜¯ç†Ÿç»ƒæŒæ¡å®ƒçš„æŠ€å·§ã€‚</p>
<h1 id="13-ç¼“å­˜">13. ç¼“å­˜</h1>
<h2 id="131-ç®€ä»‹">13.1 ç®€ä»‹</h2>
<p>1ã€ä»€ä¹ˆæ˜¯ç¼“å­˜ [ Cache ]ï¼Ÿ</p>
<ul>
<li>å­˜åœ¨å†…å­˜ä¸­çš„ä¸´æ—¶æ•°æ®ã€‚</li>
<li>å°†ç”¨æˆ·ç»å¸¸æŸ¥è¯¢çš„æ•°æ®æ”¾åœ¨ç¼“å­˜ï¼ˆå†…å­˜ï¼‰ä¸­ï¼Œç”¨æˆ·å»æŸ¥è¯¢æ•°æ®å°±ä¸ç”¨ä»ç£ç›˜ä¸Š(å…³ç³»å‹æ•°æ®åº“æ•°æ®æ–‡ä»¶)æŸ¥è¯¢ï¼Œä»ç¼“å­˜ä¸­æŸ¥è¯¢ï¼Œä»è€Œæé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œè§£å†³äº†é«˜å¹¶å‘ç³»ç»Ÿçš„æ€§èƒ½é—®é¢˜ã€‚</li>
</ul>
<p>2ã€ä¸ºä»€ä¹ˆä½¿ç”¨ç¼“å­˜ï¼Ÿ</p>
<ul>
<li>å‡å°‘å’Œæ•°æ®åº“çš„äº¤äº’æ¬¡æ•°ï¼Œå‡å°‘ç³»ç»Ÿå¼€é”€ï¼Œæé«˜ç³»ç»Ÿæ•ˆç‡ã€‚</li>
</ul>
<p>3ã€ä»€ä¹ˆæ ·çš„æ•°æ®èƒ½ä½¿ç”¨ç¼“å­˜ï¼Ÿ</p>
<ul>
<li>ç»å¸¸æŸ¥è¯¢å¹¶ä¸”ä¸ç»å¸¸æ”¹å˜çš„æ•°æ®ã€‚</li>
</ul>
<h2 id="132-mybatisç¼“å­˜">13.2 Mybatisç¼“å­˜</h2>
<ul>
<li>MyBatisåŒ…å«ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æŸ¥è¯¢ç¼“å­˜ç‰¹æ€§ï¼Œå®ƒå¯ä»¥éå¸¸æ–¹ä¾¿åœ°å®šåˆ¶å’Œé…ç½®ç¼“å­˜ã€‚ç¼“å­˜å¯ä»¥æå¤§çš„æå‡æŸ¥è¯¢æ•ˆç‡ã€‚</li>
<li>MyBatisç³»ç»Ÿä¸­é»˜è®¤å®šä¹‰äº†ä¸¤çº§ç¼“å­˜ï¼š<strong>ä¸€çº§ç¼“å­˜</strong>å’Œ<strong>äºŒçº§ç¼“å­˜</strong>
<ul>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰ä¸€çº§ç¼“å­˜å¼€å¯ã€‚ï¼ˆSqlSessionçº§åˆ«çš„ç¼“å­˜ï¼Œä¹Ÿç§°ä¸ºæœ¬åœ°ç¼“å­˜ï¼‰</li>
<li>äºŒçº§ç¼“å­˜éœ€è¦æ‰‹åŠ¨å¼€å¯å’Œé…ç½®ï¼Œä»–æ˜¯åŸºäºnamespaceçº§åˆ«çš„ç¼“å­˜ã€‚</li>
<li>ä¸ºäº†æé«˜æ‰©å±•æ€§ï¼ŒMyBatiså®šä¹‰äº†ç¼“å­˜æ¥å£Cacheã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å®ç°Cacheæ¥å£æ¥è‡ªå®šä¹‰äºŒçº§ç¼“å­˜</li>
</ul>
</li>
</ul>
<h2 id="133-ä¸€çº§ç¼“å­˜">13.3 ä¸€çº§ç¼“å­˜</h2>
<p>ä¸€çº§ç¼“å­˜ä¹Ÿå«æœ¬åœ°ç¼“å­˜ï¼š</p>
<ul>
<li>ä¸æ•°æ®åº“åŒä¸€æ¬¡ä¼šè¯æœŸé—´æŸ¥è¯¢åˆ°çš„æ•°æ®ä¼šæ”¾åœ¨æœ¬åœ°ç¼“å­˜ä¸­ã€‚</li>
<li>ä»¥åå¦‚æœéœ€è¦è·å–ç›¸åŒçš„æ•°æ®ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­æ‹¿ï¼Œæ²¡å¿…é¡»å†å»æŸ¥è¯¢æ•°æ®åº“ï¼›</li>
</ul>
<p>æµ‹è¯•ï¼š</p>
<ol>
<li>åœ¨mybatisä¸­åŠ å…¥æ—¥å¿—ï¼Œæ–¹ä¾¿æµ‹è¯•ç»“æœ</li>
<li>ç¼–å†™æ¥å£æ–¹æ³•</li>
</ol>
<pre><code class="language-java">/**
* æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯
* @param id ç”¨æˆ·å”¯ä¸€æ ‡è¯†
* @return User ç”¨æˆ·ä¿¡æ¯ç±»
*/
User getUserById(@Param(&quot;id&quot;) int id);
</code></pre>
<ol start="3">
<li>æ¥å£å¯¹åº”çš„Mapperæ–‡ä»¶</li>
</ol>
<pre><code class="language-xml">&lt;select id=&quot;getUserById&quot; resultType=&quot;User&quot;&gt;
  select * from user where id = #{id};
&lt;/select&gt;
</code></pre>
<ol start="4">
<li>æµ‹è¯•</li>
</ol>
<pre><code class="language-java">@Test
public void getUserByIdTest() {
    SqlSession sqlSession = MybatisUtils.getSqlSession();
    UserMapper mapper = sqlSession.getMapper(UserMapper.class);

    User user = mapper.getUserById(1);
    System.out.println(user);
    System.out.println(&quot;=========================&quot;);
    User user1 = mapper.getUserById(1);
    System.out.println(user1);
    System.out.println(user == user1);
    sqlSession.close();
}
</code></pre>
<ol start="5">
<li>ç»“æœåˆ†æ</li>
</ol>
<figure data-type="image" tabindex="7"><img src="https://cdn.nlark.com/yuque/0/2021/png/22045814/1629390217604-e805969f-d72d-4a23-996e-ab0aeded0f42.png#clientId=u10c19a42-5750-4&amp;from=paste&amp;height=198&amp;id=u2d32b383&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=396&amp;originWidth=897&amp;originalType=binary&amp;ratio=1&amp;size=63062&amp;status=done&amp;style=none&amp;taskId=u675414a1-0343-4edb-9810-f0517557bfd&amp;width=448.5" alt="image.png" loading="lazy"></figure>
<h2 id="134-ä¸€çº§ç¼“å­˜å¤±æ•ˆçš„å››ç§æƒ…å†µ">13.4 ä¸€çº§ç¼“å­˜å¤±æ•ˆçš„å››ç§æƒ…å†µ</h2>
<p>ä¸€çº§ç¼“å­˜æ˜¯SqlSessionçº§åˆ«çš„ç¼“å­˜ï¼Œæ˜¯ä¸€ç›´å¼€å¯çš„ï¼Œæˆ‘ä»¬å…³é—­ä¸äº†å®ƒï¼›<br>
ä¸€çº§ç¼“å­˜å¤±æ•ˆæƒ…å†µï¼šæ²¡æœ‰ä½¿ç”¨åˆ°å½“å‰çš„ä¸€çº§ç¼“å­˜ï¼Œæ•ˆæœå°±æ˜¯ï¼Œè¿˜éœ€è¦å†å‘æ•°æ®åº“ä¸­å‘èµ·ä¸€æ¬¡æŸ¥è¯¢è¯·æ±‚ï¼</p>
<ol>
<li>sqlSessionä¸åŒ</li>
</ol>
<pre><code class="language-java">@Test
public void getUserByIdTest01(){
    SqlSession sqlSession = MybatisUtils.getSqlSession();
    SqlSession sqlSession1 = MybatisUtils.getSqlSession();
    UserMapper mapper = sqlSession.getMapper(UserMapper.class);
    UserMapper mapper2 = sqlSession1.getMapper(UserMapper.class);

    User user = mapper.getUserById(1);
    System.out.println(user);
    User user2 = mapper2.getUserById(1);
    System.out.println(user2);
    System.out.println(user==user2);

    sqlSession.close();
    sqlSession1.close();
}
</code></pre>
<p>è§‚å¯Ÿç»“æœï¼šå‘ç°å‘é€äº†ä¸¤æ¡SQLè¯­å¥ï¼<br>
ç»“è®ºï¼š<strong>æ¯ä¸ªsqlSessionä¸­çš„ç¼“å­˜ç›¸äº’ç‹¬ç«‹</strong></p>
<ol start="2">
<li>sqlSessionç›¸åŒï¼ŒæŸ¥è¯¢æ¡ä»¶ä¸åŒ</li>
</ol>
<pre><code class="language-java">@Test
public void getUserByIdTest02(){
    SqlSession session = MybatisUtils.getSqlSession();
    UserMapper mapper = session.getMapper(UserMapper.class);
    UserMapper mapper1 = session.getMapper(UserMapper.class);

    User user = mapper.getUserById(1);
    System.out.println(user);
    User user2 = mapper1.getUserById(2);
    System.out.println(user2);
    System.out.println(user==user2);

    session.close();
}
</code></pre>
<p>è§‚å¯Ÿç»“æœï¼šå‘ç°å‘é€äº†ä¸¤æ¡SQLè¯­å¥ï¼å¾ˆæ­£å¸¸çš„ç†è§£<br>
ç»“è®ºï¼š<strong>å½“å‰ç¼“å­˜ä¸­ï¼Œä¸å­˜åœ¨è¿™ä¸ªæ•°æ®</strong></p>
<ol start="3">
<li>sqlSessionç›¸åŒï¼Œä¸¤æ¬¡æŸ¥è¯¢ä¹‹é—´æ‰§è¡Œäº†å¢åˆ æ”¹æ“ä½œï¼<br>
å¢åŠ æ–¹æ³•</li>
</ol>
<pre><code class="language-java">/**
* ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯
* @param map æ¡ä»¶ä»¥åŠä¿®æ”¹ä¿¡æ¯çš„é›†åˆ
* @return SQLæ‰§è¡Œçš„ç»“æœï¼Œå½±å“äº†å‡ è¡Œ
*/
int updateUser(Map&lt;String, Object&gt; map);
</code></pre>
<p>ç¼–å†™SQL</p>
<pre><code class="language-sql">&lt;update id=&quot;updateUser&quot; parameterType=&quot;map&quot;&gt;
	  update user set name = #{name}, pwd = #{pwd} where id = #{id}
&lt;/update&gt;
</code></pre>
<p>æµ‹è¯•</p>
<pre><code class="language-java">@Test
public void updateUserTest() {
    SqlSession session = MybatisUtils.getSqlSession();
    UserMapper mapper = session.getMapper(UserMapper.class);

    User user = mapper.getUserById(1);
    System.out.println(user);

    Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();
    map.put(&quot;name&quot;,&quot;SolitudeAlma&quot;);
    map.put(&quot;id&quot;,4);
    mapper.updateUser(map);

    User user2 = mapper.getUserById(1);
    System.out.println(user2);

    System.out.println(user==user2);

    session.close();
}
</code></pre>
<p>è§‚å¯Ÿç»“æœï¼šæŸ¥è¯¢åœ¨ä¸­é—´æ‰§è¡Œäº†å¢åˆ æ”¹æ“ä½œåï¼Œé‡æ–°æ‰§è¡Œäº†<br>
ç»“è®ºï¼š<strong>å› ä¸ºå¢åˆ æ”¹æ“ä½œå¯èƒ½ä¼šå¯¹å½“å‰æ•°æ®äº§ç”Ÿå½±å“</strong></p>
<ol start="4">
<li>sqlSessionç›¸åŒï¼Œæ‰‹åŠ¨æ¸…é™¤ä¸€çº§ç¼“å­˜</li>
</ol>
<pre><code class="language-java">@Test
public void getUserById03(){
    SqlSession session = MybatisUtils.getSqlSession();
    UserMapper mapper = session.getMapper(UserMapper.class);
    User user = mapper.getUserById(1);
    System.out.println(user);

    session.clearCache();//æ‰‹åŠ¨æ¸…é™¤ç¼“å­˜

    User user2 = mapper.getUserById(1);
    System.out.println(user2);

    System.out.println(user==user2);

    session.close();
}
</code></pre>
<p>ä¸€çº§ç¼“å­˜å°±æ˜¯ä¸€ä¸ªmap</p>
<h2 id="135-äºŒçº§ç¼“å­˜">13.5 äºŒçº§ç¼“å­˜</h2>
<ul>
<li>äºŒçº§ç¼“å­˜ä¹Ÿå«å…¨å±€ç¼“å­˜ï¼Œä¸€çº§ç¼“å­˜ä½œç”¨åŸŸå¤ªä½äº†ï¼Œæ‰€ä»¥è¯ç”Ÿäº†äºŒçº§ç¼“å­˜</li>
<li>åŸºäºnamespaceçº§åˆ«çš„ç¼“å­˜ï¼Œä¸€ä¸ªåç§°ç©ºé—´ï¼Œå¯¹åº”ä¸€ä¸ªäºŒçº§ç¼“å­˜ï¼›</li>
<li>å·¥ä½œæœºåˆ¶
<ul>
<li>ä¸€ä¸ªä¼šè¯æŸ¥è¯¢ä¸€æ¡æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®å°±ä¼šè¢«æ”¾åœ¨å½“å‰ä¼šè¯çš„ä¸€çº§ç¼“å­˜ä¸­ï¼›</li>
<li>å¦‚æœå½“å‰ä¼šè¯å…³é—­äº†ï¼Œè¿™ä¸ªä¼šè¯å¯¹åº”çš„ä¸€çº§ç¼“å­˜å°±æ²¡äº†ï¼›ä½†æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ˜¯ï¼Œä¼šè¯å…³é—­äº†ï¼Œä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®è¢«ä¿å­˜åˆ°äºŒçº§ç¼“å­˜ä¸­ï¼›</li>
<li>æ–°çš„ä¼šè¯æŸ¥è¯¢ä¿¡æ¯ï¼Œå°±å¯ä»¥ä»äºŒçº§ç¼“å­˜ä¸­è·å–å†…å®¹ï¼›</li>
<li>ä¸åŒçš„mapperæŸ¥å‡ºçš„æ•°æ®ä¼šæ”¾åœ¨è‡ªå·±å¯¹åº”çš„ç¼“å­˜ï¼ˆmapï¼‰ä¸­ï¼›</li>
</ul>
</li>
</ul>
<h3 id="1351-ä½¿ç”¨æ­¥éª¤">13.5.1 ä½¿ç”¨æ­¥éª¤</h3>
<ol>
<li>å¼€å¯å…¨å±€ç¼“å­˜ ã€mybatis-config.xmlã€‘</li>
</ol>
<pre><code class="language-xml">&lt;!--å¼€å¯å…¨å±€ç¼“å­˜--&gt;
&lt;setting name=&quot;cacheEnabled&quot; value=&quot;true&quot;/&gt;
</code></pre>
<ol start="2">
<li>å»æ¯ä¸ªmapper.xmlä¸­é…ç½®ä½¿ç”¨äºŒçº§ç¼“å­˜ï¼Œè¿™ä¸ªé…ç½®éå¸¸ç®€å•ï¼›ã€xxxMapper.xmlã€‘</li>
</ol>
<pre><code class="language-xml">&lt;cache/&gt; ç›´æ¥ä½¿ç”¨è¿™ä¸ªéœ€è¦åºåˆ—åŒ–ç±»ï¼ˆorg.apache.ibatis.cache.CacheException: Error serializing object.  Cause: java.io.NotSerializableException: com.SolitudeAlma.pojo.Userï¼‰ï¼Œå®ç°Serializableæ¥å£
æˆ–
å®˜æ–¹ç¤ºä¾‹=====&gt;æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£
&lt;cache
 eviction=&quot;FIFO&quot;
 flushInterval=&quot;60000&quot;
 size=&quot;512&quot;
 readOnly=&quot;true&quot;/&gt;
è¿™ä¸ªæ›´é«˜çº§çš„é…ç½®åˆ›å»ºäº†ä¸€ä¸ª FIFO ç¼“å­˜ï¼Œæ¯éš” 60 ç§’åˆ·æ–°ï¼Œæœ€å¤šå¯ä»¥å­˜å‚¨ç»“æœå¯¹è±¡æˆ–åˆ—è¡¨çš„ 512 ä¸ªå¼•ç”¨ï¼Œè€Œä¸”è¿”å›çš„å¯¹è±¡è¢«è®¤ä¸ºæ˜¯åªè¯»çš„ï¼Œå› æ­¤å¯¹å®ƒä»¬è¿›è¡Œä¿®æ”¹å¯èƒ½ä¼šåœ¨ä¸åŒçº¿ç¨‹ä¸­çš„è°ƒç”¨è€…äº§ç”Ÿå†²çªã€‚
</code></pre>
<ol start="3">
<li>ä»£ç æµ‹è¯•</li>
</ol>
<ul>
<li>æ‰€æœ‰çš„å®ä½“ç±»å…ˆå®ç°åºåˆ—åŒ–æ¥å£</li>
<li>æµ‹è¯•ä»£ç </li>
</ul>
<pre><code class="language-java">@Test
public void testQueryUserById(){
   SqlSession session = MybatisUtils.getSession();
   SqlSession session2 = MybatisUtils.getSession();

   UserMapper mapper = session.getMapper(UserMapper.class);
   UserMapper mapper2 = session2.getMapper(UserMapper.class);

   User user = mapper.queryUserById(1);
   System.out.println(user);
   session.close();

   User user2 = mapper2.queryUserById(1);
   System.out.println(user2);
   System.out.println(user==user2);

   session2.close();
}
</code></pre>
<h3 id="1352-ç»“è®º">13.5.2 ç»“è®º</h3>
<ul>
<li>åªè¦å¼€å¯äº†äºŒçº§ç¼“å­˜ï¼Œæˆ‘ä»¬åœ¨åŒä¸€ä¸ªMapperä¸­çš„æŸ¥è¯¢ï¼Œå¯ä»¥åœ¨äºŒçº§ç¼“å­˜ä¸­æ‹¿åˆ°æ•°æ®</li>
<li>æŸ¥å‡ºçš„æ•°æ®éƒ½ä¼šè¢«é»˜è®¤å…ˆæ”¾åœ¨ä¸€çº§ç¼“å­˜ä¸­</li>
<li>åªæœ‰ä¼šè¯æäº¤æˆ–è€…å…³é—­ä»¥åï¼Œä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®æ‰ä¼šè½¬åˆ°äºŒçº§ç¼“å­˜ä¸­</li>
<li><strong>åªæœ‰æäº¤äº‹åŠ¡åæ‰ä¼šå†™å…¥äºŒçº§ç¼“å­˜</strong></li>
</ul>
<h2 id="136-ç¼“å­˜åŸç†å›¾">13.6 ç¼“å­˜åŸç†å›¾</h2>
<figure data-type="image" tabindex="8"><img src="https://cdn.nlark.com/yuque/0/2021/png/22045814/1629430658041-0e543258-e81f-4ce6-b4a3-57ed5290ff19.png#clientId=ubc6f61bf-340b-4&amp;from=paste&amp;height=539&amp;id=u62f54e33&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=805&amp;originWidth=1099&amp;originalType=binary&amp;ratio=1&amp;size=589029&amp;status=done&amp;style=none&amp;taskId=u505ee197-dd0a-4c75-ba0b-c2ef3a911f8&amp;width=736.5" alt="image.png" loading="lazy"></figure>
<h2 id="137-è‡ªå®šä¹‰ç¼“å­˜-ehcache">13.7 è‡ªå®šä¹‰ç¼“å­˜-ehcache</h2>
<figure data-type="image" tabindex="9"><img src="https://cdn.nlark.com/yuque/0/2021/png/22045814/1629430893346-29abded6-b62a-4fad-8b8e-04dcf49d2587.png#clientId=ubc6f61bf-340b-4&amp;from=paste&amp;height=102&amp;id=ub19b7622&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=203&amp;originWidth=1475&amp;originalType=binary&amp;ratio=1&amp;size=69519&amp;status=done&amp;style=none&amp;taskId=ucee1adaa-c1a5-497b-a43e-6a5f5c46c28&amp;width=737.5" alt="image.png" loading="lazy"></figure>
<p>ç¬¬ä¸‰æ–¹ç¼“å­˜å®ç°--EhCache: æŸ¥çœ‹ç™¾åº¦ç™¾ç§‘<br>
Ehcacheæ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„javaåˆ†å¸ƒå¼ç¼“å­˜ï¼Œç”¨äºé€šç”¨ç¼“å­˜ï¼›<br>
è¦åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨Ehcacheï¼Œéœ€è¦å¼•å…¥ä¾èµ–çš„jaråŒ…</p>
<pre><code class="language-xml">&lt;!-- https://mvnrepository.com/artifact/org.mybatis.caches/mybatis-ehcache --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.mybatis.caches&lt;/groupId&gt;
    &lt;artifactId&gt;mybatis-ehcache&lt;/artifactId&gt;
    &lt;version&gt;1.2.1&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p>åœ¨mapper.xmlä¸­ä½¿ç”¨å¯¹åº”çš„ç¼“å­˜å³å¯</p>
<pre><code class="language-xml">&lt;!--è‡ªå®šä¹‰ç¼“å­˜--&gt;
&lt;cache type=&quot;org.mybatis.caches.ehcache.EhcacheCache&quot;/&gt;
</code></pre>
<p>ç¼–å†™ehcache.xmlæ–‡ä»¶ï¼Œå¦‚æœåœ¨åŠ è½½æ—¶æœªæ‰¾åˆ°/ehcache.xmlèµ„æºæˆ–å‡ºç°é—®é¢˜ï¼Œåˆ™å°†ä½¿ç”¨é»˜è®¤é…ç½®ã€‚</p>
<pre><code class="language-xml">&lt;!--sxiå¤„çˆ†çº¢å°±ç‚¹fetch external resource æˆ–è€…å»è®¾ç½®language and frameworké‡Œæ·»åŠ igonredåŒºåŸŸçš„uri æˆ–è€…æœç´¢[Resource registered by this uri is not recognized (Settings | Languages &amp; Frameworks | Schemas and DTDs)]--&gt;
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;ehcache xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
        xsi:noNamespaceSchemaLocation=&quot;http://ehcache.org/ehcache.xsd&quot;
        updateCheck=&quot;false&quot;&gt;
   &lt;!--
      diskStoreï¼šä¸ºç¼“å­˜è·¯å¾„ï¼Œehcacheåˆ†ä¸ºå†…å­˜å’Œç£ç›˜ä¸¤çº§ï¼Œæ­¤å±æ€§å®šä¹‰ç£ç›˜çš„ç¼“å­˜ä½ç½®ã€‚å‚æ•°è§£é‡Šå¦‚ä¸‹ï¼š
      user.home â€“ ç”¨æˆ·ä¸»ç›®å½•
      user.dir â€“ ç”¨æˆ·å½“å‰å·¥ä½œç›®å½•
      java.io.tmpdir â€“ é»˜è®¤ä¸´æ—¶æ–‡ä»¶è·¯å¾„
    --&gt;
   &lt;diskStore path=&quot;./tmpdir/Tmp_EhCache&quot;/&gt;
   
   &lt;defaultCache
           eternal=&quot;false&quot;
           maxElementsInMemory=&quot;10000&quot;
           overflowToDisk=&quot;false&quot;
           diskPersistent=&quot;false&quot;
           timeToIdleSeconds=&quot;1800&quot;
           timeToLiveSeconds=&quot;259200&quot;
           memoryStoreEvictionPolicy=&quot;LRU&quot;/&gt;

   &lt;cache
           name=&quot;cloud_user&quot;
           eternal=&quot;false&quot;
           maxElementsInMemory=&quot;5000&quot;
           overflowToDisk=&quot;false&quot;
           diskPersistent=&quot;false&quot;
           timeToIdleSeconds=&quot;1800&quot;
           timeToLiveSeconds=&quot;1800&quot;
           memoryStoreEvictionPolicy=&quot;LRU&quot;/&gt;
   &lt;!--
      defaultCacheï¼šé»˜è®¤ç¼“å­˜ç­–ç•¥ï¼Œå½“ehcacheæ‰¾ä¸åˆ°å®šä¹‰çš„ç¼“å­˜æ—¶ï¼Œåˆ™ä½¿ç”¨è¿™ä¸ªç¼“å­˜ç­–ç•¥ã€‚åªèƒ½å®šä¹‰ä¸€ä¸ªã€‚
    --&gt;
   &lt;!--
     name:ç¼“å­˜åç§°ã€‚
     maxElementsInMemory:ç¼“å­˜æœ€å¤§æ•°ç›®
     maxElementsOnDiskï¼šç¡¬ç›˜æœ€å¤§ç¼“å­˜ä¸ªæ•°ã€‚
     eternal:å¯¹è±¡æ˜¯å¦æ°¸ä¹…æœ‰æ•ˆï¼Œä¸€ä½†è®¾ç½®äº†ï¼Œtimeoutå°†ä¸èµ·ä½œç”¨ã€‚
     overflowToDisk:æ˜¯å¦ä¿å­˜åˆ°ç£ç›˜ï¼Œå½“ç³»ç»Ÿå®•æœºæ—¶
     timeToIdleSeconds:è®¾ç½®å¯¹è±¡åœ¨å¤±æ•ˆå‰çš„å…è®¸é—²ç½®æ—¶é—´ï¼ˆå•ä½ï¼šç§’ï¼‰ã€‚ä»…å½“eternal=falseå¯¹è±¡ä¸æ˜¯æ°¸ä¹…æœ‰æ•ˆæ—¶ä½¿ç”¨ï¼Œå¯é€‰å±æ€§ï¼Œé»˜è®¤å€¼æ˜¯0ï¼Œä¹Ÿå°±æ˜¯å¯é—²ç½®æ—¶é—´æ— ç©·å¤§ã€‚
     timeToLiveSeconds:è®¾ç½®å¯¹è±¡åœ¨å¤±æ•ˆå‰å…è®¸å­˜æ´»æ—¶é—´ï¼ˆå•ä½ï¼šç§’ï¼‰ã€‚æœ€å¤§æ—¶é—´ä»‹äºåˆ›å»ºæ—¶é—´å’Œå¤±æ•ˆæ—¶é—´ä¹‹é—´ã€‚ä»…å½“eternal=falseå¯¹è±¡ä¸æ˜¯æ°¸ä¹…æœ‰æ•ˆæ—¶ä½¿ç”¨ï¼Œé»˜è®¤æ˜¯0.ï¼Œä¹Ÿå°±æ˜¯å¯¹è±¡å­˜æ´»æ—¶é—´æ— ç©·å¤§ã€‚
     diskPersistentï¼šæ˜¯å¦ç¼“å­˜è™šæ‹Ÿæœºé‡å¯æœŸæ•°æ® Whether the disk store persists between restarts of the Virtual Machine. The default value is false.
     diskSpoolBufferSizeMBï¼šè¿™ä¸ªå‚æ•°è®¾ç½®DiskStoreï¼ˆç£ç›˜ç¼“å­˜ï¼‰çš„ç¼“å­˜åŒºå¤§å°ã€‚é»˜è®¤æ˜¯30MBã€‚æ¯ä¸ªCacheéƒ½åº”è¯¥æœ‰è‡ªå·±çš„ä¸€ä¸ªç¼“å†²åŒºã€‚
     diskExpiryThreadIntervalSecondsï¼šç£ç›˜å¤±æ•ˆçº¿ç¨‹è¿è¡Œæ—¶é—´é—´éš”ï¼Œé»˜è®¤æ˜¯120ç§’ã€‚
     memoryStoreEvictionPolicyï¼šå½“è¾¾åˆ°maxElementsInMemoryé™åˆ¶æ—¶ï¼ŒEhcacheå°†ä¼šæ ¹æ®æŒ‡å®šçš„ç­–ç•¥å»æ¸…ç†å†…å­˜ã€‚é»˜è®¤ç­–ç•¥æ˜¯LRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰ã€‚ä½ å¯ä»¥è®¾ç½®ä¸ºFIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰æˆ–æ˜¯LFUï¼ˆè¾ƒå°‘ä½¿ç”¨ï¼‰ã€‚
     clearOnFlushï¼šå†…å­˜æ•°é‡æœ€å¤§æ—¶æ˜¯å¦æ¸…é™¤ã€‚
     memoryStoreEvictionPolicy:å¯é€‰ç­–ç•¥æœ‰ï¼šLRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼Œé»˜è®¤ç­–ç•¥ï¼‰ã€FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰ã€LFUï¼ˆæœ€å°‘è®¿é—®æ¬¡æ•°ï¼‰ã€‚
     FIFOï¼Œfirst in first outï¼Œè¿™ä¸ªæ˜¯å¤§å®¶æœ€ç†Ÿçš„ï¼Œå…ˆè¿›å…ˆå‡ºã€‚
     LFUï¼Œ Less Frequently Usedï¼Œå°±æ˜¯ä¸Šé¢ä¾‹å­ä¸­ä½¿ç”¨çš„ç­–ç•¥ï¼Œç›´ç™½ä¸€ç‚¹å°±æ˜¯è®²ä¸€ç›´ä»¥æ¥æœ€å°‘è¢«ä½¿ç”¨çš„ã€‚å¦‚ä¸Šé¢æ‰€è®²ï¼Œç¼“å­˜çš„å…ƒç´ æœ‰ä¸€ä¸ªhitå±æ€§ï¼Œhitå€¼æœ€å°çš„å°†ä¼šè¢«æ¸…å‡ºç¼“å­˜ã€‚
     LRUï¼ŒLeast Recently Usedï¼Œæœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ï¼Œç¼“å­˜çš„å…ƒç´ æœ‰ä¸€ä¸ªæ—¶é—´æˆ³ï¼Œå½“ç¼“å­˜å®¹é‡æ»¡äº†ï¼Œè€Œåˆéœ€è¦è…¾å‡ºåœ°æ–¹æ¥ç¼“å­˜æ–°çš„å…ƒç´ çš„æ—¶å€™ï¼Œé‚£ä¹ˆç°æœ‰ç¼“å­˜å…ƒç´ ä¸­æ—¶é—´æˆ³ç¦»å½“å‰æ—¶é—´æœ€è¿œçš„å…ƒç´ å°†è¢«æ¸…å‡ºç¼“å­˜ã€‚
  --&gt;

&lt;/ehcache&gt;
</code></pre>
<p>è¿è¡Œåä¼šçˆ†çº¢</p>
<blockquote>
<p><a href="https://blog.csdn.net/qq_42262803/article/details/86485140">https://blog.csdn.net/qq_42262803/article/details/86485140</a><br>
<a href="https://blog.csdn.net/theonegis/article/details/45873331">https://blog.csdn.net/theonegis/article/details/45873331</a><br>
<a href="https://blog.csdn.net/langtian08/article/details/82015017">https://blog.csdn.net/langtian08/article/details/82015017</a></p>
</blockquote>
<p>åˆç†çš„ä½¿ç”¨ç¼“å­˜ï¼Œå¯ä»¥è®©æˆ‘ä»¬ç¨‹åºçš„æ€§èƒ½å¤§å¤§æå‡ï¼</p>
<blockquote>
<p><a href="https://gitee.com/solitudealma/java-study-note">é™„å±ä»£ç </a><br>
<a href="https://www.bilibili.com/read/cv5702420">æ‰€æœ‰èµ„æºæ¥æºäºç‹‚ç¥è¯´çš„Bç«™æŠ•ç¨¿è§†é¢‘</a></p>
</blockquote>

                                </div>
                            </div>
                            
                                <div class="reward ">
                                    <div class="reward-button ">&yen;
                                        <span class="reward-code "> 
                                            <span class="alipay-code "> <img class="alipay-img "  alt = "support " src="https://img.imgdb.cn/item/602e6284343ca1fbf903142d.jpg"><b>Alipay</b>                                                            </span>
                                        <span class="wechat-code "> <img alt ="support " class="wechat-img " src="https://img.imgdb.cn/item/602e5d8d343ca1fbf900a926.jpg"><b>Wechat</b> </span> </span>
                                    </div>
                                </div>
                                
                        </div>
                        <div class="post-footer">
                            <div class="post-copyright">
                                ä½œè€…:
                                SolitudeAlma<br>æ°¸ä¹…é“¾æ¥:
                                    <a href="https://solitudealma.github.io/post/qYIUMWbyl/" title="Javaå­¦ä¹ ç¬”è®°ä¹‹Mybatis">
                                        https://solitudealma.github.io/post/qYIUMWbyl/
                                    </a><br> åè®®: MIT License
                            </div>
                        </div>
                    </article>
                </div>
                <style>
                    .prev:hover {
                        color: #2d96bd;
                        text-decoration: none;
                        text-align: center;
                        transition: color 0.2s ease, border-color 0.2s ease, background 0.2s ease, opacity 0.2s ease;
                    }
                    
                    .next:hover {
                        color: #2d96bd;
                        text-decoration: none;
                        text-align: center;
                        transition: color 0.2s ease, border-color 0.2s ease, background 0.2s ease, opacity 0.2s ease;
                    }
                </style>
                <div class="lite-item nearby-article">
                    
                            
                                <div class="nearby-article-right" style="padding: 10px;">
                                    <a class="next" rel="next" href="https://solitudealma.github.io/post/liiMnTBGw/">
                                        Javaå­¦ä¹ ç¬”è®°ä¹‹HTML5<i class="fa fa-chevron-right"></i>
                                    </a>
                                </div>
                                
                </div>
                <!--Share-->
                <span style="margin-right:15px">
    <i class="post-share"></i>
    <span>&#x5206;&#x4EAB;:</span>
                <a title="QR ç " target="_blank" href="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://solitudealma.github.io/post/qYIUMWbyl/"><i class="fa fa-qrcode"></i></a>
                <a title="QQ" target="_blank" href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://solitudealma.github.io/post/qYIUMWbyl/&sharesource=qzone&title=Javaå­¦ä¹ ç¬”è®°ä¹‹Mybatis&pics=https://solitudealma.github.io/images/avatar.png?v=1630301105350&summary="><i class="fa fa-qq"></i></a>
                <a title="æ–°æµªå¾®åš" target="_blank" href="https://service.weibo.com/share/share.php?url=https://solitudealma.github.io/post/qYIUMWbyl/&sharesource=weibo&title=Javaå­¦ä¹ ç¬”è®°ä¹‹Mybatis + " - " + &pic="https://solitudealma.github.io/images/avatar.png?v=1630301105350"><i class="fa fa-weibo "></i></a>
                </span>
                
                                            
                                                <script type="application/javascript" src="//unpkg.com/valine@latest/dist/Valine.min.js"></script>
<div id="vlaine-comment"></div>
<script type="application/javascript">
    new Valine({
        el: '#vlaine-comment',
        appId: 'CtvJjEF5dpKjM6LcNBxkvvGX-gzGzoHsz',
        appKey: 'k0U3m8TLtYax8UPcxq41eHw2',
        pageSize: 10,
        avatar: 'mp',
        placeholder: 'æ¥éƒ½æ¥äº†ï¼Œä¸å¦¨è¯„è®ºä¸€ä¸‹',
        visitor: true,
        highlight: true,
        recordIP: true,
    })
</script>
                                                    
            </div>
            <div id="sidebar">
    <ul>
        
            <li class="lite-item">
                <header class="lite-item-header">
                    <h3 class="lite-item-title"><i class="Card Card-hitokoto"></i>&nbsp;&#x4E00;&#x8A00;</h3>
                </header>
                <div class="textwidget">
                    <p>
                        <b id="hitokoto"></b>
                    </p>
                </div>
            </li>
            
                <!--
                <li class="lite-item">
                    <header class="lite-item-header">
                        <h3 class="lite-item-title"><i class="Card Card-tags">&#x6807;&#x7B7E;</i></h3>
                    </header>
                    <div class="textwidget">
                        
                            <a href="" class="tag-cloud-link " style="font-size: 12px;margin: 5px; padding: 2px;">
                                <i class="fa fa-tags" aria-hidden="true"></i>
                            </a>
                            
                    </div>
                </li>-->
                <li class="lite-item">
                    <header class="lite-item-header">
                        <h3 class="lite-item-title"><i class="Card Card-tags">&#x6807;&#x7B7E;</i></h3>
                    </header>
                    <div class="textwidget">
                        <div id='tags' style="height: auto;width: 360;"></div>
                        <script src="https://solitudealma.github.io/media/js/svg3dtagcloud.min.js"></script>
                        <script>
                            $(document).ready(function() {
                                var entries = ([
                                    
                                     {
                                        label: 'ğŸ·Java',
                                        url: 'https://solitudealma.github.io/tag/java/',
                                        target: '_button'
                                    },
                                    
                                    
                                     {
                                        label: 'ğŸ·Nodejs',
                                        url: 'https://solitudealma.github.io/tag/Nodejs/',
                                        target: '_button'
                                    },
                                    
                                    
                                     {
                                        label: 'ğŸ·æ¬§æ‹‰è®¡åˆ’',
                                        url: 'https://solitudealma.github.io/tag/ProjectEuler/',
                                        target: '_button'
                                    },
                                    
                                    
                                     {
                                        label: 'ğŸ·é¢˜è§£',
                                        url: 'https://solitudealma.github.io/tag/answer/',
                                        target: '_button'
                                    },
                                    
                                    
                                     {
                                        label: 'ğŸ·Diary',
                                        url: 'https://solitudealma.github.io/tag/diary/',
                                        target: '_button'
                                    },
                                    
                                    
                                     {
                                        label: 'ğŸ·Algorithm',
                                        url: 'https://solitudealma.github.io/tag/algorithm/',
                                        target: '_button'
                                    }
                                    
                                    
                                ]);
                                var settings = {
                                    entries: entries, //æ•°æ®
                                    width: 300, //å®½åº¦
                                    height: 300, //é«˜åº¦
                                    radius: '50%',
                                    radiusMin: 50,
                                    bgDraw: false, //æ˜¯å¦æ˜¾ç¤ºèƒŒæ™¯
                                    bgColor: '#fff', //èƒŒæ™¯é¢œè‰²
                                    opacityOver: 1.00,
                                    opacityOut: 0.05,
                                    opacitySpeed: 6,
                                    fov: 360,
                                    speed: 0.3, //æ—‹è½¬çš„é€Ÿåº¦
                                    fontFamily: 'Oswald, Arial, sans-serif',
                                    fontSize: '18', //é»˜è®¤å­—ä½“å¤§å°
                                    fontColor: '#666', //é»˜è®¤å­—ä½“é¢œè‰²
                                    fontWeight: 'normal', //bold
                                    fontStyle: 'normal', //italic 
                                    fontStretch: 'normal', //wider, narrower, ultra-condensed, extra-condensed, condensed, semi-condensed, semi-expanded, expanded, extra-expanded, ultra-expanded
                                    fontToUpperCase: true,
                                    tooltipFontFamily: 'Oswald, Arial, sans-serif',
                                    tooltipFontSize: '16',
                                    tooltipFontColor: 'red',
                                    tooltipFontWeight: 'normal', //bold
                                    tooltipFontStyle: 'normal', //italic 
                                    tooltipFontStretch: 'normal', //wider, narrower, ultra-condensed, extra-condensed, condensed, semi-condensed, semi-expanded, expanded, extra-expanded, ultra-expanded
                                    tooltipFontToUpperCase: false,
                                    tooltipTextAnchor: 'left',
                                    tooltipDiffX: 0,
                                    tooltipDiffY: 5

                                };

                                //var svg3DTagCloud = new SVG3DTagCloud( document.getElementById( 'holder'  ), settings );
                                $('#tags').svg3DTagCloud(settings);
                            });
                        </script>
                    </div>
                </li>
                
                    <script src="https://cdn.jsdelivr.net/gh/itjoker233/Gridea-theme-Chic/assets/media/script/APlayer.min.js"></script>
                    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css">
                    <div id="player"></div>
                    
                        <li class="lite-item">
                            <header class="lite-item-header">
                                <h3 class="lite-item-title">
                                    &#x1F3B5;&#x97F3;&#x4E50;
                                </h3>
                            </header>
                            <div class="textwidget">
                                <p>
                                    <div id="playerbox"></div>
                                </p>
                            </div>
                        </li>
                        
                            <script>
                                function LoadPlayer() {
                                    var music_array = [];
                                    
                                    music_array.push({
                                        name: 'Wherever You Go',
                                        url: 'https://blog.yt1209.com/WhereverYouGo.mp3',
                                        artist: 'A Rocket to the Moon',
                                        cover: 'https://p1.music.126.net/ghFwbrRBHXuVGz2kVG3EUw==/2412328511380407.jpg?param=130y130',
                                    });
                                    
                                    music_array.push({
                                        name: 'Gotta Have You',
                                        url: 'https://blog.yt1209.com/Gotta Have You.mp3',
                                        artist: 'The Weepies',
                                        cover: 'https://p2.music.126.net/AXD2wl0N3UooNRL_kPnpGQ==/6650945837329535.jpg?param=130y130',
                                    });
                                    
                                    music_array.push({
                                        name: 'æ„›ã«ã§ãã‚‹ã“ã¨ã¯ã¾ã ã‚ã‚‹ã‹ã„',
                                        url: 'https://blog.yt1209.com/æ„›ã«ã§ãã‚‹ã“ã¨ã¯ã¾ã ã‚ã‚‹ã‹ã„.mp3',
                                        artist: 'RADWIMPS',
                                        cover: 'https://p2.music.126.net/dRwInA9PpkiKkmNWeUvi0w==/109951164220136544.jpg?param=130y130',
                                    });
                                    
                                    music_array.push({
                                        name: 'å¼€å§‹æ‡‚äº†',
                                        url: 'https://blog.yt1209.com/å¼€å§‹æ‡‚äº†.mp3',
                                        artist: 'å­™ç‡•å§¿',
                                        cover: 'https://p2.music.126.net/35P1LoCK43ANZ7Ebngrt4Q==/109951165549829619.jpg?param=130y130',
                                    });
                                    
                                    music_array.push({
                                        name: 'ã‚ã–ã›ãƒã‚±ãƒ¢ãƒ³ãƒã‚¹ã‚¿ãƒ¼',
                                        url: 'https://blog.yt1209.com/ã‚ã–ã›ãƒã‚±ãƒ¢ãƒ³ãƒã‚¹ã‚¿ãƒ¼.mp3',
                                        artist: 'æ¾æœ¬æ¢¨é¦™',
                                        cover: 'https://p1.music.126.net/iAygFRUN_zMX-ObZkjTfOA==/1317214930122446.jpg?param=130y130',
                                    });
                                    
                                    music_array.push({
                                        name: 'Shotgun',
                                        url: 'https://blog.yt1209.com/Shotgun.mp3',
                                        artist: 'Us The Duo',
                                        cover: 'https://p2.music.126.net/owFblNP0hTHbGbtThZk2Ug==/109951164074045609.jpg?param=130y130',
                                    });
                                    
                                    music_array.push({
                                        name: 'FreeLoop',
                                        url: 'https://blog.yt1209.com/FreeLoop.mp3',
                                        artist: 'Daniel Powter',
                                        cover: 'https://p1.music.126.net/grGdswi38xUoYcDBISdKcg==/92358976750445.jpg?param=130y130',
                                    });
                                    
                                    music_array.push({
                                        name: 'Everglow',
                                        url: 'https://blog.yt1209.com/Everglow.mp3',
                                        artist: 'Coldplay,Gwyneth Paltrow',
                                        cover: 'https://p1.music.126.net/tnaTZ9ZokTL7w0kDa73iVA==/3297435376989078.jpg?param=130y130',
                                    });
                                    
                                    
                                    const ap = new APlayer({
                                        container: document.getElementById('playerbox'),
                                        audio: music_array
                                    });
                                    
                                }
                                LoadPlayer();
                            </script>
                            
                                
                                    
                                        
                                                
                                                    <li class="lite-item">
                                                        <header class="lite-item-header">
                                                            <h3 class="lite-item-title">&#x1F468;&#x200D;&#x1F4BB;&#x53CB;&#x94FE;</h3>
                                                        </header>
                                                        <div class="textwidget">
                                                            
                                                                
                                                                    <p onclick="javascript:top.location='https://blog.itjoker.cn'"><span class="link_a"><a href="https://blog.itjoker.cn" alt="ITJoker ">ITJoker -ITJoker&#39;s Blog</a></span></p>

                                                                    
                                                                    <p onclick="javascript:top.location='https://layne666.cn'"><span class="link_a"><a href="https://layne666.cn" alt="Layne666 - Blog ">Layne666 - Blog -ä¸å¤šè¯´äº†ï¼Œè¯¸ä½ï¼Œæ‹”å‰‘å§ï¼</a></span></p>

                                                                    
                                                                    <p onclick="javascript:top.location='http://noechou.cn'"><span class="link_a"><a href="http://noechou.cn" alt="noechou ">noechou -life is beautiful</a></span></p>

                                                                    
                                                                    <p onclick="javascript:top.location='https://blog.skywalkerch.cn/'"><span class="link_a"><a href="https://blog.skywalkerch.cn/" alt="Skywalkerch â€“ skywalkerchçš„åšå®¢ ">Skywalkerch â€“ skywalkerchçš„åšå®¢ -æ¥è‡ªå®‡å®™å¦ä¸€ç«¯çš„å¤©è¡Œè€…</a></span></p>

                                                                    
                                                                    <p onclick="javascript:top.location='https://www.summerfire.cn'"><span class="link_a"><a href="https://www.summerfire.cn" alt="å¤æ—¥è¤ç« ">å¤æ—¥è¤ç« -ä¸ªäººå­¦ä¹ ç¬”è®°ï¼Œå¦‚æœèƒ½å¸®åˆ°ä½ ï¼Œä¸èƒœè£å¹¸ã€‚</a></span></p>

                                                                    
                                                                    <p onclick="javascript:top.location='https://www.scery.com'"><span class="link_a"><a href="https://www.scery.com" alt="Anthony&#39;s Blog ">Anthony&#39;s Blog -As you look around</a></span></p>

                                                                    
                                                                    <p onclick="javascript:top.location='https://naiquoy.com'"><span class="link_a"><a href="https://naiquoy.com" alt="Marshall&#39;s Blog ">Marshall&#39;s Blog -</a></span></p>

                                                                    
                                                                        
                                                        </div>
                                                    </li>
    </ul>
</div>
        </div>

</body>
<footer id="foot">
    <a class="back-to-top" href="#"><i class="Card Card-top" ></i><span class="back-to-top-text">0%</span></a>
    <div class="copyright">
        Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
            
                <div style="width:300px;margin:0 auto; padding:0px 0;">
                    <a target="_blank" href="https://www.beian.gov.cn/portal/registerSystemInfo?recordcode=20063723" style="display:inline-block;text-decoration:none;height:20px;line-height:20px;">
                        <img src="https://yanxuan.nosdn.127.net/b610ced5ac6a0e25cf6edf5606c69775.png" style="float:left;">
                        <p id="icpinfo" style="float:left;height:20px;line-height:20px;margin: 0px 0px 0px 5px;">
                            ç²¤ICPå¤‡20063723å·
                        </p>
                    </a>
                </div>
                
                    

                        <div style="font-size:12px">
                            
                                        å·²ç»å»ºç«™ <b id='build_time'></b>
                        </div>
                        <script src="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io/CDN/js/time.min.js"></script>
                        <script>
                            buildTime = '2021-2-12'
                            setInterval(show_date_time, 1000, buildTime);
                        </script>
                        
                            <a href="https://blog.itjoker.cn">
                                Theme - Card
                            </a>&nbsp;|&nbsp; &#x7248;&#x6743;&#x6240;&#x6709; &copy;
                            <script>
                                var date = new Date();
                                data2 = new Date(buildTime.replace(/-/g, "/"));
                                nowYear = date.getFullYear().toString()
                                buildYear = data2.getFullYear().toString();
                                if (buildYear == nowYear) {
                                    document.write('<span class="my-face">' + nowYear + '</span>');
                                } else {
                                    document.write(buildYear + '-<span class="my-face">' + nowYear + '</span>');
                                }
                            </script>

                            <a href="https://solitudealma.github.io">
                                SolitudeAlma
                            </a>&nbsp;|&nbsp;Powered by
                            <a href="https://coding.net" target="_blank">
                                Coding.net
                            </a>
    </div>
    <script>
        let back2TopText = document.querySelector('.back-to-top-text')
        window.addEventListener('scroll', function(e) {
            let percent = document.scrollingElement.scrollTop / (document.scrollingElement.scrollHeight - document.scrollingElement.clientHeight) * 100;
            if (back2TopText) {
                back2TopText.textContent = Math.floor(percent).toString() + '%';
            }
        });
        var titleTime;
        document.addEventListener("visibilitychange", function() {
            document.hidden ? (document.title = "\uD83D\uDE25" + OriginTitile, clearTimeout(titleTime)) : (document.title = "\uD83D\uDE1D" + OriginTitile, titleTime = setTimeout(function() {
                document.title = OriginTitile
            }, 2E3))
        });
        var OriginTitile = document.title;
        
        App.hitokoto();
        
        
        App.weather();
        
        var themeIcon = document.getElementById("themeIcon");
        const currentTheme = window.localStorage.getItem('theme');
        if (currentTheme == 'dark') {
            themeIcon.classList.remove('Card-moon');
            themeIcon.classList.add('Card-sun');
            imgList = document.getElementsByTagName('img');
            for (let i = 0; i < imgList.length; i++) {
                imgList[i].style.cssText = mediaCssText;
            }
            document.documentElement.style.cssText = cssText;
            document.getElementsByClassName('card-bg')[0].style.cssText = mediaCssText;
        } else {
            themeIcon.classList.remove('Card-sun');
            themeIcon.classList.add('Card-moon');
            imgList = document.getElementsByTagName('img');
            for (let i = 0; i < imgList.length; i++) {
                imgList[i].style.cssText = '';
            }
            document.documentElement.style.cssText = '';
            document.getElementsByClassName('card-bg')[0].style.cssText = '';
        }
        App.clearLog();
        App.outputlog();
        var logo = '%cSolitudeAlma\'%cBlog';
        console.info(
            logo,
            'color: #ffffff; background: #000000; padding:5px 10px 5px 10px;font-size:40px;border-radius:12px 0 0 12px;', 'color: #000000; background: #FE9A00; padding:5px 10px;font-size:40px;border-radius:0 12px 12px 0;'
        );
        $('img').attr('data-fancybox', 'images');
    </script>
</footer>
    <script>
        renderMathInElement(document.body, {
            delimiters: [{
                left: "$$",
                right: "$$",
                display: true
            }, {
                left: "$",
                right: "$",
                display: false
            }]
        });
    </script>

</html>